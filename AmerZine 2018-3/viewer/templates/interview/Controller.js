function InterviewController(){function a(){h=j.content.background,f.getBackground().init([h]),f.container.prepend(f.getBackground().render()),f.getBackground().show()}function b(a,b){var c=$(".im-interview-container",f.container);c.children(".active").removeClass("active"),$(c.children().get(a+1)).addClass("active"),0>a?$(".close-button",f.container).css("display","none"):$(".close-button",f.container).css("display","block")}function c(a){$(".text-block",f.container).each(function(){$(this).css("max-height",Magazine.pages.height-$(this).offset().top-a+"px")})}function d(a){Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE?"undefined"!=typeof a.item?b(parseInt(a.item),!0):b(-1,!0):"undefined"!=typeof a.item&&e(a.item)}function e(a){var b=new SubPage;b.data={},j.content.markers[a]&&(b.data.title=j.content.markers[a].title,b.data.description=j.content.markers[a].description),"object"==typeof j.content.markers[a].mobile&&(b.data.image=j.content.markers[a].mobile),f.pushPage(b)}var f,g,h,i,j=!1,k=[];this.init=function(a){f=a},this.willLoadView=function(a){},this.didLoadView=function(){if(Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE){g=$("#interviewBackground",f.container),a(),i=[];for(var b in j.content.markers){var d=j.content.markers[b],l=(new Marker).init(b);l.setLabel(d.label,"hover-label"),l.setPosition(d.position),j.content.position_fixed&&l.setFixed(!0,j.content.background),l.setImage(d.marker),l.setCharacter(d.numlist),null!=d.action?l.setAction(d.action):l.setAction("#!/"+f.alias+"/item/"+b),l.appendTo($(".im-interview-markers-container",f.container)),i.push(l)}$("h2",f.container).hasTransparentBackground()&&$("h2",f.container).css({"padding-top":"0px","padding-bottom":"0px"});var m;$(".im-interview-container .im-absolute-view",f.container).each(function(){m=(new AbsoluteView).init($(this)),j.content.margin||$(this).addClass("aligned-left"),m.setPosition(j.content.margin||{left:0})}),k.push(m)}else g=null,h=null,"undefined"!=typeof f.params.item&&e(f.params.item);c(60)},this.willLoad=function(){},this.didLoad=function(a){j=a,h=j.content.background},this.didAppear=function(a){f.isFirstView()&&(f.scanDirectives(),Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE&&($(".im-interview-container",f.container).fadeIn(),$(".marker",f.container).each(function(a){"undefined"!=typeof $(this)[0].marker&&($(this)[0].marker.show(null,null,null,.3*a+.7),1!=j.content.disable_pulse&&$(this)[0].marker.pulseAnimation(!0,4,2e3*(a+1)))}))),d(a),$(".scroller",f.container).scroll(function(){f.onScrollHandler(-1*$(".scroller .top_header",f.container).offset().top)})},this.willAppear=function(a){},this.onHashChange=function(a){d(a)},this.onOrientationChange=function(){},this.onResizeHandler=function(a){if(Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE){$(".marker",f.container).each(function(b){var c=$(this)[0].marker;if("undefined"!=typeof $(this)[0].marker){c.onResizeHandler(a);var d=c.getLabel();if(d){var e=Assets.navigationBar.size[Magazine.device.size][2]?Assets.navigationBar.size[Magazine.device.size][0]:0;c.getLabelSize()!==!1&&c.getLabelSize().width+20+(c.getOffset().left-f.container.offset().left)+e>Magazine.pages.width?d.css({right:"55px",left:"auto"}):d.css({left:"55px",right:"auto"})}}});for(var b=0;b<k.length;b++)k[b].onResizeHandler(a);c(20)}},this.willDisappear=function(){$(".marker",f.container).each(function(a){"undefined"!=typeof $(this)[0].marker&&$(this)[0].marker.pulseAnimation(!1)})},this.didDisappear=function(){},this.destroy=function(){k=[]},this.render=function(a){a.intromobile=a.intromobile||a.intro;for(var b in a.markers)a.markers[b].index=b,null!==a.markers[b].action?(a.markers[b].action=new ActionModel(a.markers[b].action,a.markers[b].title),a.markers[b].anchor=a.markers[b].action.getAnchor()):a.markers[b].anchor=" href='#!/"+f.alias+"/item/"+b+"'",a.numlist&&(a.markers[b].numlist=parseInt(b)+1)}}Loader.loadComplete();