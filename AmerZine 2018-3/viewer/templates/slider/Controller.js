function SliderController(){function a(a){b(),window.location.hash="#!/"+k.alias+"/item/"+$(this).index()}function b(){1!=l.content.disable_pulse&&$(".marker",k.container).each(function(a){"undefined"!=typeof $(this)[0].marker&&$(this)[0].marker.pulseAnimation(!1)})}function c(){"undefined"!=typeof m.item?d(m.item):1==o&&j()}function d(b){if(o=!0,h(!0),Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE){if(b==n)return;var c=Assets.navigationBar.size[Magazine.device.size],d=0;c[2]&&(d=c[0]/Magazine.pages.width*100),k.container.children("div").addClass("detail");var f=k.container.children("div").children(".bg"),g=20/(f.length-1),j=0,r=null;if(n>=0){var s=$(f[n]);s.children(".text-block").length>0?i(s.children(".text-block")):s.children(".im-sl-video").length>0&&i(s.children(".im-sl-video")),s.on("click",a),s.removeClass("active"),s.addClass("clickable"),null!=q&&(q.release(),q=null)}f.each(function(a){var c=$(this),h=g;a==b?(r=c,h=a!=f.length-1?80-d:80,TweenMax.to(c,.5,{css:{width:h+"%",left:j+"%"},ease:p,onComplete:function(){$(this.target).children(".text-block").length>0?e($(this.target).children(".text-block")):$(this.target).children(".im-sl-video").length>0&&e($(this.target).children(".im-sl-video"),l.content.slider[b].youtube)}}),c.off("click"),c.addClass("active"),c.removeClass("clickable")):(d&&a==f.length-1&&(h+=d),TweenMax.to(c,.5,{css:{width:h+"%",left:j+"%"},ease:p})),j+=h})}else{if(!l.content.slider[b].details&&!l.content.slider[b].hasVideo)return;var t=new SubPage;t.template=Config.templatePathView+k.template+"/Details_corporate.html",t.data={title:l.content.slider[m.item].title,description:l.content.slider[m.item].description,background:null!=l.content.slider[m.item].alt?l.content.slider[m.item].alt:l.content.slider[m.item].background,video:l.content.slider[b].youtube},k.pushPage(t)}n=b}function e(a,b){TweenMax.to(a.get(0),.4,{x:0,opacity:1,ease:Quint.easeOut,onComplete:function(){if($(this.target).find(".close-button").focus(),b){var a=$(this.target);a.show(),f(a);var c=new VideoSettings;q=new Video($(".im-ts-videocontainer",a),b,c),Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE&&q.setPlaybackQuality("hd720"),q.setSize("100%","100%")}}}),a.css("display","block")}function f(a){var b=a.outerWidth();a.css({"margin-left":.5*-b+"px",left:"50%"});var c=$(".im-ts-videocontainer",a);c.css({height:9*c.width()/16});var d=a.outerHeight();a.css({"margin-top":.5*-d+"px",top:"50%"})}function g(a){null!=r&&r.length>0&&(r.show(),a?TweenMax.to(r,.7,{y:0,opacity:1,ease:Back.easeOut}):TweenMax.set(r,{y:0,opacity:1}))}function h(a){if("undefined"!=typeof r&&null!=r&&r.length>0){var b=-r.outerHeight()-r.offset().top;a?TweenMax.to(r,.7,{y:b,opacity:0,onComplete:function(){$(this.target).hide()},ease:Back.easeIn}):(TweenMax.set(r,{y:b,opacity:0}),r.hide())}}function i(a,b){a.length>0&&TweenMax.to(a.get(0),.4,{x:-a.width()-a.offset().left,ease:p,onComplete:function(){a.css("display","none"),a.hasClass("im-sl-video")&&null!=q&&(q.release(),q=null)}})}function j(){if(o=!1,Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE){Magazine.tracker.trackEvent("Item","Close","slide");var b=k.container.children("div").children(".bg");if(k.container.children("div").removeClass("detail"),n>=0){var c=$(b.get(n));c.children(".text-block").length>0?i(c.children(".text-block")):c.children(".im-sl-video").length>0&&i(c.children(".im-sl-video")),c.removeClass("active")}b.each(function(c){var d=null,e=$(this);d=c==n?function(){var b=$(this.target);b.on("click",a),g(!0)}:null,TweenMax.to(e.get(0),.5,{css:{width:100/b.length+"%",left:c*(100/b.length)+"%"},ease:p,onComplete:d})})}n=-1}var k,l,m,n=-1,o=!1,p=Sine.easeInOut,q=null,r=null,s=Hogan.compile('<div class="im-sl-title paragraph text-block"><h2>{{{title}}}</h2><div>{{{description}}}</div></div>');this.init=function(a){k=a},this.willLoadView=function(a){m=a},this.didLoadView=function(){if(r=null,Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE){var b=k.container.children("div").children(".bg");if(1==l.content.border_style?k.container.addClass("style01"):k.container.addClass("style00"),b.each(function(c){var d=$(this);0==c&&d.css("border","none");var e=d.children(".text-block");e.css({x:-e.width()}),TweenMax.to(d.get(0),.5,{css:{width:100/b.length+"%",left:c*(100/b.length)+"%"},ease:p}),d.find(".close-button").on("click",function(a){a.preventDefault(),window.location.hash="#!/"+k.alias}),d.on("click",a)}),l.content.header){var c=(new AbsoluteView).init();c.appendChild(s.render(l.content)),c.appendTo(k.container),c.setPosition(l.content.title_position||"top-center")}k.scanDirectives()}else{var d=k.container.find(".scroller");d.length>0&&d.bind("touchmove",function(a){k.onScrollHandler(-1*d.children("div").first().offset().top)})}},this.willLoad=function(){},this.didLoad=function(a){l=a},this.didAppear=function(){1!=l.content.disable_pulse&&Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE&&$(".marker",k.container).each(function(a){"undefined"!=typeof $(this)[0].marker&&$(this)[0].marker.pulseAnimation(!0,3,2e3*(a+1))})},this.willAppear=function(a){if(Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE&&k.isFirstView()){r=$(".im-sl-title",k.container);var b=k.container.children("div").children(".bg");b.each(function(a){var b=$(this),c=l.content.slider[a];if(null!==c.position&&c.position.length>1){var d=(new Marker).init(a);d.setLabel(c.title),d.setPosition(c.position),d.setImage(c.marker),d.setAction("#!/"+k.alias+"/item/"+a),d.appendTo(b),d.setLabelPosition(c.angle),d.show(null,null,null,.3*a)}var e=b.find(".text-block");0===e.length&&(e=b.find(".im-sl-video")),e.length>0&&(TweenMax.set(e.get(0),{x:-e.width()-e.offset().left,ease:p}),e.css("display","none"))}),$(".im-ts-label",k.container).each(function(){"undefined"==typeof $(this).attr("style")&&$(this).css("margin-left",.5*-$(this).width())})}m=a,c()},this.onHashChange=function(a){m=a,c()},this.onOrientationChange=function(a){},this.onResizeHandler=function(a){},this.onEndResizeHandler=function(a){var b=k.container.children("div").children(".bg");$(b[n]).find(".im-sl-video").each(function(){f($(this))})},this.willDisappear=function(){},this.didDisappear=function(){null!=q&&(q.release(),q=null)},this.destroy=function(){},this.render=function(a){for(var b in a.slider)a.slider[b].index=b,a.slider[b].hasVideo=0!=a.slider[b].content_type,a.slider[b].details=(a.slider[b].title||a.slider[b].description)&&1!=a.slider[b].content_type,b==a.slider.length-1&&(a.slider[b].last="last");(a.title||a.description)&&(a.header=!0,a.position||(a.position="top-center"))}}Loader.loadComplete();