function MoodPageList(){var a,b,c,d,e,f;this.amount=0,this.init=function(c){a=c,a[0].MoodPageList=this,Magazine.registClass(this);var e=Magazine.getNavigationController().getPages();b=$("<div class='list'></div>"),this.amount=0;for(var f in e)1!=e[f].options.exclude_from_navigationbar&&(b.append("<div href='#!/"+e[f].alias+"' data-pagenumber='"+e[f].number+'\' onclick=\'Magazine.tracker.trackEvent("Footer", "Click", "'+e[f].title+"\")' class='im-ts-nav-bar-background nav-btn'><span>"+e[f].title.maxLines(2)+"</span></div>"),this.amount++);d=$("<div class='active'><span></span></div>"),b.append(d),b.children(".nav-btn").on("click",function(){window.location.hash=$(this).attr("href")}),a.append(b),d.children("span").css({"border-bottom-color":d.css("background-color")}),new MousePositionScroll(b),Magazine.device.SUPPORT_TOUCH?b.css("overflow-x","scroll"):b[0].mousePositionScroll.init()},this.show=function(){d.children("span").css({"border-bottom-color":d.css("background-color")}),this.onResizeHandler(Magazine.device),this.onPageChangeHandler(null,Magazine.getNavigationController().getPageByIndex(Magazine.getNavigationController().current))},this.onPageChangeHandler=function(a,d){f=d.number;var e=this.positionActiveButton(),g=b.scrollLeft();e.left<g?b[0].mousePositionScroll.moveTo(Math.max(e.left-.5*c,0)):e.left+e.width>g+c&&b[0].mousePositionScroll.moveTo(Math.min(e.left+e.width-c+.5*c-.5*e.width,b[0].scrollWidth-c))},this.onResizeHandler=function(d){c=Magazine.pages.width-50-a.closest(".nav-buttons-bar").children(".buttons-left").outerWidth(),"undefined"==typeof e&&(e=0,b.children().each(function(){e+=$(this).outerWidth()})),!Magazine.device.isIE9&&c>e?(b.children().css("width",Math.floor(c/this.amount)+"px"),b.css("-webkit-mask-image","none")):(b.children().css("width",""),b.css("-webkit-mask-image","")),b.width(c),"undefined"!=typeof f&&this.positionActiveButton(),Magazine.device.SUPPORT_TOUCH||b[0].mousePositionScroll.onResizeHandler(d)},this.positionActiveButton=function(){var a=$(b.children('[data-pagenumber="'+f+'"]')),c=!1;0===a.length&&(c=!0);var e=$(b.children()[0]);0===a.length&&(b.children().each(function(){return $(this).data("pagenumber")>f||void 0===$(this).data("pagenumber")?!1:void(a=$(this))}),0===a.length&&(a=!1));var g,h,i=function(){a!==!1?(g=a.offset().left-e.offset().left,h=a.outerWidth(),d.css({width:h+"px",left:g+"px",opacity:1})):(d.css({width:0,opacity:0}),h=0,g=e.offset().left)};return setTimeout(i,100),i(),b.find(".mood-btn-active").removeClass("mood-btn-active"),a&&a.addClass("mood-btn-active"),{left:g,width:h}},this.onMagazineReady=function(){this.show()}}Loader.loadComplete();