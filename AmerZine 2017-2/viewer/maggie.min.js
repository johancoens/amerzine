function InPageNavigation(){function a(a){return a=parseInt(a),!(f.total<=1)&&(a<0?h?f.total+a:0:a>=f.total&&h?a%f.total:a<f.total&&a)}var b,c,d,e,f=this,g=0,h=!1,i=null,j=!1,k=null,l=!1;this.total=1,this.init=function(a,b){return d=a,e=new IMGesture(b),e.on(IMGestures.DOWN,function(){f.prev()}),e.on(IMGestures.UP,function(){f.next()}),e.disable(),f},this.addButtonClass=function(a,d){"undefined"==typeof d&&(d=a),"undefined"!=typeof b?(c.addClass(a),b.addClass(d)):Console.error("SET ICON CLASS BEFORE addButtonClass")},this.setIconClass=function(a,d,e){"undefined"==typeof a&&(a="im-sp-arrow-<>"),"undefined"==typeof d&&(d=a),e||(e="50-0_55"),b=$("<a href='#' class='in-page-navigation im-sp-size-"+e+" im-next'><span class='im-sp "+d.replace("<>","down")+"'></span></a>"),c=$("<a href='#' class='in-page-navigation im-sp-size-"+e+" im-previous'><span class='im-sp "+a.replace("<>","up")+"'></span></a>"),b.addClass("disabled"),c.addClass("disabled")},this.prev=function(b){"undefined"!=typeof b&&b.preventDefault();var c=a(parseInt(g)-1);j||c===!1||(window.location.href=d+"/item/"+c)},this.next=function(b){"undefined"!=typeof b&&b.preventDefault();var c=a(parseInt(g)+1);j||c===!1||(window.location.href=d+"/item/"+c)},this.to=function(a){window.location.href=d+"/item/"+a},this.setUseButtons=function(a){a?(b.off("click"),c.off("click"),b.on("click",f.next),c.on("click",f.prev)):(b.off("click"),c.off("click")),i=a},this.onHashChange=function(a){f.setParams(a,!1)},this.setParams=function(b,c){if("undefined"==typeof c&&(c=!0),"undefined"==typeof b.item)f.goto(-1,!0);else{var d=a(b.item);d!==!1&&f.goto(d,c)}},this.goto=function(a,d){a<0&&(a=0),i&&(a<=0?c.addClass("disabled"):c.removeClass("disabled"),a>=f.total-1?b.addClass("disabled"):b.removeClass("disabled")),f.onRequestHandler(a,g,d),a>=0&&(g=a)},this.getButtons=function(){return{next:b,previous:c}},this.release=function(){b.off("click"),c.off("click"),b.remove(),c.remove(),c=null,b=null,f=null},this.enableScroll=function(a){l=!0,k=a,e.enable()},this.disableScroll=function(){l=!1,e.disabled()},this.onRequestHandler=function(a,b){},this.setDisabled=function(a){j=a}}function PageController(){var a,b,c=null,d=null,e=-1,f=this,g=!1,h=!1,i=!1,j=null,k=.5,l=null;this.view,this.animationSpeed=.5,this.ease="ease",this.total=0,this.init=function(a){f.view=$("<div class='im-page-controller'></div>"),d=[],c=a,Magazine.device.SUPPORT_TOUCH&&f.initTouch()},this.appendTo=function(a){a.append(f.view)},this.disableTouch=function(){null!=j&&(j.release(),j=null)},this.enableTouch=function(){Magazine.device.SUPPORT_TOUCH&&null==j&&f.initTouch()},this.initTouch=function(){j=new Touch,j.init(f.view,TouchOrientation.VERTICAL),j.animateOut(!1),j.onTouchStart=function(){a=!0,b=null,i=f.getPage(e)},j.onVerticalDrag=function(c,d,g){var j=0;null!=b&&g!==b&&(a=!0),g!==TouchDirection.UP?(h=f.getPage(e-1),j=d-f.getHeight()):(h=f.getPage(e+1),j=d+f.getHeight()),h?(a&&(h.willAppear(g),a=!1),Magazine.device.isIE8?(TweenMax.set(h.view,{y:j}),TweenMax.set(i.view,{y:d})):(h.view.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,j,0)),i.view.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,d,0)))):Magazine.device.isIE8?TweenMax.set(i.view,{y:.3*d}):i.view.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,.3*d,0)),a&&i.willDisappear(),b=g},j.onTouchEnd=function(a,d,e){if(TouchSettings.DISABLED=!0,Math.abs(d)>50&&h)g=!0,"function"==typeof c.didSwipeTo&&c.didSwipeTo(h.index);else{var j={};if(j[Magazine.device.getCssProperty("transform")]="",j[Magazine.device.getCssProperty("transition-property")]="all",j[Magazine.device.getCssProperty("transition-duration")]="250ms",h){var k=f.getHeight();h.willDisappear(),b===TouchDirection.DOWN&&(k*=-1),j[Magazine.device.getCssProperty("transform")]=Magazine.device.getCssTranslate(0,k,0),h.view.css(j).bind(Magazine.device.getCssProperty("transitionend"),function(a){jQuery(a.target).unbind(a.type).css(Magazine.device.getCssProperty("transition-duration"),"0ms")})}i.willAppear(!1),j[Magazine.device.getCssProperty("transform")]=Magazine.device.getCssTranslate(0,0,0),i.view.css(j).bind(Magazine.device.getCssProperty("transitionend"),function(a){jQuery(a.target).unbind(a.type).css(Magazine.device.getCssProperty("transition-duration"),"0ms")}),TouchSettings.DISABLED=!1}}},this.onTransitionEnd=function(a){jQuery(a.target).unbind(a.type).css(Magazine.device.getCssProperty("transition-duration"),"0ms")},this.getPage=function(a){return a>=0&&a<d.length&&d[a]},this.getAnimationEase=function(){return l},this.setAnimationEase=function(a){l=a},this.getAnimationTime=function(){return k},this.setAnimationTime=function(a){k=a},this.getHeight=function(){return f.view.height()},this.addPage=function(a){a.controller=f,a.index=d.length,f.view.append(a.view),a.view.find(".dynamicForm").each(function(){new DynamicForm(null,$(this))}),f.total++,d.push(a)},this.isAnimating=function(){},this.gotoPage=function(a){if(a=parseInt(a),a!==e){var b=a>e?PageControllerDirection.DOWN:PageControllerDirection.UP,f=this;g||d[a].willAppear(b),e>-1&&e!=a&&(g||(c.willDisappear(d[a]),d[e].willDisappear())),Magazine.device.requestAnimationFrame(function(){f.isAnimating(!0),d[a].appear(e!==-1&&e!==a,b,function(){c.didAppear(this),this.didAppear(),g&&(TouchSettings.DISABLED=!1,g=!1),f.isAnimating(!1)},g),e>-1&&e!=a&&d[e].disappear(!0,b,function(){this.didDisappear(),c.didDisappear(this)},g),e=a})}},this.onEndResizeHandler=function(a){"undefined"!=typeof d[e]&&d[e].onEndResizeHandler(a)},this.didDisappear=function(){"undefined"!=typeof d[e]&&d[e].didDisappear(),e=-1},this.pause=function(){for(var a in d)d[a].pause()},this.foreachPage=function(a){for(var b in d)a.call(d[b],b)},this.getDelegate=function(){return c},this.release=function(){for(var a in d)d[a].release();null!=j&&(j.release(),j=null),e=null,d=null}}function PageControllerPage(){var a,b,c,d=this;this.controller,this.view,this.background=null,this.isFirstView=!0,this.video=!1,this.init=function(a){return c=a,d.view=$("<div class='im-page-controller-page'></div>"),d.view.hide(),d},this.getData=function(){return c},this.isLast=function(){return d.index===d.controller.total-1},this.append=function(a){d.view.append(a),b=d.view.scanDirectives(this)},this.getContentByString=function(a){return Object.byString(c,a)},this.willAppear=function(a){if(d.view.css("z-index","3"),d.view.show(),d.background.show(),a!==!1){var b=d.controller.getHeight();a===PageControllerDirection.UP&&(b*=-1),Magazine.device.isIE9&&d.view.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,b,0))}null!=d.background&&d.background.pageWillAppear(),this.isFirstView&&this.view.handleAlignments(),d.controller.getDelegate().willAppear(d),d.onEndResizeHandler(Magazine.device)},this.appear=function(b,c,e,f){function g(b){void 0!==b&&void 0!==b.target&&b.target!==d.view[0]||(clearTimeout(a),(Magazine.device.isIE9||f)&&d.controller.onTransitionEnd(b),e.apply(d))}if(b===!0)if(Magazine.device.isIE8)TweenMax.to(d.view,d.controller.animationSpeed,{y:0,ease:d.controller.ease,onComplete:function(){e.apply(d)}});else{var h={},i=Animation.slideInUp,j=d.controller.getAnimationEase();j&&(h[Magazine.device.getCssProperty("animation-timing-function")]=j),c===PageControllerDirection.DOWN&&(i=Animation.slideInDown),Magazine.device.isIE9||f?(h[Magazine.device.getCssProperty("transform")]=Magazine.device.getCssTranslate(0,0,0),j&&(h[Magazine.device.getCssProperty("transition-timing-function")]=j),h[Magazine.device.getCssProperty("transition-property")]="all",h[Magazine.device.getCssProperty("transition-duration")]=1e3*d.controller.getAnimationTime()+"ms",d.view.unbind(Magazine.device.getCssProperty("transitionend")).bind(Magazine.device.getCssProperty("transitionend"),g)):d.view.startAnimation(i,{duration:1e3*d.controller.getAnimationTime()+"ms",ease:j},g),d.view.css(h),clearTimeout(a),a=setTimeout(function(){g({target:d.view,type:Magazine.device.getCssProperty("transitionend")})},3e3*d.controller.getAnimationTime())}else Magazine.device.isIE8?TweenMax.set(d.view,{y:0}):d.view.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,0,0)),e.apply(d)},this.didAppear=function(){d.isFirstView=!1},this.cancel=function(){clearTimeout(a)},this.setBackground=function(a){null==d.background&&(d.background=new Background,d.background.init([a]),d.view.prepend(d.background.render()))},this.willDisappear=function(){for(var a=0;a<b.length;a++)b[a].imMedia&&b[a].imMedia.pause();d.view.css("z-index","2")},this.disappear=function(b,c,e,f){function g(b){void 0!==b&&void 0!==b.target&&b.target!==d.view[0]||(clearTimeout(a),(Magazine.device.isIE9||f)&&d.controller.onTransitionEnd(b),e.apply(d))}var h=d.controller.getHeight();if(c===PageControllerDirection.DOWN&&(h*=-1),b)if(Magazine.device.isIE8)TweenMax.to(d.view,d.controller.animationSpeed,{y:h,ease:d.controller.ease,onComplete:function(){e.apply(d)}});else{var i={},j=Animation.slideOutDown,k=d.controller.getAnimationEase();c===PageControllerDirection.DOWN&&(j=Animation.slideOutUp),Magazine.device.isIE9||f?(i[Magazine.device.getCssProperty("transform")]=Magazine.device.getCssTranslate(0,h,0),k&&(i[Magazine.device.getCssProperty("transition-timing-function")]=k),i[Magazine.device.getCssProperty("transition-property")]="all",i[Magazine.device.getCssProperty("transition-duration")]=1e3*d.controller.getAnimationTime()+"ms",d.view.unbind(Magazine.device.getCssProperty("transitionend")).bind(Magazine.device.getCssProperty("transitionend"),g)):d.view.startAnimation(j,{duration:1e3*d.controller.getAnimationTime()+"ms",ease:k},g),d.view.css(i),clearTimeout(a),a=setTimeout(function(){g({target:d.view,type:Magazine.device.getCssProperty("transitionend")})},3e3*d.controller.getAnimationTime())}else e.apply(d)},this.didDisappear=function(){null!=d.background&&d.background.pageDidDisappear(),d.video&&d.video.release(),d.view.unbind(Magazine.device.getCssProperty("transitionend")),d.view.hide(),d.view.css("z-index","")},this.onEndResizeHandler=function(a){var b=d.view.find(".im-ts-videocontainer");b.length>0&&b.css({height:9*b.width()/16}),null!=d.background&&d.background.onEndResizeHandler(a)},this.release=function(){null!=d.background&&d.background.release(),d.video&&d.video.release()}}function JSDate(a){var b;"undefined"==typeof a||isNaN(a)?"undefined"!=typeof a&&(b=new Date(a)):b=new Date(1e3*a),this.getDay=function(){return b.getDate()},this.getDayOfTheWeek=function(){return Dates.EEEE[b.getDay()]},this.getMonth=function(){return b.getMonth()+1},this.getMonthName=function(){return Dates.MMM[b.getMonth()]},this.getFullMonthName=function(){return Dates.MMMM[b.getMonth()]},this.getFullYear=function(){return b.getFullYear()},this.get=function(a){switch(a){case"EEEE":return Translate.getLabel(Dates[a][b.getDay()]);case"EE":return Translate.getLabel(Dates[a][b.getDay()]);case"MMMM":return Translate.getLabel(Dates[a][b.getMonth()]);case"MMM":return Translate.getLabel(Dates[a][b.getMonth()]);case"MM":return b.getMonth()+1;case"yyyy":return b.getFullYear();case"hh":return b.getHours();case"mm":return b.getMinutes();case"ss":return b.getMinutes();case"dd'":var c=b.getDate();if(11===c||12===c||13===c)return c+"th";var d=String(c);switch(d.slice(-1)){case"1":return c+"st";case"2":return c+"nd";case"3":return c+"rd";default:return c+"th"}case"dd":return b.getDate();default:return""}},this.getFormat=function(a){var b=a;for(var c in Dates)b.indexOf(c)!==-1&&(b=b.replace(c,this.get(c)));return b}}function CookieJar(){function a(a,b,c){try{"undefined"==typeof c&&(c=d);var e=new Date;e.setDate(e.getDate()+c);var f=escape(b)+(null==c?"":"; path=/; expires="+e.toUTCString());document.cookie=a+"="+f}catch(a){Console.error(a)}}function b(a){try{var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("=")),d=e[b].substr(e[b].indexOf("=")+1),c=c.replace(/^\s+|\s+$/g,""),c==a)return unescape(d)}catch(a){}return!1}function c(a){document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie=a+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}var d=14;this.set=function(b,c,d){try{a(b,JSON.stringify(c),d)}catch(a){}},this.remove=function(a){try{c(a)}catch(a){Console.error(a)}},this.get=function(a){try{var c=b(a);if(c)return JSON.parse(c)}catch(a){}return!1}}function Api(a){function b(a,b){return"string"==typeof a?a:a.render(b)}function c(a,c,d,f,g,h){var i,j={};return"object"==typeof a?f?(i=Config.api_url+"/"+b(a.live,d),c!==RequestMethod.GET&&(j.data=g),"application/json; charset=utf-8"===h&&(j.data=JSON.stringify(g))):i=e+"/"+b(a.static,d):(i=a,delete d.edition_id,delete d.url,j.data=d),j.url=i,j.type=c,h&&(j.contentType=h),j.dataType="json",j}function d(b,d,e,f,g,h,i,j){f||(f={}),Config.is_preview&&(e=!0),f.Config&&delete f.Config,f.edition_id=a;var k=c(b,d,f,e,i,j),l=function(a){if(Magazine.api!==!1){var b;a.overlays&&(b=a.overlays),a=JSON.parse(Hogan.compile(JSON.stringify(a)).render(Magazine.api)),b&&(a.overlays=b)}jQuery.isFunction(g)?g(a):jQuery.isFunction(g.done)&&g.done(a)},m=function(a,b,c){return this.tryCount++,this.tryCount<=this.retryLimit?void(d==RequestMethod.GET&&"json"===k.dataType&&"XDomainRequest"in window&&null!==window.XDomainRequest&&Config.standalone!==!0&&0===k.url.indexOf("http")?a.send():$.ajax(this)):(Console.error(k.url+" = failed "+b),void(!jQuery.isFunction(g)&&jQuery.isFunction(g.fail)&&g.fail(arguments)))},n=function(){!jQuery.isFunction(g)&&jQuery.isFunction(g.always)&&g.always(arguments)};if(k.cache=h,k.tryCount=0,k.retryLimit=4,Magazine.device.isAndroid2&&(k.cache=!1),d==RequestMethod.GET&&"json"===k.dataType&&"XDomainRequest"in window&&null!==window.XDomainRequest&&Config.standalone!==!0&&0===k.url.indexOf("http")){var o=new XDomainRequest;return o.tryCount=k.tryCount,o.retryLimit=k.retryLimit,k.cache===!1&&(k.url.indexOf("?")!==-1?k.url+="&":k.url+="?",k.url+="_="+(new Date).getTime()),o.open("get",k.url),o.onerror=function(){m(o,"error"),n()},o.ontimeout=function(){m(o,"timeout"),n()},o.onprogress=function(){},o.onload=function(){var a=JSON.parse(o.responseText);l(a),n()},setTimeout(function(){o.send()},0),o}return jQuery.ajax(k).done(l).fail(m).always(n)}var e=Config.magazine_url;if(!Magazine.device.supports("cors")){var f=e.split("/");f.splice(0,3),e="/"+f.join("/")}var g={editions:{static:Hogan.compile("editions."+Assets.API_FILE_EXTENSION),live:Hogan.compile("magazine/edition/{{edition_id}}/preview/editions")},edition:{static:"pages."+Assets.API_FILE_EXTENSION,live:Hogan.compile("magazine/edition/{{edition_id}}/preview")},page:{static:Hogan.compile("page_{{page_id}}."+Assets.API_FILE_EXTENSION),live:Hogan.compile("magazine/page/{{page_id}}/preview")},form:{static:Hogan.compile("form_{{id}}."+Assets.API_FILE_EXTENSION),live:Hogan.compile("magazine/edition/form/{{id}}/rpc")},contact:{live:Hogan.compile("magazine/edition/{{id}}/whitepaper")},search:{static:"search."+Assets.API_FILE_EXTENSION,live:Hogan.compile("magazine/edition/{{edition_id}}/preview/search")},fonts:{static:"fonts."+Assets.API_FILE_EXTENSION,live:Hogan.compile("magazine/edition/{{edition_id}}/preview/fonts")}};return this.getPages=function(a){return d(g.edition,RequestMethod.GET,!1,null,a,!Config.is_preview)},this.getSearch=function(a){return d(g.search,RequestMethod.GET,!1,null,a,!Config.is_preview)},this.getPage=function(a,b){var c={page_id:a};return d(g.page,RequestMethod.GET,!1,c,b,!Config.is_preview)},this.getFonts=function(a){return d(g.fonts,RequestMethod.GET,!1,null,a,!Config.is_preview)},this.getForm=function(a,b){var c={id:a};return d(g.form,RequestMethod.GET,!1,c,b,!Config.is_preview)},this.postForm=function(a,b,c){try{b.src=document.URL}catch(a){Console.error(a)}return d(g.form,RequestMethod.POST,!0,{id:a},c,!1,b)},this.postContact=function(a,b,c){return d(g.contact,RequestMethod.POST,!0,{id:a},c,!1,b,"application/json; charset=utf-8")},this.getTokenUrl=function(a){var b="magazine/token",c={},e=Magazine.request.getParams();delete e.t,delete e.Config,Config.is_preview&&(b+="/preview/1");for(var f in e)"impr"===f?c[f]=e[f]:(c.pairs=c.pairs||[],c.pairs.push({key:f,value:e[f]}));return d(b,RequestMethod.POST,!0,{},a,!1,c)},this.getEditions=function(a){return d(g.editions,RequestMethod.GET,!0,{},a,!Config.is_preview)},this}function Preloader(){var a=null;this.init=function(b){a=b},this.show=function(){Magazine.splashScreenIsVisible||a.show()},this.hide=function(){a.hide()}}function Device(){function a(){var a,b=document.createElement("p"),c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(b,null);for(var d in c)void 0!==b.style[d]&&(b.style[d]="translate3d(1px,1px,1px)",a=window.getComputedStyle(b).getPropertyValue(c[d]));if(document.body.removeChild(b),l.translate3d=void 0!==a&&a.length>0&&"none"!==a,l.translate3d)l.transform=!0;else{for(var e in c)void 0!==b.style[e]&&(b.style[e]="translate(1px,1px)",a=window.getComputedStyle(b).getPropertyValue(c[e]));l.transform=void 0!==a&&a.length>0&&"none"!==a}}function b(){var b=["animation","transition","borderRadius","keyframes","mask"],d=document.body||document.documentElement,e=d.style;for(var f in b){var g=b[f];if(l[g]=!1,"string"!=typeof e[g]){for(var h=["Moz","Webkit","Khtml","O","ms"],i=g.charAt(0).toUpperCase()+g.substr(1),j=0;j<h.length;j++)if("string"==typeof e[h[j]+i]){l[g]=i;break}l[g]===!1&&(l[g]=!1)}else l[g]=!0}if(a(),l.svg=c(),l["overflow-scroll"]=!0,l.cors=!1,"undefined"!=typeof Storage?l.storage=!0:l.storage=!1,Config.popupPathView=Config.viewer_url+"/popups/",Config.templatePathView=Config.viewer_url+"/templates/",Config.themePathView=Config.viewer_url+"/themes/",("function"==typeof XMLHttpRequest||"object"==typeof XMLHttpRequest)&&"withCredentials"in new XMLHttpRequest||"object"==typeof XDomainRequest||Config.standalone===!0)l.cors=!0;else{var k=Config.viewer_url.split("/"),m=k[k.length-1];Config.popupPathView=Config.popupPathView.split(Config.viewer_url).join("/"+m),Config.templatePathView=Config.templatePathView.split(Config.viewer_url).join("/"+m),Config.themePathView=Config.themePathView.split(Config.viewer_url).join("/"+m)}}function c(){return!(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)||($("body").addClass("no-svg"),!1)}function d(){var a=630,b=460;if(document.body&&document.body.offsetWidth&&(a=document.body.offsetWidth,b=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a=document.documentElement.offsetWidth,b=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(a=window.innerWidth,b=window.innerHeight),k.OS==DeviceOS.IOS_MAC&&k.version<7?b<window.screen.height-64&&k.orientation==DeviceOrientation.PORTRAIT&&(b+=60):k.version>=7&&k.version<8&&$("html").addClass("ios7"),DeviceBrowser.ANDROID==k.browser&&parseInt(k.version)<3)if(DeviceOrientation.LANDSCAPE==k.orientation)switch(a){case 800:b<250&&(b=401);break;case 480:b<200&&(b=241);break;case 320:b<100&&(b=161)}else switch(a){case 480:b<700&&(b=721);break;case 320:b<200&&(b=350);break;case 240:b<150&&(b=241)}return{width:a,height:b}}function e(a){null!==m&&clearTimeout(m),m=setTimeout(function(){Magazine.onEndResizeHandler(k)},20);var b=0;if(k.screen=d(),b=k.screen.width<480?DeviceSize.MOBILE:k.screen.width<768?DeviceSize.MOBILE_LANDSCAPE:k.screen.width<960?DeviceSize.PORTRAIT:DeviceSize.LANDSCAPE,b!==k.size){var c=k.size;k.size=b,n?Magazine.tracker.trackEvent("Device","Switch size",f()):n=!0,Magazine.onSwitchSize(k,c)}a!==!0&&Magazine.onResizeHandler(k)}function f(){switch(k.size){case 1:return"Mobile";case 2:return"Mobile landscape";case 3:return"Portrait";case 4:return"Landscape"}return k.size}function g(a){Magazine.orientationWillChange(k),0===window.orientation?k.orientation=DeviceOrientation.PORTRAIT:90===window.orientation?k.orientation=DeviceOrientation.LANDSCAPE:window.orientation===-90?k.orientation=DeviceOrientation.LANDSCAPE:k.orientation=DeviceOrientation.PORTRAIT,Magazine.tracker.trackEvent("Device","Rotate",k.orientation),a?setTimeout(function(){e(!0),Magazine.onOrientationChange(k)},500):(e(!0),Magazine.onOrientationChange(k))}function h(a,b){for(var c=0;c<a.length;c++){var d;d="undefined"==typeof b?a[c].string:navigator.userAgent;var e=a[c].prop;if(this.version_searchString=a[c].versionSearch||a[c].identity,d){if(d.indexOf(a[c].subString)!=-1)return a[c].identity}else if(e)return a[c].identity}}function i(a){var b=a.indexOf(this.version_searchString);if(b!=-1)return parseFloat(a.substring(b+this.version_searchString.length+1))}var j,k=this,l={},m=null,n=!1;this.type=null,this.isIE8=!1,this.isIE9=!1,this.userAgent=null,this.OS=null,this.browser=null,this.version=null,this.isOnline=!0,this.screen=null,this.isAndroid2=!1,this.orientation=null,this.size=null,this.SUPPORT_TOUCH="ontouchstart"in window,this.engine=null,this.innerHeight=0,this.innerWidth=0,this.animationLevel=4,this.getTouchEvents=function(){return"ontouchstart"in window?{START_EVENT:"touchstart",MOVE_EVENT:"touchmove",END_EVENT:"touchend",CANCEL_EVENT:"touchcancel"}:10===Magazine.device.version?{START_EVENT:"MSPointerDown",MOVE_EVENT:"MSPointerMove",END_EVENT:"MSPointerUp",CANCEL_EVENT:"MSPointerCancel"}:Magazine.device.browser==DeviceBrowser.IE&&{START_EVENT:"pointerdown",MOVE_EVENT:"pointermove",END_EVENT:"pointerup",CANCEL_EVENT:"pointercancel"}},this.supportMimeType=function(a,b){var c="video";"undefined"==typeof b&&(b=!1),b&&(c="audio");var d=document.createElement(c);if("function"==typeof d.canPlayType){var e=d.canPlayType(a);if("maybe"==e.toLowerCase()||"probably"==e.toLowerCase())return!0}return!1},this.getCssTranslate=function(a,b,c,d){return l.translate3d?("undefined"==typeof c&&(c=0),d?"translate3d("+a+"px,"+b+"px,"+c+"px)":"translate3d("+Math.round(a)+"px,"+Math.round(b)+"px,"+Math.round(c)+"px)"):"translate("+Math.round(a)+"px,"+Math.round(b)+"px)"},this.requestAnimationFrame=function(a){if("function"==typeof a)if(j)window[j](a);else var b=setTimeout(function(){clearTimeout(b),a()},17)},this.supportsAnimations=function(){return"undefined"!=typeof l.animation&&!!l.animation},this.supportsSvg=function(){return"undefined"!=typeof l.svg&&!!l.svg},this.supportsTransform=function(){return"undefined"!=typeof l.transform&&!!l.transform},this.supports=function(a){return"undefined"!=typeof l[a]&&!!l[a]},this.getCssPrefix=function(){switch(k.browser){case DeviceBrowser.FIREFOX:return"-moz-";case DeviceBrowser.SAFARI:case DeviceBrowser.CHROME:case DeviceBrowser.ANDROID:return"-webkit-";case DeviceBrowser.OPERA:return"";case DeviceBrowser.IE:return"-ms-";default:return""}},this.getCssProperty=function(a){var b="";switch(k.browser){case DeviceBrowser.FIREFOX:b+="-moz-","animationend"==a||"animationstart"==a||"animationiteration"==a||"transitionstart"==a||"transitionend"==a?b="":a=a;break;case DeviceBrowser.SAFARI:case DeviceBrowser.CHROME:case DeviceBrowser.ANDROID:b="webkit","animationend"==a?a="AnimationEnd":"animationiteration"==a?a="AnimationIteration":"animationstart"==a?a="AnimationStart":"transitionend"==a?a="TransitionEnd":"transitionstart"==a?a="TransitionStart":(b="-webkit-",a=a);break;case DeviceBrowser.OPERA:b="","string"==typeof l[a]&&(b="-"+l[a].toLowerCase()+"-"),"animationend"==a||"animationstart"==a||"animationiteration"==a||"transitionstart"==a||"transitionend"==a?b="o":a=a;break;case DeviceBrowser.IE:b="","animationend"==a?a+=" MSAnimationEnd":"animationiteration"==a?a+=" MSAnimationIteration":"animationstart"==a?a+=" MSAnimationStart":"transitionend"==a?a+=" MSTransitionEnd":"transitionstart"==a?a+=" MSTransitionStart":(b="-ms-",a=a)}return b+a},this.init=function(){_userAgent=navigator.userAgent,/Android/i.test(_userAgent)?window.screen.width>=768||window.screen.height>=768?(k.type=DeviceType.TABLET,k.size=DeviceSize.TABLET):(k.type=DeviceType.MOBILE,k.size=DeviceSize.MOBILE):/iPhone/i.test(_userAgent)?(k.type=DeviceType.MOBILE,k.size=DeviceSize.MOBILE):/iPad/i.test(_userAgent)?k.type=DeviceType.TABLET:/iPod/i.test(_userAgent)?(k.type=DeviceType.MOBILE,k.size=DeviceSize.MOBILE):/BlackBerry/i.test(_userAgent)||/BB10/i.test(_userAgent)?(k.type=DeviceType.MOBILE,k.size=DeviceSize.MOBILE):/Windows Phone/i.test(_userAgent)?(k.type=DeviceType.MOBILE,k.size=DeviceSize.MOBILE,k.SUPPORT_TOUCH=!1):k.type=DeviceType.DESKTOP,$("html").addClass(k.type);var a=!1;switch(k.browser=h(o)||"An unknown browser","An unknown browser"==k.browser&&(k.browser=h(o,navigator.userAgent)||"An unknown browser"),k.version=i(navigator.userAgent)||i(navigator.appVersion)||"an unknown version",k.OS=h(p)||DeviceOS.UNKNOWN,$("html").addClass("im-os-"+k.OS),k.browser){case DeviceBrowser.SAFARI:case DeviceBrowser.CHROME:case DeviceBrowser.ANDROID:a=!0,k.engine=DeviceEngine.WEBKIT;break;case DeviceBrowser.OPERA:a=!1,k.engine=DeviceEngine.OPERA;break;case DeviceBrowser.IE:k.version>=10&&(a=!0),k.engine=DeviceEngine.MICROSOFT;break;case DeviceBrowser.FIREFOX:k.version>23&&(a=!0),k.engine=DeviceEngine.MOZILLA;break;default:k.engine=DeviceEngine.UNKNOWN,Console.error("Unknown browser enging")}switch(k.type==DeviceType.DESKTOP?DeviceBrowser.IE!==k.browser||8!==k.version?(DeviceBrowser.IE!==k.browser||9!=k.version&&9!==document.documentMode||(k.isIE9=!0,$("html").addClass("ie-9")),jQuery(window).resize(function(){e()}),k.size=DeviceSize.LANDSCAPE,k.orientation=DeviceOrientation.LANDSCAPE,e()):(k.isIE8=!0,$("html").addClass("ie-8"),k.size=DeviceSize.LANDSCAPE,k.orientation=DeviceOrientation.LANDSCAPE,Assets.maxWidth=1e3,Assets.maxHeight=573,k.screen={width:1001,height:571},Magazine.onResizeHandler(k)):(jQuery(window).resize(function(){e()}),jQuery(window).on("orientationchange",function(){g(k.browser!==DeviceBrowser.SAFARI)}),g(!1)),b(),j="function"==typeof window.requestAnimationFrame?"requestAnimationFrame":"function"==typeof window.mozRequestAnimationFrame?"mozRequestAnimationFrame":"function"==typeof window.webkitRequestAnimationFrame&&"webkitRequestAnimationFrame",Console.log("TYPE : "+k.type),Console.log("OS : "+k.OS),Console.log("BROWSER : "+k.browser),Console.log("VERSION : "+k.version),Console.log("SUPPORT"),Console.log("SUPPORT TOUCH : "+k.SUPPORT_TOUCH),k.SUPPORT_TOUCH&&$("html").addClass("touch-support"),l["background-video"]=k.type===DeviceType.DESKTOP&&a&&Magazine.OS!==DeviceOS.BLACKBERRY,l["background-video"]||$("html").addClass("no-fs-video"),k.allowAnimateOnScroll=!1,k.browser===DeviceBrowser.FIREFOX,"undefined"!=typeof window.navigator&&"undefined"!=typeof window.navigator.onLine&&(k.isOnline=window.navigator.onLine),k.browser){case DeviceBrowser.ANDROID:k.initAndroid();break;case DeviceBrowser.SAFARI:$("html").addClass("safari")}},this.initAndroid=function(){parseInt(k.version)<3&&(k.isAndroid2=!0,l["overflow-scroll"]=!1,Loader.loadCss(Config.viewer_url+"/css/compiled/android2.css")),parseFloat(k.version)<4.3&&(k.animationLevel=1)};var o=[{string:navigator.userAgent,subString:"Chrome",identity:DeviceBrowser.CHROME},{string:navigator.userAgent,subString:"Firefox",identity:DeviceBrowser.FIREFOX},{string:navigator.userAgent,subString:"Android",identity:DeviceBrowser.ANDROID},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:DeviceBrowser.OMNIWEB},{string:navigator.vendor,subString:"Apple",identity:DeviceBrowser.SAFARI,versionSearch:"Version"},{prop:window.opera,identity:DeviceBrowser.OPERA,versionSearch:"Version"},{string:navigator.vendor,identity:DeviceBrowser.ICAB},{string:navigator.vendor,subString:"KDE",identity:DeviceBrowser.KONQUEROR},{string:navigator.vendor,subString:"Camino",identity:DeviceBrowser.CAMINO},{string:navigator.userAgent,subString:"Netscape",identity:DeviceBrowser.NETSCAPE},{string:navigator.userAgent,subString:"MSIE",identity:DeviceBrowser.IE,versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident",identity:DeviceBrowser.IE,versionSearch:"rv"},{string:navigator.userAgent,subString:"Trident",identity:DeviceBrowser.IE,versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:DeviceBrowser.MOZILLA,versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:DeviceBrowser.NETSCAPE,versionSearch:"Mozilla"}],p=[{string:navigator.platform,subString:"Win",identity:DeviceOS.WINDOWS},{string:navigator.platform,subString:"Mac",identity:DeviceOS.MAC},{string:navigator.userAgent,subString:"iPhone",identity:DeviceOS.IOS_MAC},{string:navigator.userAgent,subString:"iPad",identity:DeviceOS.IOS_MAC},{string:navigator.userAgent,subString:"Android",identity:DeviceOS.ANDROID},{string:navigator.platform,subString:"Linux",identity:DeviceOS.LINUX},{string:navigator.platform,subString:"BlackBerry",identity:DeviceOS.BLACKBERRY},{string:navigator.userAgent,subString:"BB10",identity:DeviceOS.BLACKBERRY}]}function NavigationBar(){function a(){var a={pageIndexNumbers:Assets.navigationBar.pageIndexNumbers.render({current:Magazine.getNavigationController().current+1,total:Magazine.getNavigationController().pageTotal}),social:Magazine.social?Magazine.social.getButtons():"",infoButtons:u.get("info").getButtonsDesktop(),logo:o,icon:p,website:i,moreClass:u.get("info").getDesktopCount()<A?"only-mobile":""};if("undefined"!=typeof Config.options.help_page&&0!=Config.options.help_page&&null!=Config.options.help_page){var b={};if(Config.options.help_page.indexOf("overlay")!=-1){var c=Config.options.help_page.split(":");b.href="javascript:void(0);",b.onclick="Magazine.overlay.show('"+c[1]+"'); return false;"}else b.href="#!/"+Magazine.getNavigationController().getPageById(Config.options.help_page).alias;a.helpButton=Assets.navigationBar.helpButton.render(b)}Magazine.editions&&(a.editionsButton=Assets.navigationBar.navigationButton.render({action:"editions",label:Translate.getLabel("btn_editions"),href:"javascript:void(0)"})),Config.options.has_search&&(a.searchButton=Assets.navigationBar.navigationButtonIcon.render({action:"search",sprite:"search",label:Translate.getLabel("search"),href:"javascript:void(0)"})),("mood"===Config.theme||"footer"===Config.theme)&&u.get("info").getDesktopCount()>=A&&(delete a.infoButtons,delete a.searchButton),u.has("share")&&(a.shareButton=Assets.navigationBar.shareButton.render({label:Translate.getLabel("btn_share")}),a.shareButtonMobile=Assets.navigationBar.shareButtonMobile.render({label:Translate.getLabel("btn_share")})),m.html(l.htmltemplate.render(a)),u.get("pageindex").setView($(".page-index",m)),u.get("info").setView($(".nav-custom-page",m)),u.has("more")?u.get("more").setView($(".more-icon-index",m)):($(".more-icon-index",m).css("display","none"),$(".im-btn-more",m).remove()),u.has("share")&&(u.get("share").setView($(".nav-page-right.share-bar",m)),u.get("mobile-share").setView($(".nav-page-bottom.share-bar",m))),Magazine.isBranded===!0&&l.addBranding(),u.has("branding")&&u.get("branding").setView($(".nav-page-bottom.branding-bar",m)),Magazine.editions&&u.get("editions").setView($(".editions",m)),u.get("info").hasPrintOption&&g(),n=$(".page_number",m),f(),"mood"!==Config.theme&&"footer"!==Config.theme||0!==j.getCount()||1==Config.options.has_search||$(".im-btn-more",m).addClass("only-mobile"),0!==j.getCount()&&(1!==j.getCount()||!u.get("info").hasPrintOption||"mood"!==Config.theme&&"footer"!==Config.theme)||1==Config.options.has_search&&"mood"!==Config.theme&&"footer"!==Config.theme||Magazine.editions||Magazine.isBranded?$(".nav-item-social",m).css("display","none"):$(".im-btn-more",m).css("display","none"),Config.is_screenshot||setTimeout(function(){Config.options.has_disabled_navigation||m.addClass("show"),m.scanDirectives()},500),Assets.navigationBar.hideable===!0&&(u.onCloseHandler=function(){l.setHideable(!0)},l.setHideable(!0)),Assets.navigationBar.hasPaginator===!0&&(k=new DotPaginator,k.init(Magazine.getNavigationController().pageTotal),k.set(Magazine.getNavigationController().current),k.appendTo($(".nav-bar-paginator",m)),
k.onclick=function(a){Magazine.getNavigationController().gotoPageNumber(a)}),h(Magazine.getNavigationController().getPageByIndex(Magazine.getNavigationController().current)),Config.options.favorite_options&&l.favoritePage.show()}function b(a){var b=[];for(var c in AvailableSocialPlatforms)SocialPlatforms[AvailableSocialPlatforms[c]]&&b.push({href:"#",label:SocialPlatforms[AvailableSocialPlatforms[c]].label,onclick:"Magazine.social.onClick(event,this)",type:SocialPlatforms[AvailableSocialPlatforms[c]].type,icon:SocialPlatforms[AvailableSocialPlatforms[c]].icon});return b}function c(){for(var a=[],b=0;b<Magazine.editions.length;b++){var c=Magazine.editions[b];a.push({href:c.url,image:Utils.viewHelper("getImageUrl",[c.thumb,157,109,null,null,1,1,1]),label:c.title,onclick:"Magazine.tracker.trackEvent('EditionIndex', 'Click', $(this).attr('title'));",target:"_blank"})}return a}function d(){var a=[],b=Magazine.getNavigationController().getPages();for(var c in b){var d=b[c];a.push({href:"#!/"+d.alias,image:Utils.viewHelper("getImageUrl",[d.thumb,Assets.screenshotThumb.width,Assets.screenshotThumb.height,null,null,1,1]),label:d.title,onclick:"Magazine.tracker.trackEvent('PageIndex', 'Click', $(this).attr('title'));"})}return a}function e(a){var b=jQuery(this).data("action");if(!s||(l.hidePrintOptions(),"print"!=b))switch("mobile-editions"===b&&Magazine.device.size>DeviceSize.PORTRAIT&&(b="editions"),b){case"pageindex":Magazine.device.size<DeviceSize.PORTRAIT&&(b="mobile-"+b),u.toggle(b,jQuery(this)),Magazine.tracker.trackEvent("Navigationbar","Click",b);break;case"more":u.toggle(b,jQuery(this)),Magazine.tracker.trackEvent("Navigationbar","Click",b);break;case"toggle-floating-menu":$(".floating-menu")[0].directive.toggle(),Magazine.tracker.trackEvent("Navigationbar","Click",b);break;case"next":Magazine.getNavigationController().next(),Magazine.tracker.trackEvent("Navigationbar","Click",b);break;case"prev":Magazine.getNavigationController().prev(),Magazine.tracker.trackEvent("Navigationbar","Click",b);break;case"editions":u.toggle(b,jQuery(this)),Magazine.tracker.trackEvent("Navigationbar","Click",b);break;case"search":Magazine.searchWindow.open(),Magazine.tracker.trackEvent("Navigationbar","Click",b);break;case"print":u.hide(),l.showPrintOptions($(this));break;case"print_all":if(Config.is_preview)Magazine.showPopupScreen("default",function(a,b){l.popupContainer.hide()},{title:Translate.getLabel("title_only_in_published"),description:Translate.getLabel("desc_only_in_published")});else{var c=window.location.href.split("#")[0],d=c.split("?");c=d[0],c.lastIndexOf("/")!==c.length-1&&(c+="/"),c+="im_print/true",d.length>1&&(c+="?"+d[1]),window.open(c,"_blank")}Magazine.tracker.trackEvent("Navigationbar","Click",b);break;case"print_page":if(Config.is_preview)Magazine.showPopupScreen("default",function(a,b){l.popupContainer.hide()},{title:Translate.getLabel("title_only_in_published"),description:Translate.getLabel("desc_only_in_published")});else{var c=window.location.href.split("#")[0];c=c.split("?")[0],c.lastIndexOf("/")!==c.length-1&&(c+="/"),c+="im_print/true/page_no/"+(parseInt(Magazine.getNavigationController().getCurrentPage().originalPageNumber)-1),window.open(c,"_blank")}Magazine.tracker.trackEvent("Navigationbar","Click",b);break;case"info":case"text":u.toggle("info",jQuery(this),$(this).data("index"));break;case"share":Magazine.device.size<=DeviceSize.PORTRAIT&&"floating"!==Config.theme&&(b="mobile-"+b),u.toggle(b,jQuery(this)),Magazine.tracker.trackEvent("Navigationbar","Click",b);break;case"share-btn":case"help":break;case"mute":case"unmute":break;case"href":window.location.hash=$(this).attr("href"),Magazine.tracker.trackEvent("Navigationbar","Click","Home");break;default:"undefined"!=typeof b&&""!=b&&(u.toggle(b,jQuery(this)),Magazine.tracker.trackEvent("Navigationbar","Click",b))}}function f(){jQuery("a, .nav-btn",m).click(e)}function g(){"mood"===Config.theme||"footer"===Config.theme?(r=new ListIndex2,r.init(null,e),r.template=Assets.navigationBar.navigationButtonMobile,r.setClass("im-icon-list"),r.setView($(".print-bar",m)),r.addModel({label:Translate.getLabel("print_current_page"),href:"javascript:void(0);",action:"print_page"}),r.addModel({label:Translate.getLabel("print_all_pages"),href:"javascript:void(0);",action:"print_all"})):(r=$(".print-bar",m),r.css("display","block"),r.append(Assets.navigationBar.getPrintOptions()))}function h(a){0==a.number?($(m).find(".nav-item-help").show(),jQuery(m).find(".im-btn-prev").addClass("disabled")):($(m).find(".nav-item-help").hide(),jQuery(m).find(".im-btn-prev").removeClass("disabled")),n&&n.children("span.current").html(a.number+1),jQuery(".list.nav-page").children("a").each(function(){jQuery(this).removeClass("active")}),jQuery(".list.nav-page").find("a:nth-child("+(a.number+1)+")").addClass("active"),a.number<Magazine.pages.count-1?jQuery(m).find(".im-btn-next").removeClass("disabled"):jQuery(m).find(".im-btn-next").addClass("disabled"),a.hasVerticalNavigation?(jQuery(m).find(".im-btn-up").show(),jQuery(m).find(".im-btn-down").show()):(jQuery(m).find(".im-btn-up").hide(),jQuery(m).find(".im-btn-down").hide())}var i,j,k,l=this,m=jQuery("#NavigationBar"),n=null,o=null,p=null,q=null,r=null,s=!1,t=null,u=null,v=null,w=null,x=!1,y=!0,z=10,A=Assets.maxNavButtons||2;this.htmltemplate=null,this.init=function(f){q=f.category.info,u=new NavigationItemsController,j=new NavigationBarCustomPages,j.init(f.category.info);var g=Utils.newInstance(Assets.navigationBar.listClass);g.template=Assets.navigationBar.listItem;var h=d();g.init(h);var k=new ListIndexMobile;k.init("mobile-pageindex",h),u.pushItem("mobile-pageindex",k);var m=Utils.newInstance(Assets.navigationBar.iconListClassMobile);if(m.init(null,e),m.template=Assets.navigationBar.navigationButtonMobile,m.setClass("im-icon-list"),Magazine.isBranded===!0){m.addModel({sprite:"branding",label:"Powered by<br>Instant Magazine",target:"_blank",class:" only-tablet-mobile",href:"https://www.instantmagazine.com/?utm_source=im&utm_medium=magazine&utm_campaign=im-branding&utm_content="+Magazine.id});var n=Utils.newInstance(Assets.navigationBar.iconListClassMobile);n.init([{href:"http://www.instantmagazine.com/?utm_source=im&utm_medium=magazine&utm_campaign=im-branding&utm_content="+Magazine.id}]),n.template=Hogan.compile('<div class="im-branding-poweredby" style="background-color:#000;"><a href="{{href}}" target="_blank"><img src="/images/branding/powered-by-im-07.png" width="128" /></a></div>'),"function"==typeof n.setClass&&n.setClass("im-icon-list"),u.pushItem("branding",n)}if(Magazine.editions){var r=c(),s=Utils.newInstance(Assets.navigationBar.listClass);s.init(r),s.template=Assets.navigationBar.listItem,u.pushItem("editions",s);var t=new ListIndexMobile;t.init("mobile-editions",r),u.pushItem("mobile-editions",t),m.addModel({sprite:"editions",label:Translate.getLabel("btn_editions"),href:"javascript:void(0);",action:"mobile-editions",class:"mood"===Config.theme?" only-mobile":"",onlyMobile:"mood"===Config.theme||"footer"===Config.theme})}if(f.socialize.length>0){Magazine.social=new Social(f.socialize),Magazine.social.init();var v=Utils.newInstance(Assets.navigationBar.socialIconListClass),w=b(Magazine.social.onClick);v.init(w),v.template=Assets.navigationBar.navigationButtonSocial,u.pushItem("share",v),"function"==typeof v.setClass&&v.setClass("im-icon-list");var x=Utils.newInstance(Assets.navigationBar.iconListClassMobile);x.init(w),x.template=Assets.navigationBar.navigationButtonSocialMobile||Assets.navigationBar.navigationButtonSocial,"function"==typeof x.setClass&&x.setClass("im-icon-list"),u.pushItem("mobile-share",x),"mood"!==Config.theme&&"footer"!==Config.theme&&m.addModel({icon:{reference:"&#59196;"},label:Translate.getLabel("btn_share"),action:"mobile-share",href:"javascript:void(0);",class:"mood"===Config.theme||"footer"===Config.theme?" only-mobile":"",onlyMobile:"mood"===Config.theme||"footer"===Config.theme})}if(m.addModels(j.getButtons()),u.pushItem("pageindex",g),u.pushItem("info",j),m.getCount()>0&&u.pushItem("more",m),1==Config.options.has_search&&("mood"!==Config.theme&&"footer"!==Config.theme||u.get("info").getDesktopCount()>A)&&m.addModel({sprite:"search",label:Translate.getLabel("search"),href:"javascript:void(0);",action:"search"}),o=f.category.logo,"undefined"!=typeof o&&null!==o){if(o.width>o.height){var y=Assets.navigationBar.size[3][0]/o.width;y*o.height<40&&(o.className="low")}"mood"!==Config.theme&&"footer"!==Config.theme||(o.real_width=Math.ceil(Assets.navigationBar.size[3][1]/o.height*o.width))}p=f.category.icon,i=f.category.website,Loader.load({files:[{page:l,file:Config.themePathView+Config.theme+"/NavigationBar.html",name:"View"}],callback:a})},this.getInfo=function(){return q},this.getLogo=function(){return o?o:null},this.getNavigationItem=function(a){return u.get(a)},this.addBranding=function(){$(Assets.branding.navigationBarPosition,m)[Assets.branding.appendOption](Assets.navigationBar.navigationButtonIcon.render({label:"Branding",href:"https://www.instantmagazine.com/?utm_source=im&utm_medium=magazine&utm_campaign=im-branding&utm_content="+Magazine.id,onclick:"Magazine.tracker.trackEvent('branding', "+Magazine.id+", '"+window.location.href+"')",classname:"im-branding only-desktop-tablet",target:"_blank",sprite:"branding",rollover:"<img src='/images/branding/powered-by-im-07.png' style='width:132px;' alt='Powered by Instant Magazine' />"}))},this.hide=function(){if("mp"===Config.theme){if(null!==v&&clearTimeout(v),u.hasOpenItem())return;var a=m.find(".nav-handle");a.length>0&&TweenLite.to(a[0],.3,{y:0}),m.children(".nav-bar").each(function(){$(this).hasClass("bar-bottom")?TweenLite.to($(this).children(".nav-buttons-bar"),.3,{y:Assets.navigationBar.size[Magazine.device.size][1]}):$(this).hasClass("bar-right")&&TweenLite.to($(this).children(".nav-buttons-bar"),.3,{x:Assets.navigationBar.size[Magazine.device.size][0]})}),y=!1}else"floating"===Config.theme&&$(".floating-menu")[0].directive.hide()},this.show=function(){if("mp"===Config.theme){var a=m.find(".nav-handle");a.length>0&&TweenLite.to(a[0],.3,{y:Assets.navigationBar.size[Magazine.device.size][1]}),m.children(".nav-bar").each(function(){TweenLite.to($(this).children(".nav-buttons-bar"),.3,{y:0,x:0})}),y=!0,x&&!Magazine.isFramed&&(v=setTimeout(function(){l.hide()},1e3*z))}else"floating"===Config.theme&&$(".floating-menu")[0]&&$(".floating-menu")[0].directive&&$(".floating-menu")[0].directive.show()},this.toggle=function(){y?l.hide():l.show()},this.setHideable=function(a){if(x==!!a)return void(a===!0&&null==v&&(v=setTimeout(function(){l.hide()},1e3*z)));if(a===!0){x=!0;var b=m.find(".nav-handle");b.length>0&&(b.off("click"),b.on("click",function(){l.toggle()})),Magazine.isFramed||(w=new Touch,w.animateOut(!1),w.init(Magazine.pageContainer,TouchOrientation.NONE),w.onTap=function(a,b){$(a.target).closest("a").length>0||$(a.target).closest(".clickable").length>0||l.toggle()}),l.show()}else x=!1,null!=v&&(clearTimout(v),v=null),null!=w&&(w.release(),w=null),l.show()},this.showVolumeOptions=function(){null===this.volumeOptions.$view&&this.volumeOptions.init(),this.volumeOptions.show()},this.hideVolumeOptions=function(){this.volumeOptions.hide()},this.favoritePage={$view:null,$buttons:null,$badge:null,onStage:!1,navigationBarPage:null,init:function(){this.$view=$(Assets.navigationBar.navigationButtonIcon.render({action:"favorite",label:"Uw selectie",href:"javascript:void(0)",classname:"nav-favorite-button",sprite:"star"})),this.$badge=$("<span class='im-icon-badge-number'></span>"),this.$view.append(this.$badge),this.update()},show:function(){if(this.onStage!==!0){null===this.$view&&this.init();var a=this;this.onStage=!0,this.$buttons=this.$view.insertAfter(m.find(Assets.navigationBar.soundButtonAfter)),this.$badge=this.$buttons.find(".im-icon-badge-number"),this.$buttons.off("click").on("click",function(){null===a.navigationBarPage&&(a.navigationBarPage=new ImFavoritePage,a.navigationBarPage.init($(".favorites",m)),u.pushItem("favorites",a.navigationBarPage)),u.toggle("favorites",jQuery(this))})}},hide:function(){this.$buttons&&(this.$buttons.remove(),this.onStage=!1)},update:function(){this.$badge.startAnimation(Animation.flash,1),0===Magazine.favorites.list.length?this.$badge.hide():this.$badge.show().text(Magazine.favorites.list.length)}},this.volumeOptions={$view:null,$buttons:null,init:function(){this.$view=$(Assets.navigationBar.navigationButtonIcon.render({action:"volume",label:"Edities",href:"javascript:void(0)",classname:"nav-volume-button",sprite:"sound "+(Magazine.soundControl.isMuted()?" muted":"")}))},show:function(){if(!Assets.navigationBar.soundButtonAfter)return void Magazine.trigger("showSoundControls");var a=m.find(Assets.navigationBar.soundButtonAfter);if(a.next().hasClass("nav-volume-button")?this.$buttons=a.next():this.$buttons=this.$view.insertAfter(m.find(Assets.navigationBar.soundButtonAfter)),this.$buttons[0].mute=function(){$(this).children(".im-sp-sound").addClass("muted")},this.$buttons[0].unmute=function(){$(this).children(".im-sp-sound").removeClass("muted")},this.$buttons.off("click").on("click",function(){Magazine.soundControl.isMuted()?Magazine.soundControl.unmute():Magazine.soundControl.mute()}),"mood"===Config.theme)try{$(".mood-page-list",m)[0].MoodPageList.onResizeHandler(Magazine.device)}catch(a){}},hide:function(){if(!Assets.navigationBar.soundButtonAfter)return void Magazine.trigger("hideSoundControls");if(this.$buttons&&(this.$buttons.remove(),"mood"===Config.theme))try{$(".mood-page-list",m)[0].MoodPageList.onResizeHandler(Magazine.device)}catch(a){}},mute:function(){this.$buttons&&this.$buttons[0].mute()},unmute:function(){this.$buttons&&this.$buttons[0].unmute()}},this.getNavigationItemsController=function(){return u},this.hidePrintOptions=function(){s&&(Magazine.device.size>DeviceSize.PORTRAIT?"mood"===Config.theme||"footer"===Config.theme?r.hide():"floating"===Config.theme?r.removeClass("show"):r.removeClass("show").css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,0)):t&&(t.hide(),t=null),s=!1)},this.showPrintOptions=function(a){if(null!=r){if(s)return void l.hidePrintOptions();if(s=!0,Magazine.device.size>DeviceSize.PORTRAIT)if("mood"===Config.theme||"footer"===Config.theme)r.willShow(),r.show(a);else if("floating"===Config.theme)r.addClass("show");else{var b=Assets.navigationBar.size[Magazine.device.size][0],c=Assets.navigationBar.size[Magazine.device.size][0]+r.width();Magazine.device.supportsTransform()&&(b=-r.width()),r.addClass("show").css("right",b+"px").css(Magazine.device.getCssProperty("transform"),"translate(-"+c+"px,0px)")}else{t=new Popup(DeviceType.MOBILE);var d=function(a,b,c){e.call(c)},f=function(a){Magazine.popupContainer.show(t)};t.setTitle(Translate.getLabel("print_popup_title")),t.setDescription(Assets.navigationBar.printPopup),t.setScreen("default",f,d),t.onCloseHandler=function(){Magazine.tracker.trackEvent("Navigationbar","PrintPopup","Hide"),t=null}}}},this.onPageChangeHandler=function(a,b){try{"undefined"!=typeof k&&k.set(b.number),h(b),u.hide()}catch(a){}},this.onOpenOverlay=function(){u.hide()},this.onSwitchSize=function(){u.hide()},this.onResizeHandler=function(a){}}function NavigationItemEvents(){var a=this,b={};this.trigger=function(c){"function"==typeof b[c]&&b[c].call(a)},this.on=function(a,c){b["on"+a]=c},this.off=function(a){delete b["on"+a]}}function NavigationBarPage(){return this.popup=!1,this.isReady=!0,this.onReadyHandler,this.$view=null,this.button=null,this.events=new NavigationItemEvents,this.title="",this.description="",this.init=function(a){this.$view=a},this.show=function(a){if("undefined"!=typeof a&&(this.button=a,this.button.addClass("im-ts-nav-active-color")),Magazine.tracker.trackEvent("NavigationBarPage","Open",this.title),Magazine.device.size>DeviceSize.PORTRAIT){if(this.setView(),null!==this.$view)if(this.$view.hasClass("horizontal")){var b=Assets.navigationBar.size[Magazine.device.size][1],c=Assets.navigationBar.size[Magazine.device.size][1]+this.$view.height();Magazine.device.supportsTransform()&&(b=-this.$view.height()),this.$view.addClass("show").css("bottom",b+"px").css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,-c))}else{this.$view.addClass("show");var d=this.$view.width(),e=15;this.$view.children()[0].scrollWidth>d&&(d=this.$view.children()[0].scrollWidth+e,this.$view.width(d));var f=Assets.navigationBar.size[Magazine.device.size][0],c=Assets.navigationBar.size[Magazine.device.size][0]+d;Magazine.device.supportsTransform()&&(f=-d),this.$view.css("right",f+"px").css(Magazine.device.getCssProperty("transform"),"translate(-"+c+"px,0px)")}}else{this.popup=new Popup(DeviceType.MOBILE),this.popup.setTitle(this.title),this.popup.setDescription(this.getScreen(!1));var g=this,h=function(a){Magazine.popupContainer.show(g.popup)};this.popup.onCloseHandler=function(){Magazine.tracker.trackEvent("NavigationBarPage","Close",g.title),g.events.trigger("onclose"),g.popup=!1,g.isReady=!0,null!==g.button&&g.button.removeClass("im-ts-nav-active-color")},this.popup.setScreen("overlay",h)}},this.hide=function(){if(null!==this.button&&this.button.removeClass("im-ts-nav-active-color"),this.popup===!1){var a=this;Magazine.tracker.trackEvent("NavigationBarPage","Close",this.title),this.$view.on(Magazine.device.getCssProperty("transitionend"),function(){a.$view.off(Magazine.device.getCssProperty("transitionend")),"function"==typeof a.onReadyHandler&&(a.isReady=!0,a.onReadyHandler())}).removeClass("show").css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,0))}else this.popup.cancelConnection(),this.popup.hide(this.didHide),this.popup=!1,this.isReady=!0},this.willShow=function(a,b){},this.onReady=function(a){this.isReady?a():this.onReadyHandler=a},this.didHide=function(){this.isReady=!0,"function"==typeof this.onReadyHandler&&(this.onReadyHandler(),this.onReadyHandler=null)},this.setView=function(){if(this.$view.hasClass("horizontal")){this.$view.html("<div class='scrolllist text-columns' style='overflow-y: auto; overflow-x: hidden; top: 0px; width: inherit; height: inherit; position: relative;'>"+this.getScreen()+"</div>");var a=this.$view.find(".paragraph");a.height()<this.$view.height()&&a.css("height",this.$view.height()-(a.outerHeight()-a.height()))}else this.$view.html("<div class='scrolllist' style='overflow-y: auto; overflow-x: hidden; top: 0px; width: inherit; height: inherit; position: relative;'>"+this.getScreen()+"</div>");this.$view.find(".dynamicForm").each(function(){new DynamicForm(null,$(this))}),this.$view.scanDirectives()},this.getScreen=function(a){return"undefined"==typeof a&&(a=!0),this.$view.hasClass("horizontal")?"<div class='paragraph'>"+(a?"<h2>"+this.title+"</h2>":"")+this.description+"</div>":(a?"<h2>"+this.title+"</h2>":"")+"<div class='paragraph'>"+this.description+"</div>"},this}function ImFavoritePage(){return $.extend(new NavigationBarPage,{title:"Uw selectie",getScreen:function(a){return"undefined"==typeof a&&(a=!0),this.$view.hasClass("horizontal")?"<div class='paragraph'>"+(a?"<h2>"+this.title+"</h2>":"")+this.description+"<div im-object='im-favorite-view-directive' class='im-favorite-view-directive'></div><div im-object='im-share-directive' data-generate-url='1'></div></div>":(a?"<h2>"+this.title+"</h2>":"")+"<div class='paragraph'>"+this.description+"<div im-object='im-favorite-view-directive' class='im-favorite-view-directive'></div><div im-object='im-share-directive' data-generate-url='1'></div></div>"}})}function NavigationItemsController(){"use strict";var a=this,b={},c=!1,d=!1;this.pushItem=function(a,e){e.events.on("close",function(){c=!1,d=!1}),b[a]=e},this.get=function(a){return b[a]},this.hasOpenItem=function(){return c!==!1},this.has=function(a){return"undefined"!=typeof b[a]},this.show=function(a,e,f){function g(){"function"==typeof b[a].show&&b[a].show(e,f),c=a,d=a+f}"undefined"==typeof f&&(f=0),c!==!1&&b[c].hide(),"undefined"!=typeof b[a]&&"function"==typeof b[a].willShow?b[a].willShow(e,f,g)||g():g()},this.toggle=function(e,f,g){var h=d,i=c;"undefined"==typeof g&&(g=0),c!==!1?(a.hide(c,null,e),h!==e+g&&("function"==typeof b[i].onReady?b[i].onReady(function(){a.show(e,f,g)},h):a.show(e,f,g))):a.show(e,f,g)},this.hide=function(e,f,g){"undefined"==typeof e&&(e=c),e!==!1&&(b[e].hide(f),c=!1,d=!1,"undefined"==typeof g&&null!==a.onCloseHandler&&a.onCloseHandler())},this.onCloseHandler=null}function NavigationBarCustomPages(){function a(a){if(c.view.hasClass("horizontal")){c.view.html("<div class='scrolllist text-columns' style='overflow-y: auto; overflow-x: hidden; top: 0px; width: inherit; height: inherit; position: relative;'><div class='paragraph'><h2>"+e[a].nav_title+"</h2>"+e[a].nav_description+"</div></div>");var b=c.view.find(".paragraph");b.height()<c.view.height()&&b.css("height",c.view.height()-(b.outerHeight()-b.height()))}else c.view.html("<div class='scrolllist' style='overflow-y: auto; overflow-x: hidden; top: 0px; width: inherit; height: inherit; position: relative;'><h2>"+e[a].nav_title+"</h2><div class='paragraph'>"+e[a].nav_description+"</div></div>");c.view.find(".dynamicForm").each(function(){new DynamicForm(null,$(this))}),c.view.scanDirectives()}var b,c=this,d=null,e=null,f=!0,g=!1,h=null;this.events=new NavigationItemEvents,this.hasPrintOption=!1,this.init=function(a){e=a;for(var b=0;b<e.length;b++)"print"===e[b].nav_action&&(this.hasPrintOption=!0)},this.view=null,this.getCount=function(){return e.length},this.getDesktopCount=function(){for(var a=0,b=0;b<e.length;b++)e[b].onlyMobile||a++;return a},this.setView=function(a){c.view=a},this.onReady=function(a){f?a():b=a},this.hide=function(){h.removeClass("im-ts-nav-active-color"),g===!1?(Magazine.tracker.trackEvent("NavigationBarPage","Close",e[d].nav_title),c.view.on(Magazine.device.getCssProperty("transitionend"),function(){c.view.off(Magazine.device.getCssProperty("transitionend")),"function"==typeof b&&(f=!0,b(),b=null)}).removeClass("show").css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,0))):(g.cancelConnection(),g.hide(c.didHide),g=!1,f=!0),d=null},this.show=function(b){if(h=b,h.addClass("im-ts-nav-active-color"),f=!1,Magazine.tracker.trackEvent("NavigationBarPage","Open",e[d].nav_title),Magazine.device.size>DeviceSize.PORTRAIT){if(a(d),null!==c.view)if(c.view.hasClass("horizontal")){var i=Assets.navigationBar.size[Magazine.device.size][1],j=Assets.navigationBar.size[Magazine.device.size][1]+c.view.height();Magazine.device.supportsTransform()&&(i=-c.view.height()),c.view.addClass("show").css("bottom",i+"px").css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,-j))}else{c.view.addClass("show");var k=c.view.width(),l=15;c.view.children()[0].scrollWidth>k&&(k=c.view.children()[0].scrollWidth+l,c.view.width(k));var m=Assets.navigationBar.size[Magazine.device.size][0],j=Assets.navigationBar.size[Magazine.device.size][0]+k;Magazine.device.supportsTransform()&&(m=-k),c.view.css("right",m+"px").css(Magazine.device.getCssProperty("transform"),"translate(-"+j+"px,0px)")}}else{g=new Popup(DeviceType.MOBILE),g.setTitle(e[d].nav_title),g.setDescription(e[d].nav_description);var n=function(a){Magazine.popupContainer.show(g)};g.onCloseHandler=function(){Magazine.tracker.trackEvent("NavigationBarPage","Close",e[d].nav_title),c.events.trigger("onclose"),g=!1,f=!0,h.removeClass("im-ts-nav-active-color")},g.setScreen("overlay",n)}},this.willShow=function(a,b){d=b},this.didHide=function(){f=!0,"function"==typeof b&&(b(),b=null)},this.getButtons=function(){var a=[];for(var b in e){if(e[b].index=b,e[b].label=e[b].nav_label,"undefined"==typeof e[b].action)switch(e[b].href="javascript:void(0)",e[b].target="_self",e[b].onclick="",e[b].nav_action){case"text":case"":case null:e[b].action="info";break;case"page":if(isNaN(e[b].nav_description))"string"==typeof e[b].nav_description&&0===e[b].nav_description.indexOf("overlay:")?(e[b].onclick="Magazine.overlay.show('"+parseInt(e[b].nav_description.substr(8))+"'); return false;",e[b].target=""):(e[b].href=e[b].nav_description,e[b].target="_blank",e[b].action=e[b].nav_action);else{var c=Magazine.getNavigationController().getPageById(e[b].nav_description);e[b].href="#!/"+c.alias,e[b].action=e[b].nav_action}break;case"url":e[b].href=e[b].nav_description,e[b].target="_blank",e[b].action=e[b].nav_action;break;default:e[b].action=e[b].nav_action}e[b].index=b,a.push(e[b])}return a},this.getButtonsDesktop=function(){var a=[],b=c.getButtons();for(var d in b)"print"==b[d].action?(c.hasPrintOption=!0,a.push(Assets.navigationBar.navigationButtonIcon.render(e[d]))):a.push(Assets.navigationBar.navigationButton.render(e[d]));return a.join("")}}function ListIndex(){var a,b,c=this,d=!1;this.data=null,this.events=new NavigationItemEvents,this.view=null,this.template,this.setView=function(a){a.hasClass("horizontal")&&(d=!0),this.view=a},this.setClass=function(){},this.getCount=function(){return a.length},this.setModels=function(b){a=b},this.init=function(b){"undefined"!=typeof b&&(a=b)},this.willShow=function(a){0==c.view.children().length&&c.build()},this.hide=function(){b.removeClass("im-ts-nav-active-color"),c.view.removeClass("show").css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,0))},this.show=function(a){if(b=a,b.addClass("im-ts-nav-active-color"),null!==c.view)if(c.view.hasClass("horizontal")){var d=Assets.navigationBar.size[Magazine.device.size][1],e=Assets.navigationBar.size[Magazine.device.size][1]+c.view.height();Magazine.device.supportsTransform()&&(d=-c.view.height()),c.view.addClass("show").css("bottom",d+"px").css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,-e))}else{var f=Assets.navigationBar.size[Magazine.device.size][0],e=Assets.navigationBar.size[Magazine.device.size][0]+c.view.width();Magazine.device.supportsTransform()&&(f=-c.view.width()),c.view.addClass("show").css("right",f+"px").css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(-e,0))}},this.build=function(){var b=new ScrollListDelegate;d?b.getHeight=function(){return Magazine.pages.width}:b.getHeight=function(){return Magazine.pages.height},b.getRowHeightForRow=function(a){return Assets.navigationBar.pageIndexRowHeight},b.getNumberRows=function(){return a.length},b.useIteration=!1,b.getViewForRow=function(b,d){var e=a[d];return b?(b.children().attr("href",e.href),b.children().children("span").html(e.label),b.children().children("img").attr("src","").attr("src",e.image).attr("title",e.label)):(e.label=e.label.maxLength(25),b=jQuery(c.template.render(e))),b};var e=new ScrollList;d&&e.setOrientation("horizontal"),e.init(b),e.useMouseScroll(!0),e.supportTouch(!0),e.useScroll(!1),e.load(),e.position(),c.view.html(e.toString()),"function"==typeof this.didBuild&&this.didBuild.apply(this)}}function ListIndex2(){var a=this;this.firstView=!0,this.models,this.button,this.align="left",this.events=new NavigationItemEvents,this.clickHandlers=!1,this.template,this.init=function(a,b){"undefined"!=typeof a&&null!==a?this.models=a:this.models=[],"undefined"!=typeof b&&(this.clickHandlers=b)},this.setClass=function(a){this.viewClass=a,"undefined"!=typeof this.view&&this.view.addClass(this.viewClass)},this.setView=function(a){this.view=a},this.setModels=function(a){this.models=a},this.addModel=function(a){this.models.push(a)},this.addModels=function(a){for(var b in a)this.models.push(a[b])},this.getCount=function(){return this.models.length},this.willShow=function(b,c,d){0==a.view.children().length&&a.build()},this.hide=function(){this.button.removeClass("im-ts-nav-active-color"),a.view.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,0)),Magazine.device.supports("transition")?(a.view.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,200)),a.view.children(".im-listindex2-container").children().each(function(a){$(this).css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,-30*a)).css("opacity",0)}),setTimeout(function(){a.view.removeClass("show")},510)):a.view.removeClass("show")},this.show=function(b){function c(){if(null!==a.view){if("left"===a.align){var b=a.button.offset().left-Magazine.container.offset().left,c=Math.round(Math.max(20,Math.min(b-(.5*d-.5*e),Magazine.pages.width-d+20)));a.view.css("left",c),a.view.find(".im-border-arrow-down").css("left",Math.round(b+15-c))}else{var c=Math.round(Math.max(20,Math.min(Magazine.pages.width-a.button.offset().left-(.5*d+.5*e),Magazine.pages.width-20)));a.view.css("right",c),a.view.find(".im-border-arrow-down").css("right",Math.round(Magazine.pages.width-a.button.offset().left-35-c))}a.view.addClass("show")}var f=a.view.children(".im-listindex2-container");a.view.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,200)).css(Magazine.device.getCssProperty("transition-duration"),"0"),f.children().css(Magazine.device.getCssProperty("transition-duration"),"0").css(Magazine.device.getCssProperty("transition-duration"),"0").css("opacity",0).each(function(a){$(this).css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,-30*a))}),Magazine.device.requestAnimationFrame(function(){a.view.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,0)),a.view.css(Magazine.device.getCssProperty("transition-duration"),""),f.children().css(Magazine.device.getCssProperty("transition-duration"),"").css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,0)).css("opacity",1)}),a.onResizeHandler(Magazine.device)}this.button=b,this.button.addClass("im-ts-nav-active-color");var d=a.view.outerWidth(),e=this.button.outerWidth();1==a.firstView?(setTimeout(function(){a.onResizeHandler(Magazine.device),c()},50),a.firstView=!1):c()},this.build=function(){var b=$("<div class='im-listindex2-container'></div>");a.view.append(b),a.view.addClass("im-list-index-2"),"undefined"!=typeof this.viewClass&&a.view.addClass(this.viewClass);for(var c in this.models){var d=this.models[c],e=$(this.template.render(d)).addClass("li2");b.append(e)}this.clickHandlers!==!1&&a.view.find("a").on("click",this.clickHandlers),a.view.append("<div class='im-border-arrow-down' style='border-top-color: "+a.view.find(".arrow-color").css("background-color")+";'></div>"),Magazine.registClass(this)},this.onResizeHandler=function(b){var c=a.view.children(".im-listindex2-container"),d=c.height();c.length>0&&c[0].scrollHeight>d||c[0].scrollHeight>.8*Magazine.pages.height?a.view.css("height","80%"):a.view.css("height","auto")}}function ListIndexMobile(){var a,b,c,d,e,f=this,g=!0,h=null;this.events=new NavigationItemEvents,this.init=function(c,d){a=c,b=d},this.willShow=function(){null==h&&f.build()},this.setClass=function(){},this.addModel=function(){},this.build=function(){h=[];for(var c in b)h.push(new PopupListItem({url:b[c].href,image:b[c].image,title:b[c].label,action:a}));f.data={pageindex:{title:"mobile-editions"==a?Translate.getLabel("btn_editions"):Translate.getLabel("header_index"),items:h}}},this.show=function(b){c=new Popup(DeviceType.MOBILE),d=b,d.addClass("im-ts-nav-active-color");var e=function(a,b,c){Magazine.tracker.trackEvent(b,"Click",$(c).data("title"))},g=function(a){Magazine.popupContainer.show(c)};c.setData(f.data.pageindex),c.setScreen("popup-list",g,e),c.onCloseHandler=function(){Magazine.tracker.trackEvent("Navigationbar","Close",a),f.events.trigger("onclose"),d.removeClass("im-ts-nav-active-color")}},this.hide=function(){g=!1,d.removeClass("im-ts-nav-active-color"),null!=c&&(c.cancelConnection(),c.hide(f.didHide))},this.onReady=function(a){g?a():e=a},this.didHide=function(){g=!0,"function"==typeof e&&(e(),e=null)}}function IconsIndex(){var a,b,c=this;this.view=null,this.events=new NavigationItemEvents,this.template=null,this.init=function(b){"undefined"!=typeof b&&(a=b)},this.setView=function(a){c.view=a;
},this.setModels=function(b){a=b},this.getModels=function(){return a},this.willShow=function(a){0==c.view.children().length&&c.build(a)},this.hide=function(){b.removeClass("im-ts-nav-active-color"),c.view.removeClass("show").css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,0))},this.show=function(a){if(b=a,b.addClass("im-ts-nav-active-color"),null!==c.view)switch(a.data("alignment")){case"right":case"left":var d=Assets.navigationBar.size[Magazine.device.size][1],e=Assets.navigationBar.size[Magazine.device.size][1]+c.view.outerHeight();Magazine.device.supportsTransform()&&(d=-c.view.outerWidth()),c.view.addClass("show").css("bottom",d+"px").css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,-e));break;default:var f=Assets.navigationBar.size[Magazine.device.size][0],e=Assets.navigationBar.size[Magazine.device.size][0]+c.view.outerWidth();Magazine.device.supportsTransform()&&(f=-c.view.outerWidth()),c.view.addClass("show").css("right",f+"px").css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(-e,0))}},this.build=function(b){for(var d=0;d<a.length;d++){var e;e="undefined"==typeof a[d].view?this.template.render(a[d]):a[d].view,a[d].button=$(e),c.view.append(a[d].button),"undefined"!=typeof a[d]._onclick&&a[d].button.on("click",a[d]._onclick)}if(b.data("alignment"))switch(b.data("alignment")){case"top":var f=b.offset().top-.5*b.outerHeight();c.view.css("top",Math.max(0,f-.5*c.view.outerHeight()));break;case"bottom":var f=Magazine.device.screen.height-b.offset().top-.5*b.outerHeight();c.view.css("bottom",Math.max(0,f-.5*c.view.outerHeight()));break;case"right":var f=Magazine.device.screen.outerWidth-b.offset().left-.5*b.outerWidth();c.view.css("right",Math.max(0,f-.5*c.view.outerWidth()));break;case"left":var f=b.offset().left-.5*b.outerWidth();c.view.css("right",Math.max(0,f-.5*c.view.outerWidth()))}}}function IconsIndexMobile(){var a=this,b=null,c=[],d=null;this.view=null,this.events=new NavigationItemEvents,this.template=null,this.init=function(a,b){"undefined"!=typeof a&&null!==a&&this.setModels(a),"undefined"!=typeof b&&(d=b)},this.setClass=function(){},this.getCount=function(){return c.length},this.setView=function(b){a.view=b},this.willShow=function(b){0===a.view.children().length&&a.build(b)},this.addModel=function(a){c.push(a)},this.addModels=function(a){for(var b in a)c.push(a[b])},this.setModels=function(a){c=a},this.build=function(b){for(var e=0;e<c.length;e++)"undefined"==typeof c[e].view&&(c[e].view=this.template.render(c[e])),c[e].button=$(c[e].view),a.view.append(c[e].button),"undefined"!=typeof c[e]._onclick?c[e].button.find("a").length>0?c[e].button.find("a").on("click",c[e]._onclick):c[e].button.on("click",c[e]._onclick):c[e].button.find("a").length>0?c[e].button.find("a").on("click",d):c[e].button.on("click",d);if(b.data("alignment"))switch(b.data("alignment")){case"top":var f=b.offset().top-.5*b.outerHeight();a.view.css("top",Math.max(0,f-.5*a.view.outerHeight()));break;case"bottom":var f=Magazine.device.screen.height-b.offset().top-.5*b.outerHeight();a.view.css("bottom",Math.max(0,f-.5*a.view.height()));break;case"right":var f=Magazine.device.screen.width-b.offset().left-.5*b.outerWidth();a.view.css("right",Math.max(0,f-.5*a.view.outerWidth()));break;case"left":var f=b.offset().left-.5*b.width();a.view.css("right",Math.max(0,f-.5*a.view.outerWidth()))}},this.hide=function(){b.removeClass("im-ts-nav-active-color"),a.view.removeClass("show").css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,0))},this.show=function(c){if(b=c,b.addClass("im-ts-nav-active-color"),null!==a.view){var d=Assets.navigationBar.size[Magazine.device.size][1],e=Assets.navigationBar.size[Magazine.device.size][1]+a.view.outerHeight();Magazine.device.supportsTransform()&&(d=-a.view.outerHeight()),a.view.addClass("show").css("bottom",d+"px").css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,-e))}}}function NavigationController(a){function b(a,b,c){var d,e,f;s=null,TouchSettings.DISABLED=!0,b>0?d=n.getPageByIndex(m.number-1):b<=0&&(d=n.getPageByIndex(m.number+1)),Math.abs(b)>75?d?(p=!0,e={display:"block",visibility:"visible"},f=function(a){clearTimeout(y),n.onTransitionEnd(a),TouchSettings.DISABLED=!1,Magazine.tracker.trackEvent("Gesture","SwipeToPage",d.alias),window.location.href="#!/"+d.alias},e[Magazine.device.getCssProperty("transform")]="",e[Magazine.device.getCssProperty("transition-property")]="all",e[Magazine.device.getCssProperty("transition-duration")]=z+"ms",d.container.css(e).bind(Magazine.device.getCssProperty("transitionend"),n.onTransitionEnd),e[Magazine.device.getCssProperty("transform")]=Magazine.device.getCssTranslate(d.number<m.number?Magazine.pages.width:-Magazine.pages.width,0,0),m.container.css(e).bind(Magazine.device.getCssProperty("transitionend"),f),clearTimeout(y),y=setTimeout(function(){f({target:m.container,type:Magazine.device.getCssProperty("transitionend")})},z+40)):(f=function(a){clearTimeout(y),n.onTransitionEnd(a),TouchSettings.DISABLED=!1},e={display:"block",visibility:"visible"},e[Magazine.device.getCssProperty("transition-property")]="all",e[Magazine.device.getCssProperty("transition-duration")]=z+"ms",e[Magazine.device.getCssProperty("transform")]="",m.container.css(e).bind(Magazine.device.getCssProperty("transitionend"),f),clearTimeout(y),y=setTimeout(function(){f({target:m.container,type:Magazine.device.getCssProperty("transitionend")})},z+40)):(f=function(a){clearTimeout(y),TouchSettings.DISABLED=!1,n.onTransitionEnd(a)},e={display:"block",visibility:"visible"},e[Magazine.device.getCssProperty("transform")]="",e[Magazine.device.getCssProperty("transition-property")]="all",e[Magazine.device.getCssProperty("transition-duration")]=z+"ms",m.container.css(e).bind(Magazine.device.getCssProperty("transitionend"),f),clearTimeout(y),y=setTimeout(function(){f({target:m.container,type:Magazine.device.getCssProperty("transitionend")})},z+40),d&&(e[Magazine.device.getCssProperty("transform")]=Magazine.device.getCssTranslate("left"==q?Magazine.pages.width:-Magazine.pages.width,0,0),d.container.css(e).bind(Magazine.device.getCssProperty("transitionend"),n.onTransitionEnd)))}function c(a,b,c){var d,e,f;if(q=c,b>0?e=n.getPageByIndex(m.number-1):b<0&&(e=n.getPageByIndex(m.number+1)),f=b>0?-Magazine.pages.width+b:Magazine.pages.width+b,d={display:"block",visibility:"visible"},e?(d[Magazine.device.getCssProperty("transform")]=Magazine.device.getCssTranslate(f,0,0),e.container.css(d),d[Magazine.device.getCssProperty("transform")]=Magazine.device.getCssTranslate(b,0,0)):d[Magazine.device.getCssProperty("transform")]=Magazine.device.getCssTranslate(.3*b,0,0),null!==s&&e&&s.number!=e.number)try{e.willAppear({}),s.didDisappear(),s.container.css("visibility","hidden")}catch(a){Console.error(a)}else null===s&&e&&e.willAppear({});e&&(s=e),m.container.css(d)}function d(a){"input"!==a.target.tagName.toLowerCase()&&"textarea"!==a.target.tagName.toLowerCase()&&("39"==a.keyCode?(a.preventDefault(),n.next()):"37"==a.keyCode&&(a.preventDefault(),n.prev()))}function e(){var a,b;b={};try{var c=Magazine.cookies.get("redirect");c&&(Magazine.cookies.remove("redirect"),document.location.hash=c.hash)}catch(a){}if(a=document.location.toString(),a.match("#"))try{var d,e=a.split("#!/");d=e[1];var h=d.split("/"),i=null,j=null;$(h).each(function(a,c){0===a?j=c:a%2===0?b[i]=c:i=c}),t=b,f(j,b)}catch(a){t=b,g(l[0],b)}else t=b,g(l[0],b)}function f(a,b){var c,d=!1;for(var e in l)if(l[e].alias==a){d=!0,c=l[e];break}d?g(c,b):(Magazine.tracker.trackEvent("Error","PageNotFound",a),document.location.hash="#!/"+l[0].alias)}function g(a,b){function c(){d--,0===d&&h(a,b)}n.current=a.number,null!==Magazine.popupContainer&&Magazine.popupContainer.hide(),Magazine.searchWindow.isOpen&&Magazine.searchWindow.close();var d=0,e=[];if(!o){if(b)for(var f in b)e.push(f+":"+b[f]);try{document.title=Magazine.title+" - "+a.title.stripHtml()+(e.length>0?" - "+e.join(" "):"")}catch(a){Console.error(a)}if(o=!0,m&&m.number==a.number)return m.onHashChange(b),o=!1,void Magazine.tracker.trackPageView(a);Magazine.onPageChangeHandler("change",a),d+=1,Console.log("load page : "+a.alias);var g=0;g+=k(a,c,b),a.number>0&&(d+=1,g+=k(l[a.number-1],c,{})),a.number<l.length-1&&(d+=1,g+=k(l[a.number+1],c,{})),g>0&&x.show(),Magazine.tracker.trackPageView(a)}}function h(a,b){function c(){1===f?d():f++}function d(){f=0,m&&(m.didDisappear(),m.container.css({visibility:"hidden",display:"none"})),TouchSettings.DISABLED=!1,Magazine.device.supportsAnimations()&&a.container.css(Magazine.device.getCssProperty("transform"),""),m=a,m.didAppear(),i(a),o=!1,p=!1,a.container.css("zIndex","auto"),jQuery.isFunction(w)&&(w(),w=null)}var e,f=0;return x.hide(),TouchSettings.DISABLED=!0,u=!0,$.isFunction(v)&&(v(),v=null),m?(m.number>a.number?("function"==typeof m.controller.willDisappear&&m.controller.willDisappear(),p||(Magazine.device.supportsAnimations()?(a.container.startAnimation(selectedTransition.slideInRight,{hideAfterAnimation:!0},c),a.container.css({zIndex:"2",visibility:"visible"})):a.container.css({visibility:"visible",display:"block",left:-Magazine.pages.width+"px",top:0})),e=Magazine.pages.width):("function"==typeof m.controller.willDisappear&&m.controller.willDisappear(),p||(Magazine.device.supportsAnimations()?(a.container.startAnimation(selectedTransition.slideInLeft,{hideAfterAnimation:!0},c),a.container.css({zIndex:"2",visibility:"visible"})):a.container.css({visibility:"visible",display:"block",left:Magazine.pages.width+"px",top:0})),e=-Magazine.pages.width),Magazine.device.supportsAnimations()||a.container.animate({left:0,useTranslate3d:!0},Assets.pageTransition.time,Assets.pageTransition.ease,d),m&&(p||(Magazine.device.supportsAnimations()?m.container.startAnimation(e>0?selectedTransition.slideOutRight:selectedTransition.slideOutLeft,{hideAfterAnimation:!0},c):m.container.animate({left:e,useTranslate3d:!0},Assets.pageTransition.time,Assets.pageTransition.ease),a.willAppear(n.getParams()))),void(p&&d())):(a.container.css({visibility:"visible",display:"block",opacity:"0"}),a.container.animate({opacity:100},Assets.pageTransition.time,d),void a.willAppear(n.getParams()))}function i(a){a&&a.reposition()}function j(a){var b="",c=a.split("-");for(var d in c)b+=c[d].capitalize();return b}function k(a,b,c){return o=!0,a.initiated?(jQuery.isFunction(b)&&setTimeout(function(){b(a)}),0):(a.initiated=!0,Loader.loadPage(a,function(){a.getContent(function(){a.whenReady(function(){a.didLoadView(),Magazine.device.type==DeviceType.MOBILE&&a.hasMobileView&&a.loadMobile(),jQuery.isFunction(b)&&b(a)})})},function(b,d){if("Controller"==b.name){try{a.controller=Utils.newInstance(j(a.template)+"Controller")}catch(b){Console.error("Unknown class "+j(a.template)+"Controller")}a.controller.init(a),a.willLoadView(c)}}),1)}var l=a,m=!1,n=this,o=!1,p=!1,q=!1,r=null,s=null,t={},u=!1,v=null,w=null,x=null,y=null,z=250;this.init=function(){x=new Preloader,x.init($("#pageloader")),e(),this.enableNavigation()},this.enableNavigation=function(){$(window).on("hashchange",e),$(window).on("keydown",d),r=new Touch,r.animateOut(!1),r.init(Magazine.pageContainer,TouchOrientation.HORIZONTAL),r.onTouchStart=function(a){},r.onHorizontalDrag=c,r.onTouchEnd=b},this.disableNavigation=function(){$(window).off("hashchange",e),$(window).off("keydown",d),r.release()},this.setDidLoadPageHandler=function(a){w=a},this.getCurrentPage=function(){return m},this.isReady=function(a){return!!u||(v=a,!1)},this.getParams=function(){return t},this.getPageById=function(b){for(var c in a)if(a[c].id==b)return a[c];return!1},this.pageTotal=a.length,this.current=0,this.onOrientationChange=function(a){Magazine.hideSplashScreen();for(var b in l)null!==l[b].controller&&l[b].onOrientationChange(a)},this.orientationWillChange=function(a){Magazine.showSplashScreen()},this.onSwitchSize=function(a,b){var c=!1;for(var d in l)l[d].hasMobileView&&(l[d].viewType=a.size<3?PageViewType.MOBILE:PageViewType.NORMAL),null!==l[d].controller&&(a.size<3&&b>2?(c=!0,l[d].switchToMobile()):a.size>2&&b<3&&(c=!0,l[d].switchToDesktop()),$.isFunction(l[d].controller.onSwitchSize)&&l[d].controller.onSwitchSize(a,b));c&&n.getCurrentPage().hasMobileView&&Magazine.showSplashScreen()},this.onEndResizeHandler=function(a){n.getCurrentPage()&&n.getCurrentPage().onEndResizeHandler(a)},this.onResizeHandler=function(a){i(m);for(var b in l)null!==l[b].controller&&jQuery.isFunction(l[b].onResizeHandler)&&l[b].onResizeHandler(a)},this.onTransitionEnd=function(a){jQuery(a.target).unbind(a.type).css(Magazine.device.getCssProperty("transition-duration"),"0ms")},this.gotoPageNumber=function(a){o||(window.location.href="#!/"+l[a].alias)},this.next=function(){o||m&&m.number<l.length-1&&(window.location.href="#!/"+l[m.number+1].alias)},this.prev=function(){o||m&&m.number>0&&(window.location.href="#!/"+l[m.number-1].alias)},this.getPages=function(){return l},this.getPageByIndex=function(a){return(a<l.length||a>0)&&l[a]}}function IMTimeline(a){function b(){var b,c,d=0,e=0,f=!1,k=null,l=15;this.timestamp=0,this.init=function(a,c){this.timestamp=c.timestamp,b=$(a)},this.initWithString=function(a,c){this.timestamp=c.timestamp,b=$('<div class="timeline-item-wrapper"><i class="im-cl-timeline-pointer"><span class="arrow"></span><span class="circle im-ts-button-background"></span></i><li class=\'im-cl-timeline-item clearfix\'>'+a+"</li></div>")},this.appendTo=function(c){c.append(b);try{b.find(".dynamicForm").each(function(){new DynamicForm(null,$(this))})}catch(a){}k=b.scanDirectives(a),0===k.length&&(k=null)},this.checkAnchor=function(){var a=b.find(".im-sp-after-relative");if(a.length>0){var c=(new ColorModel).init(a.css("color"));c.getHsl()[1]<.1&&c.getHsl()[2]<.5||c.getHsl()[1]>.2&&c.getHsl()[2]<.9?a.addClass("im-sp-read-more-b-after"):a.addClass("im-sp-read-more-w-after")}},this.setPosition=function(){Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE?g<=h?(c="left",b.addClass(c),b.removeClass("right"),j<g+10&&j>g-10&&b.addClass("lower"),d=i=g,g+=b.outerHeight()+l,e=g):(c="right",b.addClass(c),b.removeClass("left"),i<h+10&&i>h-10&&b.addClass("lower"),d=j=h,h+=b.outerHeight()+l,e=h):(c="center",b.removeClass("right"),b.removeClass("left"),d=h,h+=b.outerHeight()+l,g+=b.outerHeight()+l,e=h);var a="white",f=b.find("h3");0===f.length&&(f=b.find(".text-block")),a=f.css("background-color"),"right"===c?$(".arrow",b).css("border-right-color",a):$(".arrow",b).css("border-left-color",a)},this.hide=function(a,c){c&&("undefined"==typeof a&&(a=0),b.css(Magazine.device.getCssProperty("transition-delay"),a+"s,"+a+"s"),b.removeClass("show"),this.pauseDirectives())},this.pauseDirectives=function(){null!==k&&k.each(function(){"undefined"!=typeof this.imMedia&&this.imMedia.pause()})},this.resetDirectives=function(){null!==k&&k.each(function(){"undefined"!=typeof this.imMedia&&this.imMedia.reset()})},this.getPosition=function(){return d},this.show=function(a){"undefined"==typeof a&&Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE&&(a=0),b.css(Magazine.device.getCssProperty("transition-delay"),a+"s,"+a+"s"),b.addClass("show"),null!==k&&k.each(function(){"undefined"!=typeof this.imMedia&&this.imMedia.reset()})},this.onScroll=function(a,b,c){!f&&d<=b&&e>=a?(this.show(Math.min(d/b,.2)),f=!0):f&&(d>b||e<a)&&(this.hide(c),f=!1)},this.onResizeHandler=function(a){this.setPosition()}}var c,d,e,f=[],g=0,h=0,i=-100,j=-100,k=0,l=0,m=0;this.init=function(){c=$("<div class='im-cl-timeline clearfix'></div>"),e=$("<h2 class='im-ts-title-background im-scroll-handler-sticky'><span></span></h2>"),d=$("<ol class='im-cl-timeline-list clearfix'></ol>"),c.append(e),c.append(d)},this.orderBy=function(a){var b=a.split("_");this.orderField=b[0],this.orderDir=b[1]},this.setTitle=function(a){"string"==typeof a&&a.length>0?e.find("span").html(a):e.addClass("not-set")},this.setStyle=function(a){"undefined"!=typeof a&&(Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE?e.attr("style",a.get(["title","title_background"])):e.attr("style",a.get(["m_title","m_title_background"])))},this.show=function(){this.onResizeHandler(Magazine.device),TweenMax.to(e,1,{opacity:1,y:0,ease:"easeOutQuint"});for(var a in f)f[a].checkAnchor()},this.offsetCorrectie=0,this.appendTo=function(a){for(var b in f)f[b].appendTo(d);a.append(c),TweenMax.set(e,{opacity:0,y:-50})},this.addItem=function(a,c){var d=new b;"string"==typeof a?d.initWithString(a,c):d.init(a,c),f.push(d),this.sort()},this.sort=function(){if("undefined"!=typeof this.orderField){var a=this;f.sort(function(b,c){return"asc"===a.orderDir?b[a.orderField]-c[a.orderField]:c[a.orderField]-b[a.orderField]})}},this.onScroll=function(a,b){if(k=a,l<=b&&m>=a)for(var c=0;c<f.length;c++)f[c].onScroll(a-l,b-l)},this.getPosition=function(){return l},this.getItemPosition=function(a){return f[a].getPosition()},this.onResizeHandler=function(a){h=0,g=0,j=-100,i=-100;for(var b in f)f[b].onResizeHandler(a);l=c.offset().top+k-this.offsetCorrectie,m=l+c.outerHeight()-e.outerHeight(),e.data("sh-start",Math.round(l)),e.data("sh-end",Math.round(m))},this.willDisappear=function(){for(var a in f)f[a].pauseDirectives()},this.willAppear=function(){for(var a in f)f[a].resetDirectives()}}function Page(a,b){function c(a){f.header&&(null!==f.header.image&&f.header.title_position&&f.header.title_position.length>0||null!==f.header.mobile_image&&f.header.title_mobile_position&&f.header.title_mobile_position.length>0)?d.header?d.header.placeAgain():d.header=new PageHeader(f.header,d.container,a):jQuery.isFunction(a)&&a()}var d=this,e=!1,f=null,g=null,h=!1,i=null,j=[],k=!0,l=null,m=null,n=!0,o=[],p=function(a){var b=a.pageX,c=a.pageY,e=0,f=0,g=64,h=$("body"),i=h.width(),j=h.height();e=i/2-b,f=j/2-c,d.getBackground().getContainer().css(Magazine.device.getCssProperty("transform"),"translateX("+e/g+"px) translateY("+f/g+"px)"),$(".im-3d",d.container).each(function(){var a=$(this).attr("class"),b=/im-level-(\d*)/.exec(a);b&&b.length>1&&$(this).css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(e/(g/b[1]),f/(g/b[1]),0,!0))})};this.events=PageEvents(this),this.params={},this.viewType=PageViewType.NORMAL,this.hasMobileView=1==a.template.has_mobile_view,this.template=a.template.template_name,this.didLoadComplete=!1,this.alias=a.alias,this.options=a.options||{},this.disableHeader=1==this.options.has_disabled_header,this.share_url=a.share_url,this.title=a.title,this.restrictions=a.restrictions,this.thumb=a.thumb,this.logo=a.logo,this.id=a.id,this.number=b,this.originalPageNumber=a.page_no,this.controller=null,this.initiated=!1,this.hasInPageNavigation=!1,this.container=null,this.htmltemplate=null,this.hasBackground=!1,this.init=function(){d.hasMobileView&&(d.viewType=Magazine.device.size>2?PageViewType.NORMAL:PageViewType.MOBILE),this.container=jQuery("<div/>").attr("id","Page"+(parseInt(a.page_no)-1)).addClass("page").attr("tabindex",0)},this.getData=function(){return f},this.getContentByString=function(a){var b=Object.byString(f,a);return"undefined"==typeof b&&(b=Object.byString(this.controller,a)),b},this.getInPageNavigation=function(){return null===m&&(m=(new InPageNavigation).init("#!/"+d.alias,d.container),d.hasInPageNavigation=!0),m},this.getBackground=function(){return null===l&&(l=new Background,d.hasBackground=!0),l},this.getHeaderData=function(){return{pagename:d.title,pagenumber:d.number+1}},this.switchToDesktop=function(){h?i=d.switchToDesktop:(i=null,d.container.removeClass("p-mobile"),d.hasMobileView?(d.viewType=PageViewType.NORMAL,d.destroy(),d.container.html(""),d.container.removeClass("p-mobile-view"),d.container.removeClass("tp-m-"+d.template).addClass("tp-"+d.template),d.willLoadView(Magazine.getNavigationController().getParams()),h=!0,Loader.loadPage(d,function(){h=!1,null!=i?i():(d.container.html(d.htmltemplate.render(f.content)),d.didLoadView(),Magazine.getNavigationController().getCurrentPage().number==d.number&&(d.willAppear(Magazine.getNavigationController().getParams()),"function"==typeof d.didAppear&&d.didAppear(d.params),d.reposition(),Magazine.onSwitchedSize()),d.onResizeHandler(Magazine.device)),c()})):c())},this.whenReady=function(a){jQuery.isFunction(d.controller.onLoad)?d.controller.onLoad(a):a()},this.switchToMobile=function(){h?i=d.switchToMobile:(i=null,d.container.addClass("p-mobile"),d.hasMobileView?(d.viewType=PageViewType.MOBILE,d.didDisappear(),d.destroy(),d.container.html(""),d.container.addClass("p-mobile-view"),d.container.addClass("tp-m-"+d.template).removeClass("tp-"+d.template),d.willLoadView(Magazine.getNavigationController().getParams()),h=!0,Loader.loadPage(d,function(){h=!1,null!=i?i():(d.container.html(d.htmltemplate.render(f.content)),d.didLoadView(),Magazine.getNavigationController().getCurrentPage().number==d.number&&(d.willAppear(Magazine.getNavigationController().getParams()),"function"==typeof d.didAppear&&d.didAppear(d.params),Magazine.onSwitchedSize()),d.onResizeHandler(Magazine.device)),c()})):c())},this.disable3d=function(){$(d.container).off("mousemove",p),d.container.removeClass("im-3d-enabled")},this.enable3d=function(a){d.container.addClass("im-3d-enabled"),$(d.container).on("mousemove",p)},this.didLoadView=function(){k=!0,"function"==typeof d.controller.didLoadView&&d.controller.didLoadView(),d.rendered(),Magazine.device.type==DeviceType.MOBILE&&(Magazine.device.supports("overflow-scroll")||d.container.find(".scroller").each(function(a){var b=$(this),c=new ScrollY;c.init(b)})),d.container.find(".scroller"),d.events.trigger(PageEvents.EVENTS.DID_LOAD_VIEW)},this.willLoadView=function(a){this.params=a,null!==l&&(l.release(),l=null),"function"==typeof d.controller.willLoadView&&d.controller.willLoadView(a),d.events.trigger(PageEvents.EVENTS.WILL_LOAD_VIEW)},this.forceRedraw=function(){var a=d.container[0],b=document.createTextNode(" "),c=a.style.display;a.appendChild(b),a.style.display="none",setTimeout(function(){a.style.display=c,b.parentNode.removeChild(b)},20)},this.willAppear=function(a){Magazine.tracker.setCustomVar(2,"template",d.template,2),this.params=a,null!=m&&m.setParams(a),"function"==typeof d.controller.willAppear&&d.controller.willAppear(a),null!=l&&l.pageWillAppear(),k&&d.handleAlignments(),d.onResizeHandler(Magazine.device),d.onEndResizeHandler(Magazine.device),d.events.trigger(PageEvents.EVENTS.WILL_APPEAR)},this.didAppear=function(){d.container.addClass("didappear"),d.container.focus(),"function"==typeof d.controller.didAppear&&d.controller.didAppear(this.params),d.events.trigger(PageEvents.EVENTS.DID_APPEAR)},this.loadMobile=function(){},this.subPagesLength=function(){return g?g.length:0},this.getSubPages=function(){return g},this.didDisappear=function(){if(d.container.removeClass("didappear"),null!=g)for(;g.length>0;){var a=g.pop();a.destroy(),a=void 0}if(j.length>0)for(;j.length>0;){var a=j.pop();j.interval||clearTimeout(j.timeout),a=void 0}if("function"==typeof d.controller.didDisappear&&d.controller.didDisappear(),o.length>0)for(var b in o)o[b].pause();d.container.trigger(PageEvent.DISAPPEAR,[this]),null!=l&&l.pageDidDisappear(),k=!1,d.events.trigger(PageEvents.EVENTS.DID_DISAPPEAR)},this.isFirstView=function(){return k},this.onHashChange=function(a){this.params=a,null!=g&&g.length>0&&!g[g.length-1].onHashChange(a)||(null!=m&&m.onHashChange(a),jQuery.isFunction(d.controller.onHashChange)&&d.controller.onHashChange(a))},this.popPage=function(a){var b;if(a)for(var c=0;c<g.length;c++)g[c].subPageId===a&&(b=g.splice(c,1)[0]);b||(b=g.pop()),b.destroy(),b=void 0},this.scanDirectives=function(){return this.container.scanDirectives(this)},this.pushPage=function(a,b,c,e){null==g&&(g=[]),"undefined"==typeof b&&(b=d.alias),a.init(d,b),"function"==typeof e&&(a.onClose=e),a.load(function(){a.render(),a.onHashChange(Magazine.getNavigationController().getParams()),a.show(),"function"==typeof c&&c.apply(a)}),g.push(a)};var q=0;this.onScrollHandler=function(a){a!=q&&(q>a?Magazine.getNavigationBar().show():Magazine.getNavigationBar().hide()),q=a,this.header&&(a>30?this.header.hide():this.header.show())},this.getContent=function(a){e||(e=!0,d.controller.scrollable&&d.container.addClass("scrollable"),Magazine.device.size<DeviceSize.PORTRAIT&&d.container.addClass("p-mobile"),d.viewType!==PageViewType.NORMAL?(d.container.addClass("p-mobile-view"),d.container.addClass("tp-m-"+d.template)):d.container.addClass("tp-"+d.template),"function"==typeof d.controller.willLoad&&d.controller.willLoad(),Magazine.getApi().getPage(d.id,function(b){d.didLoadComplete=!0,f=b,b.content.urlbase="#!/"+d.alias,b.content.pagetitle=d.title,b.content.imageurl=Config.magazine_url,"undefined"!=typeof d.restrictions&&d.setRestrictions(),jQuery.isFunction(d.controller.render)&&d.controller.render(f.content),d.container.html(d.htmltemplate.render(f.content)),d.share_url=f.share_url,jQuery.isFunction(d.controller.didLoad)&&d.controller.didLoad(b),d.container.find(".dynamicForm").each(function(){new DynamicForm(null,$(this))}),e=!1,c(a)}))},this.rendered=function(){d.container.find("iframe").each(function(){var a=$(this).attr("src");/w.soundcloud.com/.test(a)&&o.push(new Magazine.media.soundcloud.player(this))})},this.onOrientationChange=function(a){null!=g&&g.length>0&&g[g.length-1].onResizeHandler(a),d.container.find(".scroller").css({height:Magazine.pages.height+"px"}),jQuery.isFunction(d.controller.onOrientationChange)&&d.controller.onOrientationChange(a)},this.setRestrictions=function(){try{for(var a in f.content)if($.isArray(f.content[a])){var b=[],c="keep";if(isNaN(d.restrictions[0])&&(c=d.restrictions.shift()),"kee"===c){for(var e in f.content[a])$.inArray(e,d.restrictions)!==-1&&b.push(f.content[a][e]);b.length>0&&(f.content[a]=b)}else for(var g in f.content[a])$.inArray(g,d.restrictions)!==-1?f.content[a][g].imprType=c:f.content[a][g].imprType=c}}catch(a){Console.error(a,"Couldn't restrict page")}},this.onResizeHandler=function(a){null!=g&&g.length>0&&g[g.length-1].onResizeHandler(a),d.container.find(".scroller").css({height:Magazine.pages.height+"px"}),jQuery.isFunction(d.controller.onResizeHandler)&&d.controller.onResizeHandler(a),d.events.trigger(PageEvents.EVENTS.ON_RESIZE)},this.onEndResizeHandler=function(a){d.handleAlignments(),$.isFunction(d.controller.onEndResizeHandler)&&d.controller.onEndResizeHandler(a),d.hasBackground&&null!==l&&l.onEndResizeHandler(a),d.events.trigger(PageEvents.EVENTS.ON_END_RESIZE)},this.disableAlignments=function(){n=!1},this.enableAlignments=function(){n=!0},this.handleAlignments=function(){n&&d.container.handleAlignments()},this.reposition=function(){jQuery(".alignMiddle",d.container).each(function(){var a=jQuery(this),b=a.height();a.css("top",Math.max(0,.5*Magazine.pages.height-.5*b)+"px")})},this.destroy=function(){if(null!=g)for(;g.length>0;){var a=g.pop();a.destroy(),a=void 0}if(j.length>0)for(;j.length>0;){var a=j.pop();j.interval?clearInterval(a.interval):clearTimeout(a.timeout),a=void 0}if(o.length>0){for(var b in o)o[b].destroy();o=[]}$(".im-absolute-view",d.container).each(function(){this.destroy()}),"function"==typeof d.controller.destroy&&d.controller.destroy()},this.registTimer=function(a,b,c){c?j.push({interval:setInterval(a,b,c)}):j.push({timeout:setTimeout(a,b)})},this.init()}function SubPage(a,b,c){function d(){$(this.container).parent().find(".page").append('<div class="sub-page-overlay"></div>'),$(this.container).find(".sub-page-overlay").css({height:"100%",width:"100%",position:"absolute",opacity:.7,"background-color":"black",top:0,"z-index":2,transition:"all .4s ease-in-out","-webkit-transition":"all .4s ease-in-out"})}function e(){$(this.container).find(".sub-page-overlay").fadeOut(400,function(){$(this).remove()})}function f(){k.container.find(".back").click(function(a){a.preventDefault(),null!=k.urlbase?window.location.replace("#!/"+k.urlbase):(Magazine.tracker.trackEvent("Details","Click","Back"),k.hide())})}function g(){var a=k.container.find(".wrapper.im-ts-mobile-view"),b=k.container.find(".paragraph"),c=k.container.find(".text h2");k.data.style&&(k.data.style.backgroundStyle?a.attr("style",k.data.style.backgroundStyle):a.attr("style",""),k.data.style.descriptionStyle?b.attr("style",k.data.style.descriptionStyle):b.attr("style",""),k.data.style.titleStyle?c.attr("style",k.data.style.titleStyle):c.attr("style",""))}function h(){return k.currentItem<l-1?"#!/"+k.baseurl+k.paramname+"/"+(k.currentItem+1):"javascript:void(0);"}function i(){return k.currentItem>0?"#!/"+k.baseurl+k.paramname+"/"+(k.currentItem-1):"javascript:void(0);"}var j,k=this,l=1,m=null,n=[],o=a,p=b,q=c;this.template=null,this.htmltemplate=null,this.header=null,this.hasNavigation=!1,this.data={},this.backButton=Translate.getLabel("btn_back"),this.container=jQuery("<div/>").addClass("subpage"),this.currentItem=0,this.paramname="item",this.baseurl=null,this.body=!1,this.subPageId=SubPageID++,void 0===a&&(o=selectedTransition.slideInLeft),void 0===b&&(p=selectedTransition.slideOutRight),this.init=function(a,b){m=a,"undefined"!=typeof b&&(k.urlbase=b)},this.load=function(a){return null==k.template&&(k.template=SubPageDefault.getTemplate()),null!==k.htmltemplate?void a():void Loader.load({files:[{page:k,file:this.template,name:"View"}],callback:a})},this.render=function(){try{var a={};a.backButton=k.backButton,a.baseurl=k.baseurl,k.data.items&&k.data.items.length>1&&(k.hasNavigation=!0,l=k.data.items.length,a.navigation=SubPageDefault.getHeaderNavigation().render({itemCount:l})),null==k.header&&(k.header=SubPageDefault.getHeader()),k.data.imageurl=Config.magazine_url,k.data.baseurl=k.baseurl,k.data.header=k.header.render(a),k.body!==!1?k.container.html(k.body):k.container.html(k.htmltemplate.render(k.data)),k.container.scanDirectives(),k.container.find(".dynamicForm").each(function(){Console.log("Subpage: Create form"),new DynamicForm(null,$(this))}),k.container.find("iframe").each(function(){var a=$(this).attr("src");/w.soundcloud.com/.test(a)&&n.push(new Magazine.media.soundcloud.player(this))}),m.container.prepend(k.container);var b=k.container.find(".top_header").outerHeight()||Assets.subpage.header.height[Magazine.device.size];k.container.find(".scroller").css({height:Magazine.pages.height-b+"px"}),Magazine.device.type==DeviceType.MOBILE&&(Magazine.device.supports("overflow-scroll")||k.container.find(".scroller").each(function(a){var b=$(this),c=new ScrollY;c.init(b)})),f(),g()}catch(a){Console.error(a)}},this.destroy=function(){if(null!=j&&(j.release(),j=null),n.length>0){for(var a in n)n[a].destroy();n=[]}k.template=null,k.htmltemplate=null,k.data=null,jQuery(".back",k.container).off("click"),k.container.remove()},this.onHashChange=function(a){return"undefined"!=typeof a[k.paramname]&&null!=a[k.paramname]?(k.currentItem=a[k.paramname],jQuery(".next",k.container).attr("href",h()),jQuery(".prev",k.container).attr("href",i()),l<=1):(k.hide(),!0)},this.onResizeHandler=function(a){k.container.find(".scroller").css({height:Magazine.pages.height-Assets.subpage.header.height[Magazine.device.size]+"px"})},this.show=function(){1==q&&d(),Magazine.device.supportsAnimations()?(k.container.startAnimation(o,{hideAfterAnimation:!0}),k.container.css({zIndex:"6",visibility:"visible"})):k.container.css({visibility:"visible",display:"block",left:"0px",top:0});var a=$(".im-ts-videocontainer",k.container);a.length>0&&(j=new Video(a))},this.hide=function(){if(1==q&&e(),e(),n.length>0){for(var a in n)n[a].destroy();n=[]}null!=j&&(j.release(),j=null),Magazine.device.supportsAnimations()?k.container.startAnimation(p,{hideAfterAnimation:!0},function(){"function"==typeof k.onClose&&k.onClose.apply(k),m.popPage(k.subPageId)}):(k.container.css({visibility:"visible",display:"block",left:-Magazine.pages.width+"px",top:0}),"function"==typeof k.onClose&&k.onClose.apply(k),m.popPage(k.subPageId))}}function DynamicForm(a,b,c,d){function e(a){m=a;try{l.dynamicForm.setElements(a.fields),l.dynamicForm.id=a.id,l.dynamicForm.label=a.label,l.dynamicForm.successMessage=a.success_message,0==$(l).find(".element").length?l.render():l.dynamicForm.setHandlers(),
$.isFunction(c)&&c()}catch(b){Console.error("Initiate dynamic form : "+a.id)}}function f(){if(l="undefined"!=typeof b&&null!==b&&b.find("form").length>0?b.find("form")[0]:$("<form></form>")[0],null==a?a=l.getAttribute("data-dynamicid"):l.setAttribute("data-dynamicid",a),"undefined"==typeof a)return void(l=null);l.dynamicForm={onSubmit:null,elements:[],getData:function(){return m},setHandlers:function(){(Magazine.device.isIE8||Magazine.device.isIE9)&&($("input, textarea",l).on("focus blur",function(a){var b=$(this),c=b.val(),d=b.attr("placeholder");switch(a.type){case"focus":c===d&&b.val("");break;case"blur":""===c&&b.val(d)}}),$("input, textarea",l).trigger("blur")),$(".submit",l).off("click"),$(".submit",l).on("click",c),$(l).off("submit",c),$(l).on("submit",c)},setElements:function(a){for(var b in a)this.addElement(a[b])},addElement:function(a){var b=j(a);this.elements.push(b)},isValid:function(){var a=!0;(Magazine.device.isIE8||Magazine.device.isIE9)&&$("input, textarea",l).each(function(a){var b=$(this);b.val()===b.attr("placeholder")&&b.val("")});for(var b in this.elements)this.elements[b].isValid()||(a=!1);return a},getNormalValues:function(){var a={};for(var b in this.elements)a[this.elements[b].label]=this.elements[b].getValue();return a},getValues:function(){var a={};for(var b in this.elements)a[this.elements[b].name]=this.elements[b].getValue();return a},submit:function(a){a.preventDefault(),l.dynamicForm.isValid()?Magazine.getApi().postForm(l.dynamicForm.id,this.getValues(),function(a){var b=l.dynamicForm.elements;if("errors"in a.result){for(var c in a.result.errors){a.result.errors;for(var d in b)b[d].name==c&&(b[d].errorMessage=Translate.getLabel("form_invalid_value"),b[d].setInvalid(!0))}Magazine.tracker.trackEvent("Form","Submit invalid",l.dynamicForm.label)}else"success"in a.result&&a.result.success&&("function"==typeof l.onSubmit&&l.onSubmit(a),$(l).replaceWith("<div class='success'>"+l.dynamicForm.successMessage+"</div>"),Magazine.tracker.trackEvent("Form","Submit success",l.dynamicForm.label))}):(Magazine.tracker.trackEvent("Form","Submit invalid",l.dynamicForm.label),$(l).find(".error:first .element").focus())}},l.render=function(){for(var a in this.dynamicForm.elements){var b=$("<div class='row' />");b.append(g(this.dynamicForm.elements[a])),b.append(this.dynamicForm.elements[a]),$(this).append(b)}$(this).append(h()),$(".submit",l).on("click",c)},l.destroy=function(){$(".submit",l).off("click")};var c=function(a){return a.preventDefault(),l.dynamicForm.submit(a),!1};return d?e(d):Magazine.getApi().getForm(a,function(a){e(a)}),l}function g(a){var b;return b=0===a.label.indexOf("__")?Translate.getLabel(a.label):a.label,$("<label for='dynamicForm"+a.name+"' "+(a.required?"class='required'":"")+">"+b+"</label>")}function h(){return $("<a href='' class='button im-ts-button submit'>"+Translate.getLabel("form_send")+"</a>")}function i(a,b){return"function"!=typeof a.getValue&&(a.getValue=function(){return"checkbox"===this.elementType?$(this).find("input").is(":checked")?"1":"0":"radio"===this.elementType?$(this).find("input:checked").val():this.value}),a.name=b.name,$(a).focusin(function(){var a=$(this).parent();a.addClass("focused");var b=a.find(".message");Magazine.device.isIE8?b.css("top",$(this).outerHeight()-6+"px"):b.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,$(this).outerHeight()-6))}).focusout(function(){var a=$(this).parent();a.removeClass("focused"),Magazine.device.isIE8?a.find(".message").css("top",""):a.find(".message").css(Magazine.device.getCssProperty("transform"),"")}),$(a).on("keyup",function(){$(this).parent().hasClass("error")&&this.isValid()&&$(this).parent().removeClass("error").addClass("valid")}),a.label=b.label,a.required=1==b.required,a.validation=b.validation,a.setInvalid=function(a){var b=$(this).parent();b.addClass("error"),a&&b.addClass("server-error"),b.find(".message").length>0?b.find(".message").html(this.errorMessage).css("left",$(this).offset().left-b.offset().left+1+"px"):b.prepend($("<div class='message'>"+this.errorMessage+"</div>").css("left",$(this).offset().left-b.offset().left+1+"px"))},a.setValid=function(){var a=$(this).parent();a.removeClass("error"),a.find(".message").remove()},a.isValid=function(){var a=!0,b=this.getValue(),c=null;switch(this.validation){case"EmailAddress":c=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;break;case"Phone":c=/\(?([0-9]{2,4})\)?([ .-]?)([0-9]{3})\2([0-9]{4})/}return 1==this.required&&(""==b||void 0===b||"checkbox"===this.elementType&&0==b)?(this.errorMessage=Translate.getLabel("form_empty_value"),a=!1):null==c||c.test(b)||(this.errorMessage=Translate.getLabel("form_invalid_email"),a=!1),a?this.setValid():this.setInvalid(),a},a}function j(a){var b,c=a.type.toLowerCase();if(0==$(l).find("#dynamicForm"+a.name).length)switch(c){case"text":case"checkbox":case"date":var d=c;"EmailAddress"==a.validation&&(d="email"),b="checkbox"===d?$("<label class='im-df-checbox'><input type='"+d+"' /><span>"+a.label+"</span></label>"):$("<input type='"+d+"' />");break;case"textarea":b=$("<textarea></textarea>");break;case"select":case"multiselect":b=$("<select></select>");var e=k(a.type_values);for(var f in e)b.append("<option value='"+e[f].optionLabel+"'>"+e[f].optionName+"</option>");"multiselect"===c&&b.attr("multiple","");break;case"multicheckbox":return $("<div>Not available at the moment</div>");case"radio":b=$("<span class='radio'></span>");var e=k(a.type_values);for(var f in e)b.append("<label><input type='"+c+"' name='"+a.name+"' value='"+e[f].optionName+"' /> "+e[f].optionLabel+"</label>");b[0].getValue=function(){return $("input:checked",this).val()},b[0].name=a.name;break;default:return $("<div>Invalid element</div>")}else b=$(l).find("#dynamicForm"+a.name);return b[0].elementType=c,b.addClass("element").parent().addClass("im-df-row-"+c),b.attr("required",a.required),b.attr("id","dynamicForm"+a.name),i(b[0],a)}function k(a){var b=[],c=a.split(";");for(var d in c){var e=c[d].split("|");b.push({optionLabel:e[0],optionName:e[1]})}return b}var l=null,m=d;return f()}function IMWhitepaper(a){function b(){var b=Magazine.showPopupScreen("whitepaper",{ready:function(b){c=new DynamicForm(a.id,b.find(".whitepaper-form"),null,c.dynamicForm.getData()),c.onSubmit=this.submit},submit:function(a){b.hide(),Magazine.getNavigationController().enableNavigation()}},{form:c.innerHTML,title:a.title,description:a.description,canClose:!1});b.setWidth(540)}var c,d=this;return d={init:function(){var e=Magazine.cookies.get("im-login");e?Magazine.request.setParam("user",e):(Magazine.registClass(d),c=new DynamicForm(a.id,null,b))},show:function(){var e=Magazine.cookies.get("im-login");e||(Magazine.registClass(d),c=new DynamicForm(a.id,null,b))},onMagazineReady:function(){Magazine.getNavigationController().disableNavigation()}},d.init()}function ImAdDirective(){var a,b,c,d,e,f,g,h=null;this.init=function(h,i){d=this,e=i,a=h,b=$("<div class='im-ad-space'></div>"),a.append(b),a[0].imAd=this;var j=a.attr("units");if(f=a.attr("type"),"string"!=typeof j)return void Console.error("Define your ad units");try{c=JSON.parse(j.replace(/\&quot\;/g,'"').replace(/\'/g,'"'))}catch(a){Console.error("Ads: Parse error: "+a)}if(Magazine.device.isOnline)switch(f){case"DFP":Loader.loadExternalJs("//www.googletagservices.com/tag/js/gpt.js",function(){googletag.cmd.push(function(){for(var a in c)c[a].id="im-ad-"+imUniqueAdId++,b.attr("id",c[a].id),c[a].slot=googletag.defineSlot(c[a].unit,c[a].sizes[0],c[a].id).addService(googletag.pubads());googletag.pubads().enableSingleRequest(),googletag.enableServices()}),e.events.addEventListener(PageEvents.EVENTS.ON_RESIZE,d.onResize),e.events.addEventListener(PageEvents.EVENTS.DID_DISAPPEAR,d.unload),e.events.addEventListener(PageEvents.EVENTS.DID_APPEAR,d.load)});break;case"doubleclick":h.parent().parent().css({padding:0}),g=Hogan.compile('<iframe src="{{iframe}}" width="{{width}}" height={{height}} marginwidth=0 marginheight=0 hspace=0 vspace=0 frameborder=0 scrolling=no bordercolor="#000000"><script language="JavaScript1.1" src="{{script}}"></script><noscript><a href="{{noscript}}"><img src="{{img}}" border=0 width="{{width}}" height="{{height}}" alt="Advertisement" /></A></noscript></iframe>'),e.events.addEventListener(PageEvents.EVENTS.ON_RESIZE,d.onResize),e.events.addEventListener(PageEvents.EVENTS.DID_DISAPPEAR,d.unload),e.events.addEventListener(PageEvents.EVENTS.DID_APPEAR,d.load)}return this},this.getSlot=function(){var b=a.parent().width();for(var d in c)if(c[d].sizes[0][0]<=b)return c[d];return!1},this.setUnitInSlot=function(a){if(Magazine.device.isOnline)switch(b.css({width:a.sizes[0][0]}),f){case"DFP":b.attr("id",a.id),googletag.cmd.push(function(){googletag.display(a.id)});break;case"doubleclick":var c=Math.floor((new Date).getTime()/1e3),d={};d.iframe="https://ad.doubleclick.net/adi/"+a.id+";sz="+a.sizes[0].join("x")+";ord="+c+"?",d.script="https://ad.doubleclick.net/adj/"+a.id+";abr=!ie;sz="+a.sizes[0].join("x")+";ord="+c+"?",d.noscript="https://ad.doubleclick.net/jump/"+a.id+";abr=!ie4;abr=!ie5;sz="+a.sizes[0].join("x")+";ord="+c+"?",d.img="https://ad.doubleclick.net/ad/"+a.id+";abr=!ie4;abr=!ie5;sz="+a.sizes[0].join("x")+";ord="+c+"?",d.width=a.sizes[0][0],d.height=a.sizes[0][1],b.html(g.render(d))}},this.onResize=function(){var a=d.getSlot();if(a&&h!==a){var b=h;null!==h&&"DFP"===f&&googletag.cmd.push(function(){googletag.pubads().clear([b.slot])}),d.setUnitInSlot(a),h=a}},this.render=function(){return this},this.load=function(){d.onResize()},this.unload=function(){null!==h&&"DFP"===f&&googletag.cmd.push(function(){googletag.pubads().clear([h.slot]),h=null})},this.show=function(){},this.pause=function(){},this.release=function(){a[0].imAd=null,e.events.removeEventListener(PageEvents.EVENTS.ON_RESIZE,this.onResize),a.remove(),"DFP"===f&&googletag.cmd.push(function(){googletag.pubads().clear()}),a=null},this.onSwitchSize=function(a){}}function ImMediaDirective(){"use strict";var a,b,c,d,e,f,g,h,i=0,j=0,k=0,l=!0,m=!1,n=null,o=null,p=!1,q=null,r=this,s=function(b){var c=new CustomApi;c.onComplete=function(b){try{"string"==typeof b&&(b=JSON.parse(b));var c=Object.byString(b,a.attr("target"));"string"==typeof c&&(a.html(""),t(c))}catch(a){}},c.init({url:b,cache:!0}),c.load()},t=function(b,c,d){if(c=c||{},r.imageTag===!0){var e=document.createElement("img");e.onload=function(){r.isLoaded=!0,"function"==typeof r.onLoad&&r.onLoad.apply(r)},e.src=b,d&&e.setAttribute("alt",d),e.removeAttribute("width"),e.removeAttribute("height"),a.append(e),h&&a.append("<div class='im-media-caption'>"+h+"</div>")}else{var f,g="";"undefined"!=typeof c.position&&(g="background-position: "+c.position+";"),a.find(".im-media-image").length>0?f=a.find(".im-media-image").replaceWith("<div class='im-media-image' style='background-image: url(\""+b+'"); '+g+"' />"):(f=$("<div class='im-media-image' style='background-image: url(\""+b+'"); '+g+"' />"),a.append(f)),h&&f.css("position","relative").append("<div class='im-media-caption im-ts-label'>"+h+"</div>")}},u=function(a){e&&(h=a)};this.imageTag=!0,this.isLoaded=!1,this.init=function(c,d){return f=d,a=c,a[0].imMedia=this,i=a.attr("width"),j=a.attr("crop")||0,k=a.attr("height"),e=!a.attr("no-caption"),b=a.data("media"),this.imageTag=!!a.attr("imagetag"),"string"==typeof b&&0===b.indexOf("http")?void s(b):("object"!=typeof b&&"undefined"!=typeof f&&(b=f.getContentByString(b)),g=a.attr("settings"),"string"==typeof g&&"undefined"!=typeof f&&(g=f.getContentByString(g)),p=!!a.attr("autoplay"),this.fullscreen=!!a.attr("fullscreen"),void("undefined"!=typeof b&&this.setMedia(b)))},this.useCarousel=function(a){m=a},this.getMediaObject=function(){return b},this.setMedia=function(a){if(b=a,null!==b&&"undefined"!=typeof b)if("object"==typeof a){if(a.description&&u(a.description),"youtube"===a.type||"vimeo"===a.type||"wistia"===a.type||"npo"===a.type||"source"===a.type||"vidyard"===a.type||"iframe"===a.type)return void this.addVideo(a);if(c=getImageUrl(),"undefined"!=typeof a.uri)this.addImage({src:a});else if("undefined"!=typeof a[0]){a.length>1&&(m=!0);for(var d in a)this.addImage({src:a[d].image});this.render()}}else"string"==typeof a&&0===a.indexOf("http")?s(a):("string"==typeof a&&a.length>0||"number"==typeof a)&&this.addVideo(a)},this.appendLayer=function(c){null===q&&(q=[]);var d=(Config.is_preview?"":Config.magazine_url)+c.image.uri,e=$('<div class="im-absolute-view" style="width: '+c.image.width+"px; height: "+c.image.height+'px;"><div class="background-layer"><img src="'+d+'"'+(c.image.alt?" alt='"+c.image.alt+"'":"")+"></div></div>"),f=(new AbsoluteView).init(e);a.append(f.view),f.setPosition(c.position),f.setFixed(!0,b),q.push(f)},this.reset=function(){null!==o&&o.reset()},this.render=function(){return null!==n&&(a.append(n.render()),n.showImage(0),p?n.startTimer():n.stopTimer()),this},this.willAppear=function(){l&&(n.stopTimer(),n.showImage(0),p?n.startTimer():n.stopTimer()),l=!1},this.addVideo=function(b){var c=$("<div class='im-ts-videocontainer'></div>");a.append(c),a.addClass("im-video"),o=new Video(c,b,b.settings||!1),h&&c.css("position","relative").append("<div class='im-media-caption im-ts-label'>"+h+"</div>")},this.addImage=function(a){var b=a.src;if("undefined"!=typeof b.mobile&&Magazine.device.size<DeviceSize.PORTRAIT&&(b=b.mobile),b.width&&b.height&&(d=b.width/b.height),m){null===n&&(n=new ImageCarousel(g),"undefined"==typeof i&&"undefined"==typeof k||(n.isFullscreen=this.fullscreen,n.size.width=i,n.size.height=k));var e=new ImageCarouselImage;e.init(b),"string"==typeof a.title&&e.setTitle(a.title,a.titleStyle,a.titleStyleMobile),"string"==typeof a.subtitle&&e.setSubtitle(a.subtitle,a.subtitleStyle,a.subtitleStyleMobile),"undefined"!=typeof a.titlePosition&&null!==a.titlePosition&&a.titlePosition.length>0&&(e.setDesktopPosition(a.titlePosition[0],a.titlePosition[1]),Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE&&e.setDesktopPosition()),Magazine.device.size<=DeviceSize.MOBILE_LANDSCAPE&&e.setPosition("0px","20px"),n.addImage(e)}else{"undefined"!=typeof b.mobile&&Magazine.device.size<DeviceSize.PORTRAIT&&(b=b.mobile,d=b.width/b.height);var f=b.uri;"undefined"!=typeof i||"undefined"!=typeof k?f=0!==j&&"undefined"!=typeof i&&"undefined"!=typeof k?c.execute(b.uri,i,k,null,null,j):c.execute(b.uri,null,null,i,k):Config.is_preview||(f=Config.magazine_url+f),t(f,b.settings,b.alt)}},this.show=function(){a.show(),null!==n&&n.startTimer(0),null!==o&&o.reset()},this.pause=function(){null!==n&&n.stopTimer(),null!==o&&o.pause()},this.release=function(){null!==n&&n.release(),null!==o&&(o.release(),o=null),a.imMedia=null,a.remove(),a=null},this.resetSize=function(){a.css("height","")},this.containSize=function(){var b=a.width();b>0&&a.height(Math.round(a.width()/d))},this.getRatio=function(){return d},this.getWidth=function(){return a.width()},this.onSwitchSize=function(a,c){if(null!==n){var d=n.getLength();if(a.size<=DeviceSize.MOBILE_LANDSCAPE)for(var e=0;e<d;e++)n.getImage(e).setPosition("0px","20px");else for(var e=0;e<d;e++)n.getImage(e).setDesktopPosition()}(c>=DeviceSize.PORTRAIT&&a.size<DeviceSize.PORTRAIT||c<DeviceSize.PORTRAIT&&a.size>=DeviceSize.PORTRAIT)&&"undefined"!=typeof b&&null!==b&&"undefined"!=typeof b.mobile&&null!==b.mobile&&this.addImage({src:b})},this.onEndResizeHandler=function(a){if(null!==o&&o.onEndResizeHandler(a),null!==n&&n.onEndResizeHandler(a),null!==q)for(var b=0;b<q.length;b++)q[b].onResizeHandler(a)}}function ImStyleDirective(){function a(a,b){var c=a.split(";"),d=b.split(";"),e={};a="";for(var f in d){var g=d[f].split(":");g.length>1&&(e[g[0]]=g[1])}for(var f in c){var g=c[f].split(":");g.length>1&&(e[g[0]]=g[1])}for(var f in e)a+=f+":"+e[f]+";";return a}var b,c={};this.init=function(d){b=d,c.mobile=d.data("mobile-style"),c.desktop=d.data("style"),c.def=d.attr("style"),"undefined"==typeof c.desktop&&(c.desktop=""),"undefined"==typeof c.mobile&&(c.mobile=""),"undefined"==typeof c.def&&(c.def=""),""!==c.desktop&&""!==c.mobile&&(c.mobile=a(c.mobile,c.desktop)),""!==c.mobile&&Magazine.registClass(this)},this.show=function(){this.onSwitchSize(Magazine.device)},this.render=function(){return this},this.release=function(){Magazine.unregistClass(this)},this.onSwitchSize=function(a){a.size<=DeviceSize.MOBILE_LANDSCAPE&&""!==c.mobile?b.attr("style",c.def+c.mobile):b.attr("style",c.def+c.desktop)}}function ImFavoriteDirective(){var a;this.isActive=!1,this.init=function(b){var c=this;a=b,a[0].imFavorite=this,a.on("click",function(){c.isActive?c.deactivate(!0):c.activate(!0)}),this.id=a.data("url"),Magazine.favorites.has(this.id)&&this.activate(),this.description=a.data("description"),this.group=a.data("group")},this.activate=function(b){a.addClass("active"),this.isActive=!0,b===!0&&Magazine.favorites.add([this.id,this.description,this.group])},this.deactivate=function(b){a.removeClass("active"),this.isActive=!1,b===!0&&Magazine.favorites.remove(this.id)},this.render=function(){return this},this.show=function(){},this.pause=function(){},this.release=function(){a[0].imFavorite=null,a.remove(),a=null},this.onSwitchSize=function(a){}}function ImFavoriteViewDirective(){var a;this.isActive=!1,this.init=function(b){if(a=b,a[0].imFavoriteView=this,Magazine.favorites.list.length>0){var c=Magazine.favorites.getListView();for(var d in c){var e=$("<h2 class='im-fav-list-group'>"+d+"</h2>");a.append(e);for(var f in c[d])a.append(c[d][f].view)}}else a.append("<p>U heeft nog geen tips geselecteerd. Voeg tips toe door deze met een ster te markeren.</p>")},this.render=function(){return this},this.show=function(){},this.release=function(){a.remove(),a=null},this.onSwitchSize=function(a){}}function ImShareDirective(){var a;this.generateUrl=!1,this.init=function(b){if(a=b,a[0].imShare=this,this.generateUrl=1==a.data("generate-url"),a.html(""),this.generateUrl){var c=this,d=$("<a href='#' class='button'>"+Translate.getLabel("btn_share")+"</a>");a.append(d),d.on("click",function(b){b.preventDefault(),d.off("click");var e=$("<input class='im-input-magazine-alias' />");a.html(e).append("<br />"),Magazine.getApi().getTokenUrl(function(b){c.token=b.token,e.val(Magazine.social.getUrl(b.token)),e[0].focus(),e[0].select(),"object"==typeof Magazine.social&&a.append(Magazine.social.getButtonViews().join(""))})})}else"undefined"!=typeof Magazine.social&&Magazine.social.getButtonViews().length>0&&a.append(Magazine.social.getButtonViews().join(""))},this.render=function(){return this},this.show=function(){},this.release=function(){a.remove(),a=null},this.onSwitchSize=function(a){}}function ImRssDirective(){var a,b,c,d;this.init=function(e,f){a=e,a[0].imRSS=this,b=a.data("url"),c=a.data("style"),d=a.data("label"),"string"==typeof b&&0!==b.indexOf("http")&&"undefined"!=typeof f&&(b=f.getContentByString(b)),"string"==typeof c&&"undefined"!=typeof f&&(c=f.getContentByString(c))},this.show=function(){a.addClass("loading"),Loader.loadFile(Config.viewer_url+"/partials/rss.html",function(e){Loader.loadXML(b,function(b){for(var f=0;f<b.rss.channel.item.length;f++){b.rss.channel.item[f].first=f%3===0;var g=new JSDate(b.rss.channel.item[f].pubDate);b.rss.channel.item[f].pubDate=g.getFormat(Translate.getLabel("dateformat"))}var h=new StyleModel(c);b.rss.style={title:h.get(["title","rss_title"]),paragraph:h.get(["paragraph","rss_paragraph"]),button:h.get(["button"]),date:h.get(["date"]),background:h.get(["background"]),odd_background:h.get("odd_background")},b.rss.label=d,a.html(Hogan.compile(e.response).render(b.rss)),a.removeClass("loading"),a.children().each(function(a){a%2===0&&$(this).attr("style",b.rss.style.odd_background)})},function(){a.addClass("error"),Magazine.isPreview&&Magazine.showPopupScreen("preview",function(a,b){_self.popupContainer.hide()},{title:"Access Denied",description:"We couldn't reach "+b+". This can happen when it's not allowed to retrieve a feed from a different domain. To give your issue access to the feed make sure you set the correct Allow-Access-Control-Header."})})})}}function ImParallaxDirective(){"use strict";var a,b,c,d,e=!1,f=!0;this.init=function(e,f){d=f,a=e,a[0].imParallax=this,b=a.attr("im-will-appear"),c=a.attr("im-did-disappear"),void 0!==b&&"function"!=typeof b&&"undefined"!=typeof d&&(b="function"!=typeof d[b]?d.getContentByString(b):d[b]),void 0!==c&&"function"!=typeof c&&"undefined"!=typeof d&&(c="function"!=typeof d[c]?d.getContentByString(c):d[c])},this.show=function(){},this.render=function(){return this},this.release=function(){},this.isFirstView=function(){return f},this.onScroll=function(){this.checkVisibility()},this.onResizeHandler=function(){this.checkVisibility()},this.willAppear=function(){"function"==typeof b&&b.apply(a[0]),e=!0},this.didDisappear=function(){"function"==typeof c&&c.apply(a[0]),e=!1},this.checkVisibility=function(){a.offset().top<=Magazine.pages.height&&a.offset().top>=-a.height()?e===!1&&(this.willAppear(),f=!1):e===!0&&f===!1&&this.didDisappear()}}function ImGalleryDirective(){"use strict";var a,b,c,d,e=0,f=null;this.init=function(e,f){return b=f,c=[],a=e,e.addClass("im-gallery-directive"),a[0].imGallery=this,d=a.data("media"),"string"==typeof d&&void 0!==b&&(d=b.getContentByString(d)),d===!1&&(d=a.data("media")),this.render(),this.jumpTo(0,null,!1),this},this.getContentByString=function(a){return c[a]},this.getCurrent=function(){return e},this.up=function(){this.jumpTo(e+1,"next")},this.down=function(){this.jumpTo(e-1,"prev")},this.jumpTo=function(b,d,f){if(void 0!==c&&0!==c.length){void 0===f&&(f=!0);var g=b%c.length,h=e;b<0&&(g=c.length+b),g>e&&(void 0===d||null===d)?d="next":void 0===d&&(d="prev"),$(a.children()[g]).show().addClass("current"),f&&$(a.children()[g]).startAnimation(d+"In"),g!==e&&(a.children()[h].imMedia.pause(),f?$(a.children()[h]).startAnimation(d+"Out",{},function(a){a.removeClass("current")}):$(a.children()[h]).removeClass("current"),"function"==typeof this.onChange&&this.onChange(g,e,d),e=g)}},this.setMedia=function(a){this.release(),c=[],d=a,this.render()},this.render=function(){if(null===d||void 0===d)return this;var b,e,g,h,i,j=0,k=this;for(b=0;b<d.length;b++)Object.propertyIsSet(d[b],"video")&&d[b].video.id||Object.propertyIsSet(d[b],"youtube")&&d[b].youtube.id?(e=d[b].youtube||d[b].video,void 0!==e.settings&&null!==e.settings&&0!==e.settings.length||(e.settings={}),e.settings.autoresize=!0,e.index=j++,e.description=d[b].description,c.push(e)):(Object.propertyIsSet(d[b],"alt_image")||Object.propertyIsSet(d[b],"image"))&&(g=d[b].alt_image||d[b].image,g.index=j++,g.description=d[b].description,c.push(g));return void 0!==c&&c.length>0&&(a.html(Hogan.compile(ImGalleryDirective.VIEW).render(c)),f=a.scanDirectives(this),c.length>0&&(h=$("<a class='im-gallery-nav im-gallery-nav-next'><span class='im-sp im-sp-arrow-right'></span></a>"),i=$("<a class='im-gallery-nav im-gallery-nav-prev'><span class='im-sp im-sp-arrow-left'></span></a>"),a.append(h).append(i),i.on("click",function(){k.down()}),h.on("click",function(){k.up()}))),this},this.pause=function(){if(null!==typeof f)for(var a=0;a<f.length;a++)f[a].imMedia.pause()},this.release=function(){if(a.find(".im-gallery-nav").off("click"),null!==f)for(var b=0;b<f.length;b++)f[b].imMedia.release();e=0,f=null,c=void 0,a.html("")},this.onEndResizeHandler=function(a){if(null!==f)for(var b=0;b<f.length;b++)f[b].imMedia.onEndResizeHandler(a)}}function Video(a,b,c,d){function e(){if(c&&"undefined"==typeof c.length&&"undefined"!=typeof c?"undefined"==typeof c.getYoutubeSettings&&(c=new VideoSettings(c)):(c=new VideoSettings,n.data("autoplay")&&(c.autoplay=parseInt(n.data("autoplay")))),r=!!c.loop,"object"==typeof b){if(o=b,"undefined"!=typeof o.thirdparty_id&&(null===o.thirdparty_id||0===o.thirdparty_id.length))return void v();"undefined"!=typeof o.thirdparty_id&&(o.id=o.thirdparty_id)}n.html(""),c.is_background&&(c.html5=1,c.autoplay=0,n.append("<div class='background-image im-video-overlay' style='display: block;'></div>")),b||(b=n.data("video-id")),null==o&&"object"!=typeof b?(o={},o.id=b):"object"==typeof b&&(o=b,"object"==typeof o.settings&&null!==o.settings&&$.extend(c,o.settings)),Magazine.device.isOnline&&("iframe"===b.type?B():"npo"===b.type?A():"vidyard"===b.type?w():"source"===o.type?v():isNaN(o.id)?"wistia"===o.id.substring(0,6)||"wistia"===o.type?z():x():y())}function f(a,b){return p||q.push({action:a,params:b}),p}function g(){var a="ytplayer"+m.videoplayerId;setTimeout(function(){if(n.append("<div id='"+a+"'></div>"),c.playerapiid=a,k=new YT.Player(a,{height:"100%",width:"100%",wmode:"opaque",videoId:o.id,playerVars:c.getYoutubeSettings(),events:{onReady:i,onStateChange:j,onError:h}}),Magazine.device.OS===DeviceOS.IOS_MAC){var b=document.getElementById(a);b.src=b.src.replace("youtube.com","youtube-nocookie.com")}},100)}function h(a){u=!0}function i(a){if(!p){IMVideoControls.add(m),m.supportSound?m.setVolume(Magazine.soundControl.volume):m.mute(),p=!0,c.background_cover&&"im"!=m.type&&m.onEndResizeHandler(Magazine.device),c.autoresize&&m.onEndResizeHandler(Magazine.device),"function"==typeof d&&d.apply(m,[{data:VideoEvent.READY}]);for(var b=0;b<q.length;b++){var e=q[b];e.action.apply(null,e.params)}q=[]}}function j(a){"function"==typeof d&&d.apply(m,[a]),a.data===VideoEvent.ENDED?(t=!1,c.is_background||Magazine.tracker.trackEvent("Videos","ended",o.id),"youtube"===m.type?m.getLoop()?m.play(0):m.stop():m.supportSound&&Magazine.soundControl.unregist(this)):a.data===VideoEvent.PAUSED?(t=!1,c.is_background||Magazine.tracker.trackEvent("Videos","paused",o.id)):a.data===VideoEvent.BUFFERING?c.is_background||Magazine.tracker.trackEvent("Videos","buffering",o.id):a.data===VideoEvent.PLAYING?(t=!0,u&&(m.supportSound?m.setVolume(Magazine.soundControl.volume):m.mute(),u=!1),c.is_background||Magazine.tracker.trackEvent("Videos","playing",o.id)):a.data===VideoEvent.UNSTARTED&&(c.is_background||Magazine.tracker.trackEvent("Videos","unstarted",o.id))}var k,l,m=this,n=a,o=null,p=!1,q=[],r=!1,s=!1,t=!1,u=!1;this.supportSound=!0,this.type=null;var v=function(){m.type="im",Video.playerNumber++,m.videoplayerId=Video.playerNumber,n.on("contextmenu",function(a){a.preventDefault()}),k=new IMPlayer(n,o,c),k.init(),k.addEventListener(VideoEvent.READY,function(a){i()}),k.addEventListener(VideoEvent.ENDED,j),k.addEventListener(VideoEvent.PAUSED,j),k.addEventListener(VideoEvent.PLAYING,j),k.addEventListener(VideoEvent.SEEKING,j)},w=function(){Video.playerNumber++,m.videoplayerId=Video.playerNumber,m.type="vidyard",k=new VidYardPlayer,k.addEventListener(VideoEvent.READY,function(){i()}),k.addEventListener(VideoEvent.ENDED,j),k.addEventListener(VideoEvent.PAUSED,j),k.addEventListener(VideoEvent.PLAYING,j),k.addEventListener(VideoEvent.SEEKING,j),k.init(m.videoplayerId,n,o)},x=function(){if(m.type="youtube",Config.is_screenshot)return"string"==typeof o.id&&o.id.indexOf("?")&&(o.id=o.id.split("?")[0]),void n.append("<img src='http://img.youtube.com/vi/"+o.id+"/0.jpg' width='100%' height='100%' />");if(Video.playerNumber++,m.videoplayerId=Video.playerNumber,Video.ready===!1){if(Video.onCompleteHandlers[m.videoplayerId]=m,Video.loading===!1){Video.loading=!0,window.onYouTubeIframeAPIReady&&(window.thirdPartyOnYouTubeIframeAPIReady=window.onYouTubeIframeAPIReady),window.onYouTubeIframeAPIReady=window.onYouTubeReady;var a=document.createElement("script");"https:"!==window.location.protocol?a.src="https://www.youtube.com/iframe_api":a.src="https://www.youtube.com/iframe_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}}else Video.ready&&g()},y=function(){Video.playerNumber++,m.videoplayerId=Video.playerNumber,m.type="vimeo";var a="vimeoplayer"+m.videoplayerId;"yellow"==c.color&&(c.color="AFAFAF");var b={loop:c.loop,autoplay:c.autoplay,portrait:0,byline:c.byline,title:c.showtitle,color:c.color,player_id:a,api:1};if(c.is_background&&(b.background="1"),b=$.param(b),console.log("BACKGROUND",b),l="https:"!=window.location.protocol?"http://player.vimeo.com/video/"+o.id+"?"+b:"https://player.vimeo.com/video/"+o.id+"?"+b,Config.is_screenshot);else{var d=$("<iframe id="+a+' src="'+l+'" width="100%" height="100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>');p=!1,$(d).on("load",function(){return $(this).off("load"),s?void $(this).remove():(k=new VimeoPlayer(d),k.addEventListener(VideoEvent.READY,function(){i()}),k.addEventListener(VideoEvent.ENDED,j),k.addEventListener(VideoEvent.PAUSED,j),k.addEventListener(VideoEvent.PLAYING,j),k.addEventListener(VideoEvent.SEEKING,j),void k.init())}),n.append(d)}},z=function(){if(Config.is_screenshot){var a="//home.wistia.com/medias/"+o.id,b="//fast.wistia.net/oembed?url="+encodeURIComponent(a);$.ajax({url:b,success:function(a){n.html('<img src="'+a.thumbnail_url+'" width="100%" height="100%"/>')}})}else if(Video.playerNumber++,m.videoplayerId=Video.playerNumber,Video.loadedWistia===!1){if(Video.onCompleteWistiaHandlers[m.videoplayerId]=m,Video.loadingWistia===!1){Video.loadingWistia=!0;var c=document.createElement("script");c.src="//fast.wistia.net/static/E-v1.js";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d),$(c).load(function(){onWistiaJSApiReady()})}}else m.wistiaReady()},A=function(){if(Video.playerNumber++,m.videoplayerId=Video.playerNumber,Video.loadedNpo===!1){if(Video.onCompleteNpoHandlers[m.videoplayerId]=m,Video.loadingWistia===!1){Video.loadingWistia=!0;var a=document.createElement("script");a.src="//npoplayer.omroep.nl/csjs/npoplayer-min.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b),$(a).load(function(){onNpoJSApiReady()})}}else m.npoReady()},B=function(){Video.playerNumber++,m.videoplayerId=Video.playerNumber,k=new IframePlayer,k.init({id:o.id,container:n}),i()};this.wistiaReady=function(){m.type="wistia",k=new WistiaPlayer,k.addEventListener(VideoEvent.READY,function(){i()}),k.addEventListener(VideoEvent.ENDED,j),k.addEventListener(VideoEvent.PAUSED,j),k.addEventListener(VideoEvent.PLAYING,j),k.addEventListener(VideoEvent.SEEKING,j),k.init(o.id,m.videoplayerId,n)},this.npoReady=function(){m.type="npo",k=new NpoPlayer,k.addEventListener(VideoEvent.READY,function(){i()}),k.addEventListener(VideoEvent.ENDED,j),k.addEventListener(VideoEvent.PAUSED,j),k.addEventListener(VideoEvent.PLAYING,j),k.addEventListener(VideoEvent.SEEKING,j),k.init({id:o.id,playerId:"npo"+m.videoplayerId,container:n})},this.onReady=function(){g()},this.fadeOut=function(a){TweenMax.to(n.children(":last-child"),.8,{opacity:0,onComplete:function(){"function"==typeof a&&a()}})},this.reset=function(){f(arguments.callee)&&"function"==typeof k.reset&&k.reset()},this.onEndResizeHandler=function(a){if(c.autoresize===!0){if(n.parent().length>0){var b=9*n.parent().width()/16,d=n.parent().height();c.flexible_height?n.css({height:b}):d>b?n.css({"margin-top":(d-b)/2+"px",height:b}):n.css({"margin-top":"",height:"100%"})}}else if(c.background_cover){var e=c.aspect_ratio;if(n.parent().length>0){var f=n.parent().outerWidth(),g=n.parent().outerHeight();if(c.position=c.position||"",f>0&&g>0){var h=f/g,i={};h>=e?(i.width=f,i.height=f/e,i["margin-top"]=(g-i.height)*(c.position.indexOf("top")!==-1?0:c.position.indexOf("bottom")!==-1?1:.5),i["margin-left"]=""):(i.height=g,i.width=g*e,i["margin-left"]=(f-i.width)*(c.position.indexOf("left")!==-1?0:c.position.indexOf("right")!==-1?1:.5),i["margin-top"]=""),n.parent().find(".im-video-overlay").css(i),n.css(i)}}}},this.getContainer=function(){return n},this.cueVideoById=function(a,b,c){k.cueVideoById(a,b,c)},this.loadVideoById=function(a,b,c){k.loadVideoById(a,b,c)},this.seek=function(a,b){f(arguments.callee,[a,b])&&k.seekTo(a,b)},this.stop=function(){f(arguments.callee)&&(m.supportSound&&Magazine.soundControl.unregist(this),k.stopVideo())},this.pause=function(){f(arguments.callee)&&(m.supportSound&&Magazine.soundControl.unregist(this),"youtube"===m.type&&0===m.getCurrentTime()?k.stopVideo():k.pauseVideo(),t=!1)},this.isPlaying=function(){return t},this.next=function(){
f(arguments.callee)&&k.nextVideo()},this.previous=function(){f(arguments.callee)&&k.previousVideo()},this.clear=function(){f(arguments.callee)&&(Magazine.soundControl.ended(this),k.clearVideo())},this.play=function(a,b){f(arguments.callee,[a,b])&&(t=!0,m.supportSound&&Magazine.soundControl.regist(m),"undefined"!=typeof b?k.playVideoAt(b):"undefined"==typeof a?k.playVideo():(m.seek(a),k.playVideo()))},this.forcePause=function(){try{k.pauseVideo()}catch(a){}},this.mute=function(){f(arguments.callee)&&k.mute()},this.unmute=function(){f(arguments.callee)&&k.unmute()},this.isMuted=function(){return k.isMuted()},this.setVolume=function(a){f(arguments.callee,[a])&&k.setVolume(a)},this.getVolume=function(){return k.getVolume()},this.setSize=function(a,b){if(f(arguments.callee,[a,b]))return $.isFunction(k.setSize)?"undefined"==typeof a?k.setSize(n.width(),n.height()):k.setSize(a,b):k},this.getPlaybackRate=function(){return k.getPlaybackRate()},this.setPlaybackRate=function(a){f(arguments.callee,[a])&&k.setPlaybackRate(a)},this.getAvailablePlaybackRates=function(){return k.getAvailablePlaybackRates()},this.setLoop=function(a){f(arguments.callee,[a])&&(r="boolean"!=typeof a?!!parseInt(a):a,k.setLoop(a))},this.getLoop=function(){return r},this.setShuffle=function(a){f(arguments.callee,[a])&&k.setShuffle(a)},this.getVideoLoadedFraction=function(){return k.getVideoLoadedFraction()},this.getVideoStartBytes=function(){return k.getVideoStartBytes()},this.getPlayerState=function(){return k&&k.getPlayerState?k.getPlayerState():-1},this.getCurrentTime=function(){return 1e3*k.getCurrentTime()},this.getPlaybackQuality=function(){return k.getPlaybackQuality()},this.setPlaybackQuality=function(a){f(arguments.callee,[a])&&k.setPlaybackQuality(a)},this.getAvailableQualityLevels=function(){return k.getAvailableQualityLevels()},this.getDuration=function(){return k.getDuration()},this.getVideoUrl=function(){return k.getVideoUrl()},this.getVideoEmbedCode=function(){return k.getVideoEmbedCode()},this.getPlayList=function(){return k.getPlaylist()},this.getPlaylistIndex=function(){return k.getPlaylistIndex()},this.addEventListener=function(a,b){f(arguments.callee,[a,b])&&k.addEventListener(a,b)},this.release=function(){try{m.supportSound&&Magazine.soundControl.unregist(this),c.background_cover&&n.css({top:"",left:"","margin-left":"","margin-top":""}),void 0!==k&&(k.destroy(),s=!0),IMVideoControls.clear(m)}catch(a){Console.error(a)}},e()}function VideoSettings(a){function b(){Magazine.device.browser==DeviceBrowser.FIREFOX,void 0!==a&&$.extend(this,a)}var c=this;this.aspect_ratio=1.7777777778,this.getYoutubeSettings=function(){return{noapp:"1",byline:c.byline,showtitle:c.showtitle,autoplay:c.autoplay,autohide:c.autohide,color:c.color,controls:c.controls,disablekb:c.disablekb,enablejsapi:c.enablejsapi,iv_load_policy:c.iv_load_policy,cc_load_policy:c.cc_load_policy,modestbranding:"1",fs:c.fs,loop:c.loop,rel:c.rel,showinfo:c.showinfo,start:c.start,end:c.end,theme:c.theme,html5:c.html5,playerapiid:c.playerapiid,suggestedQuality:"hd720"}},this.byline=0,this.showtitle=0,this.autoplay=0,this.autohide=1,this.cc_load_policy=0,this.color="yellow",this.controls=1,this.disablekb=0,this.enablejsapi=1,this.end=null,this.modestbranding=1,this.fs=1,this.iv_load_policy=3,this.loop=0,this.origin=("https:"===document.location.protocol?"https://":"http://")+window.location.hostname,this.playerapiid=null,this.playlist=null,this.rel=0,this.showinfo=0,this.start=null,this.theme=Assets.video.theme,this.html5=Magazine.device.browser===DeviceBrowser.IE?0:1,b()}function onYouTubeReady(){Video.ready=!0,Video.loading=!1;for(var a in Video.onCompleteHandlers)Video.onCompleteHandlers[a].onReady();Video.onCompleteHandlers={},window.thirdPartyOnYouTubeIframeAPIReady&&thirdPartyOnYouTubeIframeAPIReady()}function onWistiaJSApiReady(){Video.loadingWistia=!1,Video.loadedWistia=!0;for(var a in Video.onCompleteWistiaHandlers)Video.onCompleteWistiaHandlers[a].wistiaReady();Video.onCompleteWistiaHandlers={}}function onNpoJSApiReady(){Video.loadingNpo=!1,Video.loadedNpo=!0;for(var a in Video.onCompleteNpoHandlers)Video.onCompleteNpoHandlers[a].npoReady();Video.onCompleteNpoHandlers={}}function NpoPlayer(){var a,b=[],c=function(a,c){for(var e in b)b[e].event==a&&b[e].action.apply(d,[c])},d={init:function(b){b.settings=b.settings||{},b.container.append("<div id='"+b.playerId+"'></div>"),a=npoplayer(b.playerId),a.setup({id:b.id,width:"100%",aspectratio:"16:9",options:{titlebar:{enabled:!1},autoPlay:b.settings.autoplay,start:b.settings.start,end:b.settings.end}}),"function"==typeof a.on?a.on("ready",function(){c(VideoEvent.READY,{data:VideoEvent.READY}),a.on("play",function(a){c(VideoEvent.PLAYING,{data:VideoEvent.PLAYING})}),a.on("pause",function(){c(VideoEvent.PAUSED,{data:VideoEvent.PAUSED})}),a.on("seek",function(){c(VideoEvent.SEEKING,{data:VideoEvent.SEEKING})})}):"function"==typeof a.playerReady&&a.playerReady(function(){c(VideoEvent.READY,{data:VideoEvent.READY})})},playVideo:function(){a.play()},nextVideo:function(){},mute:function(){a.setMute(!0)},setVolume:function(b){a.setVolume(b)},getVolume:function(b){return a.getVolume()},isMuted:function(){return a.getMute()},unmute:function(){a.setMute(!1)},previousVideo:function(){},stopVideo:function(){a.pause()},clearVideo:function(){},setPlaybackQuality:function(){},getPlaybackQuality:function(){},getPlayerState:function(){return a.getState()},loadVideoById:function(){},cueVideoId:function(){},start:function(){},setLoop:function(a){},destroy:function(){b=[],b=null},pauseVideo:function(){try{a.pause()}catch(a){Console.log(a)}},getDuration:function(){return a.getDuration()},getCurrentTime:function(){return a.getPosition()},seekTo:function(b){a.seek(b/1e3)},addEventListener:function(a,c){b.push({event:a,action:c})}};return d}function IframePlayer(){var a,b={init:function(b){a=b,b.container.html('<iframe class="npo_cc_social npo_cc_processed" frameborder="0" src="'+b.id+'" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" style="width:100%; height: 100%;"></iframe>')},playVideo:function(){b.init(a)},nextVideo:function(){},mute:function(){},setVolume:function(a){},getVolume:function(a){return 0},isMuted:function(){return _player.getMute()},unmute:function(){_player.setMute(!1)},previousVideo:function(){},stopVideo:function(){a.container&&a.container.children().remove()},clearVideo:function(){a.container&&a.container.childern().remove()},reset:function(){null!==a.container&&"object"==typeof a.container&&0===a.container.find("iframe").length&&b.init(a)},setPlaybackQuality:function(){},getPlaybackQuality:function(){},getPlayerState:function(){},loadVideoById:function(){},cueVideoId:function(){},start:function(){},setLoop:function(a){},destroy:function(){void 0!==a.container&&a.container.children().remove()},pauseVideo:function(){a.container&&a.container.children().remove()},getDuration:function(){return 0},getCurrentTime:function(){return 0},seekTo:function(a){}};return b}function IMPlayer(a,b,c){var d,e=this,f=Hogan.compile('<video id="{{id}}" class="video-js vjs-fill vjs-big-play-centered" preload="auto" poster="{{poster}}"></video>'),g=Hogan.compile("<source src='{{url}}{{params}}' type='{{mime_type}}' />"),h=[],i=function(){return b.image&&!b.poster&&(b.poster=b.image),{id:b.playerId,poster:"object"==typeof b.poster&&null!==b.poster&&(Config.is_preview?"":Config.magazine_url)+b.poster.uri,setup:{controls:c.controls||"1",autoplay:c.autoplay||!1,preload:c.preload||"auto",loop:c.loop||!1,start:c.start||null,end:c.end||null}}},j=function(a){var b={url:a,mime_type:""};return a.indexOf(".mp4")?b.mime_type="video/mp4":a.indexOf(".ogv")?b.mime_type="video/ogg":a.indexOf(".webm")&&(b.mime_type="video/webm"),b},k=function(a,b){for(var c=0;c<h.length;c++)h[c].event==a&&h[c].action.apply(e,[b])};this.init=function(){if(b.video_urls){b.source||(b.source=[]);for(var c=0;c<b.video_urls.length;c++)b.source.push(b.video_urls[c].url)}Loader.loadCss(Config.script_url+"/video.js/dist/video-js.min.css"),imIncludeJs(Config.script_url+"/video.js/dist/video.min.js",function(){b.playerId="implayer-"+IMPlayerID++;var c=i(),e=$(f.render(c));a.append(e);for(var h=0;h<b.source.length;h++)b.source[h]&&e.append(g.render(j(b.source[h])));videojs(b.playerId).ready(function(){d=this;for(var a in c.setup)"function"==typeof d[a]&&d[a](c.setup[a]);d.on("play",function(){k(VideoEvent.PLAYING,{data:VideoEvent.PLAYING})}),d.on("pause",function(){k(VideoEvent.PAUSED,{data:VideoEvent.PAUSED})}),d.on("seek",function(){k(VideoEvent.SEEKING,{data:VideoEvent.SEEKING})}),d.on("ended",function(){k(VideoEvent.SEEKING,{data:VideoEvent.ENDED})}),k(VideoEvent.READY,{data:VideoEvent.READY})})})},this.destroy=function(){d.pause(),d.off(),d=void 0,a.children().remove()},this.addEventListener=function(a,b){h.push({event:a,action:b})},this.playVideo=function(){d.play()},this.playVideoAt=function(a){e.seekTo(a),d.play()},this.seekTo=function(a){d.currentTime=a},this.stopVideo=function(){d.pause(),d.currentTime=0},this.pauseVideo=function(){d.pause()},this.mute=function(){d.muted=!0},this.setVolume=function(a){d.volume(.01*a)},this.getVolume=function(){return 100*d.volume()},this.getPlayerState=function(){},this.getCurrentTime=function(){return d.currentTime/1e3},this.setSize=function(){},this.setPlaybackQuality=function(a){},this.getPlaybackRate=function(){},this.setPlaybackRate=function(){},this.getAvailablePlaybackRates=function(){},this.setLoop=function(a){"boolean"!=typeof a&&(a=!!parseInt(a))},this.getVideoLoadedFraction=function(){}}function WistiaPlayer(){function a(a,b){for(var c in f)f[c].event==a&&f[c].action.apply(e,[b])}var b,c,d=!1,e=this,f=[];this.metaInfo={position:0},this.init=function(d,e,f){c=e;var g=$('<div id="wistia_'+c+'" style="height:100%; width:100%;" data-video-width="100%" data-video-height="100%"></div>');f.html(g);try{setTimeout(function(){b=Wistia.embed(d,{container:"wistia_"+c,height:"100%",width:"100%","video-width":"100%","video-height":"100%",autoPlay:!1,videoFoam:!0}),b.bind("play",function(){a(VideoEvent.PLAYING,{data:VideoEvent.PLAYING})}),b.bind("pause",function(){a(VideoEvent.PAUSED,{data:VideoEvent.PAUSED})}),b.bind("seek",function(){a(VideoEvent.SEEKING,{data:VideoEvent.SEEKING})}),b.ready(function(){a(VideoEvent.READY,{data:VideoEvent.READY})})},2e3)}catch(a){Console.error(a)}},this.playVideo=function(){b.play()},this.nextVideo=function(){},this.mute=function(){d=100*b.volume(),b.volume(0)},this.setVolume=function(a){b.volume(a/100)},this.getVolume=function(a){return 100*b.volume()},this.isMuted=function(){return d!==!1},this.getVolume=function(){return 100*b.volume()},this.unmute=function(){var a=100;d!==!1&&(a=d),d=!1,a=(a/100).toFixed(2),b.volume(a)},this.previousVideo=function(){},this.stopVideo=function(){b.pause()},this.clearVideo=function(){},this.setPlaybackQuality=function(){},this.getPlaybackQuality=function(){},this.getPlayerState=function(){return b.state()},this.loadVideoById=function(){},this.cueVideoId=function(){},this.start=function(){},this.setLoop=function(a){},this.destroy=function(){b.unbind("pause end heightchange pause play secondchange seek timechange volumechange widthchange"),b.remove(),f=[],f=null,e=null,$(b).remove(),b=null},this.pauseVideo=function(){try{b.pause()}catch(a){Console.log(a)}},this.getDuration=function(){return 1e3*b.duration},this.getCurrentTime=function(){return 1e3*b.time()},this.seekTo=function(a){b.time(a/1e3)},this.addEventListener=function(a,b){f.push({event:a,action:b})}}function VidYardPlayer(){function a(a,b){for(var c in h)h[c].event==a&&h[c].action.apply(g,[b])}function b(){imIncludeJs("//play.vidyard.com/"+f.id+".js?v=3.1.1&type=inline&width=100%25&height=100%25",function(){var b=new Vidyard.players;e=b[f.id],e.on("play",function(){a(VideoEvent.PLAYING,{data:VideoEvent.PLAYING})}),e.on("pause",function(){a(VideoEvent.PAUSED,{data:VideoEvent.PAUSED})}),e.on("ready",function(){$(".vidyard_iframe",c).parent().width("100%").height("100%"),setTimeout(function(){$(".vidyard_iframe",c).parent().width("100%").height("100%")},100),a(VideoEvent.READY,{data:VideoEvent.READY})}),e.on("seek",function(b){a(VideoEvent.SEEKING,{data:VideoEvent.SEEKING})}),e.on("playerComplete",function(b){a(VideoEvent.ENDED,{data:VideoEvent.ENDED})})},"vidyard_embed_code_"+f.id,c)}var c,d,e,f,g,h=[];this.init=function(a,b,d){return f=d,c=b[0],g=this,0===VidYardPlayerLoadState?(VidYardPlayerLoadState=1,imIncludeJs("//play.vidyard.com/v0/api.js",function(){if(VidYardPlayerLoadState=2,VidYardPlayerLoadReadyHandler.length>0){for(var a=0;a<VidYardPlayerLoadReadyHandler.length;a++)VidYardPlayerLoadReadyHandler[a].onApiReady();VidYardPlayerLoadReadyHandler=[]}g.onApiReady()})):1===VidYardPlayerLoadState?VidYardPlayerLoadReadyHandler.push(this):g.onApiReady(),g},this.onApiReady=function(){b()},this.playVideo=function(){e.play()},this.nextVideo=function(){},this.mute=function(){},this.setVolume=function(a){e.setVolume(a)},this.getVolume=function(a){},this.isMuted=function(){return d!==!1},this.getVolume=function(){},this.unmute=function(){var a=100;d!==!1&&(a=d),d=!1,e.setVolume((a/100).toFixed(2))},this.previousVideo=function(){},this.stopVideo=function(){e.pause()},this.clearVideo=function(){},this.setPlaybackQuality=function(){},this.getPlaybackQuality=function(){},this.getPlayerState=function(){return e.state()},this.loadVideoById=function(){},this.cueVideoId=function(){},this.start=function(){},this.setLoop=function(a){},this.destroy=function(){e.off("pause"),e.off("play"),e.off("ready"),e.off("playerComplete"),e.off("seek"),$(c).html(""),h=null,g=null,e=null},this.pauseVideo=function(){try{e.pause()}catch(a){Console.log(a)}},this.getDuration=function(){return 1e3*e.duration},this.getCurrentTime=function(){return 1e3*e.currentTime()},this.seekTo=function(a){e.seek(a/1e3)},this.addEventListener=function(a,b){h.push({event:a,action:b})}}function VimeoPlayer(a){function b(a,b){for(var c in i)i[c].event==a&&i[c].action.apply(h,[b])}function c(b,c){var d={method:b};c&&(d.value=c);var e=a[0].contentWindow.postMessage(JSON.stringify(d),g);return e}var d=!1,e=$(a).attr("id"),f=$(a).attr("src"),g="*",h=this,i=[];this.metaInfo={position:0},this.init=function(){window.addEventListener?window.addEventListener("message",j,!1):window.attachEvent("onmessage",j,!1),c("addEventListener","pause"),c("addEventListener","play"),c("addEventListener","finish"),c("addEventListener","playProgress"),c("addEventListener","seek"),b(VideoEvent.READY,{data:VideoEvent.READY})};var j=function(a){var c;try{if(c=JSON.parse(a.data),c.player_id!=e)return}catch(a){return}switch("*"===g&&(g=a.origin),c.event){case"ready":c.data=VideoEvent.READY,b(VideoEvent.READY,c);break;case"playProgress":h.metaInfo={duration:c.data.duration,percent:c.data.percent,position:c.data.seconds};break;case"seek":c.data=VideoEvent.SEEKING,b(VideoEvent.SEEKING,c);break;case"play":c.data=VideoEvent.PLAYING,b(VideoEvent.PLAYING,c);break;case"pause":c.data=VideoEvent.PAUSED,b(VideoEvent.PAUSED,c);break;case"finish":c.data=VideoEvent.ENDED,b(VideoEvent.ENDED,c)}};this.playVideo=function(){c("play")},this.nextVideo=function(){},this.mute=function(){d=this.getVolume(),c("setVolume",.001)},this.setVolume=function(a){a=parseInt(a),c("setVolume",Math.max(.001,parseFloat(a/100)))},this.getVolume=function(a){return parseInt(100*c("getVolume"))},this.isMuted=function(){return d!==!1},this.getVolume=function(){return c("getVolume")},this.unmute=function(){var a=100;d!==!1&&(a=d),c("setVolume",Math.max(.001,a/100)),d=!1},this.previousVideo=function(){},this.stopVideo=function(){c("unload")},this.clearVideo=function(){c("unload")},this.setPlaybackQuality=function(){},this.getPlaybackQuality=function(){},this.getPlayerState=function(){},this.loadVideoById=function(){},this.cueVideoId=function(){},this.start=function(){},this.setLoop=function(a){c("setLoop",!!a)},this.destroy=function(){c("unload"),i=[],window.addEventListener?window.removeEventListener("message",j,!1):window.detachEvent("onmessage",j),i=null,h=null,e=null,f=null,$(a).remove(),a=null},this.pauseVideo=function(){c("pause")},this.getDuration=function(){return h.metaInfo.duration},this.getCurrentTime=function(){return h.metaInfo.position},this.seekTo=function(a){c("seekTo",.001*a)},this.addEventListener=function(a,b){i.push({event:a,action:b})}}function PopupContainer(){function a(){return x==DeviceType.DESKTOP&&p.type==DeviceType.MOBILE?e():x==DeviceType.MOBILE&&p.type==DeviceType.DESKTOP&&d(),l}function b(a){Loader.load({files:[{name:"Popup",file:Config.themePathView+Config.theme+"/Popup.html",type:LoadType.STRING}],callback:function(b){n=!0,t=b.response,jQuery.isFunction(a)&&a()}})}function c(a){Loader.load({files:[{name:"Popup",file:Config.themePathView+Config.theme+"/PopupMobile.html",type:LoadType.STRING}],callback:function(b){n=!0,u=b.response,jQuery.isFunction(a)&&a()}})}function d(){x=DeviceType.DESKTOP,k.html(Hogan.compile(t).render()),jQuery(".close-button",k).off(),jQuery(".close-button",k).on("click",function(){r.hide()}),m=jQuery("#popupContainer",k),l=jQuery("#popupContainer #popupContent",k),w.show()}function e(){x=DeviceType.MOBILE,k.html(Hogan.compile(u).render()),jQuery(".close-button",k).off(),jQuery(".close-button",k).on("click",function(){r.hide()}),m=jQuery("#popupContainer",k),l=jQuery("#popupContainer #popupContent",k),w.hide()}function f(){jQuery("a",m).on("click",function(a){var b=$(this).data("action");b&&i(b,this)})}function g(){jQuery("a",m).not(".close-button").off("click")}function h(b,c){var d=!1,e=b.getData(),f=setTimeout(function(){Console.error("Takes more then 4000ms to load popup"),d=!0,c()},1e4),g=a();k.find(".popup").removeClass("show"),k.attr("class",""),"fullscreen"===b.layout?(g&&g.parent().removeClass("alignMiddle"),k.addClass("im-overlay-1")):(g&&g.parent().addClass("alignMiddle"),k.removeClass("im-overlay-1")),b.overlayId&&k.addClass("overlay-"+b.overlayId);var h=b.getWidth(),i=setInterval(function(){if(g=l,h=b.getWidth(),w=$(".transparent_overlay",k),"undefined"!=typeof g){if(clearInterval(i),h&&x==DeviceType.DESKTOP?(isNaN(h)||(h+="px"),g.parent().css("max-width",b.getWidth())):g.parent().css("max-width",""),b.useHtml()){try{g.html(b.getHtml())}catch(a){}s=new PopupController,b.controller=s}else g.html(j().title(b.getTitle())+j().description(b.getDescription()));e.canClose===!1?k.find(".close-button").hide():k.find(".close-button").show(),g.find(".dynamicForm").each(function(){Console.log("Subpage: Create form"),new DynamicForm(null,$(this))}),g.find("iframe").each(function(){var a=$(this).attr("src");/w.soundcloud.com/.test(a)&&A.push(new Magazine.media.soundcloud.player(this))}),g.find(".video").length>0?g.parent().addClass("im-ts-video-overlay"):g.parent().removeClass("im-ts-video-overlay");var a=0;g.find("img").each(function(){0===$(this).height()&&($(this).one("load",function(){a--,0==a&&(d||(clearTimeout(f),c(g)))}),a++)}),k.scanDirectives(),0==a&&(clearTimeout(f),c(g))}},200)}function i(a,b){o&&null!=p&&p.onActionHandler(a,b)}function j(){return p.type==DeviceType.DESKTOP?Assets.popup:Assets.popup.mobile}var k,l,m,n=!1,o=!1,p=!1,q=[],r=this,s=null,t=null,u=null,v=!1,w=null,x=DeviceType.DESKTOP,y=null,z=!1,A=[];this.init=function(a){k=jQuery("#overlay"),w=$(".transparent_overlay",k),b(function(){c(function(){Magazine.device.size<DeviceSize.PORTRAIT?e():d(),jQuery.isFunction(a)&&a()})})},this.show=function(a){if(Console.log("SHOW POPUP"),!n)return void Console.error("Still building up popupContainer. Wait till it's done.");if(w=$(".transparent_overlay",k),w.off("click"),w.on("click",function(){var b=a.getData();b.canClose!==!1&&a.hide()}),o){if(p.getId()==a.getId())return;q.push(p),q.push(a),v?z=!0:r.hide()}else o=!0,v=!0,p=a,k.show().css("visibility","hidden"),h(a,function(b){function c(){if(v=!1,k.find(".popup").addClass("show"),k.find(".video").length>0){var a=[];k.find(".video").each(function(){a.push(new Video(jQuery(this)))}),s&&s.setVideos(a)}z?(z=!1,r.hide()):f(),k.find(".close-button").focus(),z=!1}k.css("visibility",""),w.length>0&&TweenMax.to(w[0],.8,{css:{opacity:.65},ease:Expo.easeOut}),IMVideoControls.pause(),Magazine.device.supportsAnimations()?m.startAnimation(j().showAnimation,{ease:j().showAnimationEase},c):y=setTimeout(function(){c()},500),"function"==typeof a.onShow&&a.onShow(b),s&&s.init(l),"overlay-video"===a.screen&&k.addClass("overlay-video"),r.onResizeHandler();try{var d=k.find(".popup")[0];d.clientWidth<d.offsetWidth}catch(a){}})},this.onResizeHandler=function(a){if(p.type===DeviceType.DESKTOP){var b=k.find(".top-button-bar");if("fullscreen"!==p.layout){var c=Magazine.pages.height-100,d=k.find("#popupContent");d.innerHeight()>c?d.parent().css({"-ms-overflow-y":"scroll","overflow-y":"scroll","-webkit-overflow-scrolling":"touch",height:c}):d.parent().css({"-ms-overflow-y":"visible","overflow-y":"visible","-webkit-overflow-scrolling":"auto",height:"auto"});var e=$(".popup",k),f=e.height(),g=e.width(),h=Math.min(Assets.maxHeight,Magazine.device.screen.height);e.css("top",Math.max(0,.5*h-.5*f)+"px"),"overlay-video"!==p.screen?b.css({top:Math.max(0,.5*h-.5*f+15)+"px",right:.5*(Math.min(Assets.maxWidth,Magazine.device.screen.width)-g)+15+"px"}):b.css({top:Math.max(0,.5*h-.5*f-30)+"px",right:.5*(Math.min(Assets.maxWidth,Magazine.device.screen.width)-g)+"px"})}else $(".popup",k).attr("style",""),b.css({top:"20px",right:"20px"})}else{var i=$(".top_header",k).outerHeight();k.find(".scroller").css({height:Magazine.pages.height-i+"px"}),"fullscreen"!==p.layout&&$(".popup",k).attr("style","")}},this.hide=function(a,b){function c(){v=!1,0==q.length?(l.html(),k.hide()):q.length>0&&r.show(q.pop()),jQuery.isFunction(a)&&a(d)}var d=p;if(p){if(A.length>0){for(var e in A)A[e].destroy();A=[]}if("undefined"==typeof b||d.getId()==b)s&&(s.close(),s=null,"function"==typeof p.onCloseHandler&&p.onCloseHandler()),v&&m.abortAnimation(),g(),IMVideoControls.resume(),v=!0,w.length>0&&TweenMax.to(w[0],.8,{css:{opacity:0},ease:Expo.easeOut}),p=!1,o=!1,$($(m)[0]).find(".im-ts-overlay").scrollTop(0),Magazine.device.supportsAnimations()?m.startAnimation(Animation.scaleUpOut,{ease:j().hideAnimationEase},c):c();else for(var e in q)if(q[e].getId()==b)return q.splice(e,1),void(jQuery.isFunction(a)&&a(d))}},this.isVisible=function(){return o}}function PopupController(){var a=this,b=null,c=null,d=null;this.container=null,this.init=function(b){a.container=b,Magazine.device.supports("overflow-scroll")||a.container.find(".scroller").each(function(a){var b=$(this),c=new ScrollY;c.init(b)})},this.pushPage=function(b,e){d=e,null==c&&(c=[]),b.init(a),b.load(function(){b.render(),b.show()}),c.push(b)},this.popPage=function(){var a=c.pop();$.isFunction(d)&&(d(),d=null),a.destroy(),a=void 0},this.setVideos=function(a){b=a},this.close=function(){if(b)for(var a in b)b[a].release();if(c)for(var d in c)c[d].hide()}}function Popup(a){var b=this,c=!1,d=!1,e=!1,f=!1,g=null,h=!1,i=Popup.id++,j=null,k=null;this.controller,this.onCloseHandler,"undefined"==typeof a&&(a=Magazine.device.size<DeviceSize.PORTRAIT?DeviceType.MOBILE:DeviceType.DESKTOP),this.type=a,this.setHtml=function(a){return c=a,f=!0,b},this.getHtml=function(){return c},this.setWidth=function(a){d=a},this.getWidth=function(a){return d},this.onActionHandler=function(a,c){null!=k&&k(b,a,c)},this.cancelConnection=function(){j&&j.abort()},this.setScreen=function(a,d,e){"undefined"==typeof d&&Console.error("No callback given"),"undefined"!=typeof e&&(k=e),this.screen=a,b.type==DeviceType.MOBILE&&(a="mobile/"+a);var g={},h=function(){f=!0,c=g.htmltemplate.render(b.getData()),d(!0)};Loader.load({files:[{page:g,file:Config.popupPathView+a+".html",name:"View"}],callback:h})},this.useHtml=function(a){return"undefined"==typeof a?f:(f=a,b)},this.setTitle=function(a){return e=a,b},this.getTitle=function(){return e},this.setDescription=function(a){return h=a,b},this.getDescription=function(){return h},this.hide=function(a){Magazine.popupContainer.hide(a,b.getId())},this.getId=function(){return i},this.setData=function(a){g=a},this.getData=function(){return null==g?{description:h,title:e}:g},this.html=!1}function PopupListItem(a){if(this.url=null,this.image=null,this.title=null,this.action=null,"undefined"!=typeof a)for(var b in a)this[b]=a[b]}function ScrollY(){function a(a,b,d){c.setPosition(g+b)}function b(a,b,c){}var c=this,d=null,e=null,f=0,g=0;this.init=function(c){c.css("overflow","hidden").children().wrapAll("<div class='scrollercontent' />"),d=c.children(".scrollercontent"),e=new Touch,e.animateOut(!1),e.init(d,TouchOrientation.VERTICAL),e.onTouchStart=function(a){g=f},e.onVerticalDrag=a,e.onTouchEnd=b},this.setPosition=function(a){a>0?(f=0,a=0):f=a,d.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,a,0))}}function ScrollList(){function a(){var a=0,e=d(),f={min:e-500,max:e+p.getHeight()+500},g=[],h=[],i=0,j=null;for(i;i<s;i++){var l=p.getRowHeightForRow(i);if(a+l<f.min)a+=l;else if(j={num:i,position:{min:a}},a+=l,j.position.max=a,o.listenToRowChange&&C!=i&&Math.abs(D[i].min-e)<Math.abs(D[C].min-e)&&c(i),g.push(j),a>f.max)break}var m,n=0;for(var q in t){m=!0;for(var r=0;r<g.length;r++)t[q].rowNumber==g[r].num&&(m=!1,t[q].show(),g.splice(r,1));m&&(h.push({view:t[q],index:q}),t[q].hide()),n++}var u=!1;if(g.length>0)for(i=0;i<g.length;i++){if(h.length>0){var v=h.pop();t[v.index]=null,delete t[v.index],u=v.view,v=null}else u=new k;t["r"+g[i].num]=u,u.rowNumber=g[i].num,u.position=g[i].position,u.setView()}p.useIteration&&b(f)}function b(a){if(p.useIteration){var b=a.min-a.max,c=0;for(var d in t)c=(a.min-t[d].position.min+.5*(t[d].position.min-t[d].position.max))/b,p.iterationHandler(t[d],c,t[d].rowNumber)}}function c(a){C!=a&&(C=a,p.onChangedPosition(C))}function d(){return v?"top"==u?r.scrollTop():r.scrollLeft():w}function e(a,b,c){if(v)w=a,a>0?"top"==u?r.scrollTop(a):r.scrollLeft(a):r.css("padding-"+u,a);else if(Magazine.device.supportsTransform()){var d=0,e=0;"top"==u?e=a*-1:d=a*-1,b===!0?TweenLite.to(q,f(a),{x:d,y:e,onComplete:function(){w=a,l(),clearInterval(B),jQuery.isFunction(c)&&c()},onUpdate:function(a){},onUpdateParams:["{self}"],ease:Cubic.easeIn}):(w=a,TweenLite.set(q,{x:d,y:e}))}else w=a,q.css(u,a*-1);F&&F(a)}function f(a){var b=10,c=50,d=Math.abs(c*b);return d/1e3}function g(){return n-p.getRowHeightForRow(s-1)}function h(){var a=g();w<0?o.position(0,!0):w>a&&o.position(a,!0)}function i(a){E=a-w;var b=g();return a<0?a*=.5:a>b&&(a=.5*(a-b)+b),E=a-w,a}function j(){return"left"==u}function k(){var a=this,b=!1,c=!1;this.rowNumber=null,this.position=null,this.getView=function(){return b},this.setView=function(){try{var c=p.getViewForRow(b,a.rowNumber);Magazine.device.supportsTransform()?"top"==u?c.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,a.position.min,0)):c.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(a.position.min,0,0)):c.css(u,a.position.min),c.addClass("scrolllist-row"),0==b&&q.append(c),c.show(),b=c}catch(a){Console.error(a)}},this.hide=function(){b.hide()},this.show=function(){b.show()},this.release=function(){jQuery("*",b).off(),b&&b.remove(),b=!1,a&&(a.position=null,a.rowNumber=null),c=!0,a=null}}function l(b){a()}function m(a,b){a.preventDefault();var c=g();Magazine.device.OS==DeviceOS.WINDOWS&&(b*=10),o.position(Math.min(c,Math.max(Math.round(100*(w+b*-20))/100,0)))}var n,o=this,p=null,q=null,r=null,s=null,t=[],u="top",v=!1,w=0,x=!1,y=!1,z=null,A=0,B=0,C=0,D=null,E=0,F=null;this.listenToRowChange=!1,this.useScroll=function(a){return"undefined"==typeof a?v:void(v!=a&&(a?(r.css("overflow","scroll").on("scroll",l),q.off(Magazine.device.getCssProperty("animationiteration")),p.onChangedPosition(C)):(r.css("overflow","hidden").off("scroll"),q.on(Magazine.device.getCssProperty("animationiteration"),l)),v=a))},this.getCurrentActiveView=function(){return C},this.setOverflow=function(a){r.css("overflow",a)},this.useMouseScroll=function(a){return"undefined"==typeof a?x:void(x!=a&&(a?r.on("mousewheel",m):r.off("mousewheel",m),x=a))},this.supportTouch=function(a){return"undefined"==typeof a?y:void(Magazine.device.SUPPORT_TOUCH&&y!=a&&(a?(z=new Touch,z.onTouchStart=function(a){A=o.position()},z.onTouchEnd=function(a){h(),p.onChangedPosition(C)},j()?(z.init(r,TouchOrientation.HORIZONTAL),z.onHorizontalDrag=function(a,b,c){o.position(A-b,!1)}):(z.init(r,TouchOrientation.VERTICAL),z.onVerticalDrag=function(a,b,c){o.position(A-b,!1)})):z&&z.release(),y=a))},this.toViewNumber=function(a,b,c){for(var d=0,e=0;e<a;e++)d+=p.getRowHeightForRow(e);o.position(d,b,c)},this.position=function(a,b,c){return clearInterval(B),"undefined"==typeof a?w:(a=i(a),void(a!=w&&(e(a,b&&Magazine.device.supportsTransform(),c),l())))},this.init=function(a,b){p=a,F=b,null==r&&(r=jQuery("<div />")),null==q&&(q=jQuery("<div />")),r.html(q),r.addClass("scrolllist"),r.css("overflow","hidden").off("scroll"),q.on(Magazine.device.getCssProperty("animationiteration"),l);var c=0;D=[];for(var d=0;d<p.getNumberRows();d++)D[d]=new ScrollListRow,D[d].min=c,c+=p.getRowHeightForRow(d),D[d].max=c},this.setOrientation=function(a){"horizontal"==a?u="left":"vertical"==a&&(u="top")},this.load=function(){r.css(u,"0px").css({width:"inherit",height:"inherit",position:"relative"}),q.css("position","absolute"),s=p.getNumberRows(),n=0;for(var b=0;b<s;b++)n+=p.getRowHeightForRow(b);q.height(n),a()},this.release=function(){p=null;for(var a in t)t[a].release();z&&z.release(),t=null,r.off(),r.remove(),r=null,u=null,w=null,n=null},this.toString=function(){return r}}function ScrollListDelegate(){this.getNumberRows=function(){return 10},this.getRowHeightForRow=function(a){return 240},this.onChangedPosition=function(a){},this.getHeight=function(){return 1024},this.getViewForRow=function(a,b){return 0==a&&(a=jQuery("<div></div>")),a.html(b),a},this.useIteration=!0,this.iterationHandler=function(a,b,c){var d=1-Math.abs(.5*(b-.5));a.getView().html(c+" : "+b).css(Magazine.device.getCssProperty("transform"),"scale("+d+", "+d+")")}}function ScrollListRow(){this.min=null,this.max=null}function ScrollController(a,b){function c(){}var d,e,f,g={},h=!1,i={};this.init=function(b){jQuery.extend(i,g,b),d=jQuery(".button.up",a),d.hide(),e=jQuery(".button.down",a),e.hide(),f=jQuery(".paginator",a),f.length>0&&(h=!0,c())}}function Touch(){function a(a){if(!z){var g=a.type;if(a=a.originalEvent,"undefined"!=typeof a&&"pointerType"in a&&2!==a.pointerType&&"touch"!==a.pointerType)return void(TouchSettings.DISABLED!==!1&&a.preventDefault());if(!($(a.target).closest(".responsive-table-wrapper, .disable-touch").length>0)||I!==TouchOrientation.HORIZONTAL&&I!==TouchOrientation.BOTH){var r;if("ontouchstart"in window?r=a.touches.length>0?a.touches[0]:a.changedTouches[0]:"undefined"!=typeof a.screenY?(r=a,r.pageX=a.screenX,r.pageY=a.screenY):r=a,!$(a.target).hasClass(".im-ignore-touch")&&(TouchSettings.DISABLED===!1||TouchSettings.DISABLED===K)){switch(g){case v:F&&G&&(clearInterval(G),G=!1,o=!1),n.x=m.x=r.pageX,n.y=m.y=r.pageY,l=j(),null!=B.onTouchStart&&B.onTouchStart(a);break;case w:if(m.x=r.pageX,m.y=r.pageY,(Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE&&null!==B.onVerticalDrag||B.preventDefault)&&a.preventDefault(),o===!1){var s=f();if(Math.abs(s)>C){J=s>C?-C:C,k=j();var t=h();if(i(t)!=I&&I!=TouchOrientation.BOTH)return;o=t,TouchSettings.DISABLED=K}}else if(null!=B.onDrag)a.preventDefault(),a.stopPropagation(),H=!0,B.onDrag(r,f(!0),o);else if(!b()||null==B.onHorizontalDrag&&null==B.onHorizontalSwipe){if(c()&&null!=B.onVerticalDrag){a.preventDefault(),a.stopPropagation(),H=!0;var s=f(!0);"function"==typeof B.onVerticalSwipe&&Math.abs(s)>70&&B.onVerticalSwipe(r,o),B.onVerticalDrag(r,s,o)}}else{a.preventDefault(),a.stopPropagation(),H=!0;var s=f(!0);"function"==typeof B.onHorizontalSwipe&&Math.abs(s)>70&&B.onHorizontalSwipe(r,o),B.onHorizontalDrag(r,s,o)}break;case x:TouchSettings.DISABLED=!1,k=j();var u=e();if(H)Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE&&a.preventDefault();else{if(!(null!=B.onTap&&u<q))return;
B.onTap(r,u)}H=!1,o!==!1&&a.preventDefault(),F&&0!=o?G=setInterval(d,10):(null!==B.onTouchEnd&&B.onTouchEnd(r,f(!0),o),o=!1)}p=g}}}}function b(a){return a?a==r||a==s:o==r||o==s}function c(a){return a?a==t||a==u:o==t||o==u}function d(){if(Math.abs(B.speed)<1&&(clearInterval(G),null!==B.onTouchEnd&&B.onTouchEnd(null,f(!0),!1),G=!1,o=!1),E-=B.speed,B.speed*=.85,b()&&null!=B.onHorizontalDrag){var a=B.onHorizontalDrag(null,E,o);a===!1&&B.onCancelled(B.speed,o)}else c()&&null!=B.onVerticalDrag&&(B.onVerticalDrag(null,E,o),a===!1&&B.onCancelled(B.speed,o))}function e(){return k-l}function f(a){var b=0;switch(I){case TouchOrientation.VERTICAL:b=m.y-n.y;break;case TouchOrientation.HORIZONTAL:b=m.x-n.x;break;case TouchOrientation.BOTH:b=Math.round(Math.sqrt(Math.pow(m.x-n.x,2)+Math.pow(m.y-n.y,2)))}return B.speed=E-b,E=b,a&&(b+=J),b}function g(){var a=n.x-m.x,b=m.y-n.y,c=Math.atan2(b,a),d=Math.round(180*c/Math.PI);return d<0&&(d=360-Math.abs(d)),d}function h(){var a=g();return a<=45&&a>=0?r:a<=360&&a>=315?r:a>=135&&a<=225?s:a>45&&a<135?u:t}function i(a){return b(a)?TouchOrientation.HORIZONTAL:TouchOrientation.VERTICAL}function j(){var a=new Date;return a.getTime()}var k,l,m={x:0,y:0},n={x:0,y:0},o=!1,p=null,q=300,r=TouchDirection.LEFT,s=TouchDirection.RIGHT,t=TouchDirection.UP,u=TouchDirection.DOWN,v="touchstart",w="touchmove",x="touchend",y="touchcancel",z=!1,A=0,B=this,C=35,D=null,E=null,F=!0,G=!1,H=!1,I=TouchOrientation.BOTH,J=0,K=TouchSettings.Count++;this.preventDefault=!1,this.init=function(b,c,d){"undefined"==typeof d&&(d=!1),"undefined"!=typeof c&&(I=c),D=b,"ontouchstart"in window||!d||(10===Magazine.device.version?(v="MSPointerDown",w="MSPointerMove",x="MSPointerUp",y="MSPointerCancel",D.css("-ms-touch-action","none")):Magazine.device.browser==DeviceBrowser.IE?(v="pointerdown",w="pointermove",x="pointerup",y="pointercancel",D.css("touch-action","none")):c==TouchOrientation.NONE&&(v="mousedown",x="mouseup")),c==TouchOrientation.NONE&&(v="mousedown",x="mouseup"),D.on(v+" "+w+" "+x+" "+y,a)},this.disable=function(){z=!0},this.enable=function(){z=!1},this.release=function(){D.off(v+" "+w+" "+x+" "+y,a),D=void 0,D=null,null!=B.onHorizontalDrag&&(delete B.onHorizontalDrag,B.onHorizontalDrag=null),null!=B.onHorizontalSwipe&&(delete B.onHorizontalSwipe,B.onHorizontalSwipe=null),null!=B.onVerticalDrag&&(delete B.onVerticalDrag,B.onVerticalDrag=null),null!=B.onVerticalSwipe&&(delete B.onVerticalSwipe,B.onVerticalSwipe=null),null!=B.onDrag&&(delete B.onDrag,B.onDrag=null),null!=B.onTap&&(delete B.onTap,B.onTap=null),B.fingerCount=null,B.threshold=null,B=void 0},this.trigger=function(a){switch(a){case"end":D.trigger(x);break;case"cancel":D.trigger(y)}},this.onTouchStart=null,this.onTouchEnd=null,this.onHorizontalDrag=null,this.onVerticalDrag=null,this.onHorizontalSwipe=null,this.onVerticalSwipe=null,this.onTap=null,this.onScroll=null,this.onDrag=null,this.onCancelled=null,this.fingerCount=function(a){return void 0!=typeof a?A:void(A=a)},this.threshold=function(a){return void 0!=typeof a?C:void(C=a)},this.isDragging=function(){return 0!=o},this.animateOut=function(a){return void 0==typeof a?F:void(F=a)},this.speed=0}function Gallery(){function a(a,b){return"undefined"==typeof b&&(b=l),a<0?(b+a%b)%b:a%b}function b(){var a=(Math.ceil(h-.5*m),null);i.willMoveViews(k);for(var b=0;b<j.length;b++)a=j[b],a.view.css(i.getItemCssWithPosition(k,a.view,a.position,a.row,0)),0==a.position?a.view.addClass("active"):a.view.removeClass("active")}function c(a){var b=jQuery(a.target).data("index");"undefined"!=typeof b&&null!==b&&k.select(b)}function d(){Magazine.device.SUPPORT_TOUCH&&(null!=r&&(r.release(),r=void 0),r=new Touch,r.init(f,TouchOrientation.HORIZONTAL),r.animateOut(!1),r.onTouchStart=function(){f.addClass("dragging")},r.onHorizontalDrag=function(a,b,c){for(var d=0;d<j.length;d++){var e=j[d];e.view.css(i.getItemCssWithPosition(k,e.view,e.position,e.row,b))}},r.onTouchEnd=function(a,b){if(f.removeClass("dragging"),Math.abs(b)>80)b>0?k.prev():k.next();else for(var c=0;c<j.length;c++){var d=j[c];d.view.css(i.getItemCssWithPosition(k,d.view,d.position,d.row,0))}})}function e(){m=i.getVisibleItems(),l=i.getAmount();for(var b=[],d=Math.ceil(h-.5*m),e=d+m,g=d;g<e;g++)b.push({row:a(g),position:g-h});var n=[],o=!1;for(g=0;g<j.length;g++){o=!1;for(var q in b)b[q].row==j[g].row&&(b[q].view=j[g].view,o=!0);o||n.push(j[g])}var r=null;for(g=0;g<b.length;g++)r=null,"view"in b[g]||(n.length>0&&(r=n.pop().view),p?b[g].view=i.getFSViewItem(k,r,b[g].row):(b[g].view=i.getViewItem(k,r,b[g].row),"function"==typeof i.onResizeHandler&&i.onResizeHandler(k,b[g].view,b[g].row)),b[g].view.data("index",b[g].row),b[g].view.click(c),null==r&&f.append(b[g].view));for(g=0;n.length>0;)n.pop().view.remove();j=b}var f=null,g=null,h=0,i=null,j=null,k=this,l=null,m=null,n=!1,o=0,p=!1,q=!1,r=null,s=null,t=null;this.init=function(a){i=a,f=jQuery("<div />"),j=[],0==$("#gallery_overlay").length&&$("#Magazine").append("<div id='gallery_overlay'></div>"),s=$("<div></div>"),$("#gallery_overlay").append(s),d()},this.setNavigation=function(a){a===!0?(t=$('<span class="im-cl-gallery-nav"></span>'),t.append('<div class="im-cl-gallery-next"><span class="im-sp im-sp-arrow-right"></span></div>'),t.append('<div class="im-cl-gallery-prev"><span class="im-sp im-sp-arrow-left"></span></div>'),t.append('<div class="im-cl-gallery-close"><span class="im-sp im-sp-times"></span></div>'),t[0].offsetHeight,t.children().on("click",function(){$(this).hasClass("im-cl-gallery-next")?k.next():$(this).hasClass("im-cl-gallery-prev")?k.prev():$(this).hasClass("im-cl-gallery-close")&&("function"==typeof i.onClose?i.onClose():Console.error("Gallery: onClose is not a function"))})):null!==t&&(t.remove(),t=null)},this.render=function(a){g=a,g.html(f),null!==t&&g.parent().append(t),f.show()},this.getContainer=function(){return f},this.show=function(a){Magazine.tracker.trackEvent("Gallery","Click","Open",a),k.select(a)},this.select=function(a){h=a,e(),b()},this.next=function(){Magazine.tracker.trackEvent("Gallery","Click","Next",h),h++,e(),b()},this.prev=function(){Magazine.tracker.trackEvent("Gallery","Click","Prev",h),h--,e(),b()},this.close=function(){p&&(Magazine.tracker.trackEvent("Gallery","Click","Close"),s.hide(),f.hide(),$("#gallery_overlay").hide()),q=!1},this.fullscreen=function(a,c){q=!0,a!=p&&1==a?(k.reset(),p=a,s.html(i.getFullscreenView(f)).show(),d()):a!=p&&(k.reset(),p=a,k.render(),d()),a&&(s.show(),$("#gallery_overlay").show(),Magazine.tracker.trackEvent("Gallery","Click","Open",c),f.show()),"undefined"!=typeof c&&(h=c),e(),b()},this.isFullscreen=function(){return p!==!1&&f.is(":visible")},this.animationDuration=400,this.getTotalItems=function(){return l},this.reset=function(){null!==t&&(t.children().off(),t.remove(),t=null),k.close(),p=!1,f.html(""),m=null,j=[],l=null,n=!1,q=!1},this.release=function(){k.close(),f.remove(),h=0,i=void 0,j=void 0,l=null,m=null,n=!1,o=0,f=null,k=null},this.onResizeHandler=function(a){if("function"==typeof i.onResizeHandler)for(var b=0;b<j.length;b++){var c=j[b];i.onResizeHandler(k,c.view,c.row)}if(p&&q){f.addClass("dragging");for(var b=0;b<j.length;b++){var c=j[b];c.view.css(i.getItemCssWithPosition(k,c.view,c.position,c.row,0))}f.removeClass("dragging")}},this.setDelegate=function(a){i=a}}function GalleryDelegate(){this.getAmount=function(){return 14},this.getVisibleItems=function(){return 9},this.getItemCssWithPosition=function(a,b,c,d,e){var f={};switch(c){case-3:f[Magazine.device.getCssProperty("transform")]="translate3d(-650px, 0px, 0px) scale3d(.3, .3, 0.6)",f.opacity="0",f.display="block";break;case-2:f[Magazine.device.getCssProperty("transform")]="translate3d(-450px, 0px, 0px) scale3d(.5, .5, 0.6)",f.opacity="1",f.display="block";break;case-1:f[Magazine.device.getCssProperty("transform")]="translate3d(-300px, 0px, 0px) scale3d(.8, .8, 0.6)",f.opacity="1",f.display="block";break;case 0:f[Magazine.device.getCssProperty("transform")]="translate3d(0px, 0px, 1px) scale3d(1, 1, 1)",f.opacity="1",f.display="block";break;case 1:f[Magazine.device.getCssProperty("transform")]="translate3d(300px, 0px, 0px) scale3d(.8, .8, 0.6)",f.opacity="1",f.display="block";break;case 2:f[Magazine.device.getCssProperty("transform")]="translate3d(450px, 0px, 0px) scale3d(.5, .5, 0.6)",f.opacity="1",f.display="block";break;case 3:f[Magazine.device.getCssProperty("transform")]="translate3d(650px, 0px, 0px) scale3d(.2, .2, 0.6)",f.opacity="0",f.display="block";break;default:f.display="none"}return f.zIndex=Math.abs(c)*-1+Math.ceil(.5*a.getTotalItems()),f},this.getViewItem=function(a,b,c){return null==b&&(b=jQuery("<div></div>")),b.html(c),b},this.getFSViewItem=function(a,b,c){return null==b&&(b=jQuery("<div></div>")),b.html(c),b},this.willMoveViews=function(a){},this.getFullscreenView=function(a){var b=$('<div id="fsGalleryContainer"><div id="fsGallery"></div></div>');return b.find("#fsGallery").html(a),b}}function Social(a){var b=this,c=null,d=null,e=null;AvailableSocialPlatforms=a,this.init=function(){SocialPlatformsReady||(SocialPlatformsReady=!0)},this.onResizeHandler=function(a){null!=d&&d.onResizeHandler(a)},this.getButtons=function(){if(null==e){e=[];for(var a in AvailableSocialPlatforms)e.push({view:Assets.social.button.render(SocialPlatforms[AvailableSocialPlatforms[a]])})}return e},this.getButtonViews=function(){var a=b.getButtons(),c=[];if(null!==a&&"undefined"!=typeof a)for(var d=0;d<a.length;d++)c.push(a[d].view);return c},this.getContainer=function(){return c},this.release=function(){c=void 0,b=void 0},this.getUrl=function(a){var b=window.location.href;if("undefined"!=typeof a){b=b.split("#")[0];var c=window.location.href.match(/([?&]t=[^&#]+)/);c&&(b=b.replace(c[1],"")),b+=b.indexOf("?")>0?"&":"?",b+="t="+a;var d=Magazine.getNavigationController().getPageByIndex(0);b+="#!/"+d.alias}else{var e=Magazine.getNavigationController().getCurrentPage();e&&(null!=e.share_url?b=e.share_url:0===window.location.hash.length&&(window.location.hash="#!/"+e.alias,b=window.location.href))}return b=b.split("+").join("%20")},this.onClick=function(a,b){try{"undefined"==typeof b&&(b=this);var c,d=$(b).data("type");if("object"==typeof $(b).parent()[0].imShare&&null!==$(b).parent().imShare&&$(b).parent()[0].imShare.generateUrl){c=window.location.href,c=c.split("#")[0];var e=window.location.href.match(/([?&]t=[^&#]+)/);e&&(c=c.replace(e[1],"")),c+=c.indexOf("?")>0?"&":"?",c+="t="+$(b).parent()[0].imShare.token;var f=Magazine.getNavigationController().getPageByIndex(0);c+="#!/"+f.alias}if("undefined"==typeof c){c=window.location.href;var g=Magazine.getNavigationController().getCurrentPage();g&&("string"==typeof g.share_url&&0!==g.share_url.length?c=g.share_url:0===window.location.hash.length&&(window.location.hash="#!/"+g.alias,c=window.location.href)),c=c.split("+").join("%20")}if("mail"===d&&$(b).attr("target","_self"),"linkedin"===d){var h=c.split("#"),g=Magazine.getNavigationController().getCurrentPage();g&&(h[0].indexOf("?")>0?h[0]+="&":h[0]+="?",h[0]+="p="+g.alias),c=h.join("#")}var i=SocialPlatforms[d].url.render({title:encodeURIComponent(window.document.title),url:encodeURIComponent(c)});if(Magazine.device.type===DeviceType.DESKTOP&&"mail"!==d){var j=screen.width/2-Magazine.pages.width/2,k=screen.height/2-Magazine.pages.height/2,l=window.open(i,"popupwindow","scrollbars=yes,width=680,height=465,top="+k+",left="+j);return l.focus(),a.preventDefault(),Magazine.tracker.trackEvent("Share"+d,"Share",window.document.title),!1}Magazine.tracker.trackEvent("Share"+d,"Share",window.document.title),$(b).attr("href",i)}catch(a){Console.error("Error on clicking social")}}}function Overlay(){var a,b=null,c=null,d=null,e=null,f=null,g=this;this.init=function(a){b=a},this.getOverlaysForSearch=function(){if(!a){a={};for(var c in b)a[c]={},"string"==typeof b[c].name&&(a[c].title=b[c].name.stripHtml()),"string"==typeof b[c].description&&(a[c].description=b[c].description.stripHtml())}return a},this.showMedia=function(a,b){var h,i;if(b===OverlayType.IMAGE)h="img"+a.id;else{if(b!==OverlayType.VIDEO)return void Console.error("Unknown media type");h="object"==typeof a?"vid"+a.id:"vid"+a}if(!(c&&e.overlayId===a||d)){if(c)return d=!0,void e.hide(function(){d=!1,g.showMedia(a,b)});c=!0,e=new Popup,e.overlayId=a,f={},e.layout="framed",f.id=h,e.onCloseHandler=function(){c=!1,Magazine.tracker.trackEvent("Overlay","Close",f.name),e=null},b===OverlayType.IMAGE?(f.image=a,i="overlay-image-big","fullscreen"!=e.layout&&(e.setWidth("800px"),f.imageheight=Math.round(800/f.image.width*f.image.height)+"px"),f.image=a,f.name=b+": "+a.filename):b===OverlayType.VIDEO&&(i="overlay-video",f.video=a,f.name=b+": "+a),e.setData(f),e.setScreen(i,function(a){a&&Magazine.popupContainer.show(e)}),Magazine.tracker.trackEvent("Overlay","Open",f.name)}},this.isOpen=function(){return c},this.showOverlayByName=function(a){for(var c in b)if(b[c].name&&b[c].name.toUpperCase()===a.toUpperCase())return void this.show(c)},this.show=function(a,h,i){if(null!==Magazine.currentPage&&Magazine.currentPage.events.trigger(PageEvents.EVENTS.ON_OVERLAY_SHOW),Magazine.getNavigationBar().onOpenOverlay(),h===OverlayType.IMAGE||h===OverlayType.VIDEO,c&&e.overlayId===a||d)return!1;if(c)return d=!0,e.hide(function(){d=!1,g.show(a,h)}),!1;if(!b[a])return!1;c=!0,e=new Popup,e.overlayId=a,f=b[a],Magazine.api&&(f=JSON.parse(Hogan.compile(JSON.stringify(f)).render($.extend({},Magazine.api,i)))),e.layout=f.layout||"framed",f.id=b[a],e.onCloseHandler=function(){c=!1,Magazine.tracker.trackEvent("Overlay","Close",f.name),e=null,null!==Magazine.currentPage&&Magazine.currentPage.events.trigger(PageEvents.EVENTS.ON_OVERLAY_HIDE)},f.title=f.name,e.setTitle(f.name),e.setDescription(f.description);var j="default";return"form"===f.type?j="overlay-form":f.video&&"video-bottom"===f.type?j="overlay-video-bottom":f.video&&"video"===f.type?j="overlay-video":f.image?f.description&&"image"===f.type?(f.imagealign="right",f.imagewidth=Math.min(f.image.width,300),f.imageheight=Math.round(f.imagewidth/f.image.width*f.image.height),null!=f.description&&""!=f.description||(f.imagealign="left"),j="overlay-image"):"image-bottom"===f.type?(j="overlay-image-bottom",e.setWidth("800px"),"fullscreen"!=e.layout&&(f.imageheight=Math.round(800/f.image.width*f.image.height))):(j="overlay-image-big",e.setWidth("800px"),"fullscreen"!=e.layout&&(f.imageheight=Math.round(800/f.image.width*f.image.height)+"px")):j="overlay",e.setData(f),e.setScreen(j,function(a){a&&Magazine.popupContainer.show(e)}),Magazine.tracker.trackEvent("Overlay","Open",f.name),!1},this.hide=function(){c&&Magazine.popupContainer.hide()}}function TableGrid(){function a(a){var c={cols:w,rows:v,spacing:C};if(v=!1,w=!1,C=!1,c.cols!=g()||c.rows!=f()||y!=a||"undefined"==typeof a){if("undefined"!=typeof a||!u.setPosition()){for(var i=0;i<r.length;i++)r[i].resetStatus(),r[i].canBeRemoved()&&(r.splice(i,1),i--);"undefined"!=typeof a&&(y=a);for(var j=e(),k=j.max-j.min,l=k<n.amount,m=[],p=0;p<k;p++)m[p+j.min]=o[p+j.min];for(var q=0;q<r.length;q++){var s=r[q];"undefined"!=typeof m[s.index]&&delete m[s.index],s.canBeRemoved()&&r.splice(q,1)}for(var x in m)m[x].render(),r.push(m[x]);for(var z=0;z<r.length;z++)r[z].preparePosition();0!=B&&clearTimeout(B),B=setTimeout(function(){clearTimeout(B),B=!1;for(var a=0;a<r.length;a++)r[a].gotoPosition()},100),t=j,l?b():d()}}else if(c.spacing!=h())for(var z=0;z<r.length;z++)r[z].gotoPosition()}function b(){x||(x=!0,n.enabledScroll(),c(),0==y?n.disableDownButton():n.enableDownButton(),y==u.getTotalRows()-f()?n.disableUpButton():n.enableUpButton(),"function"==typeof n.enableNavigation&&n.enableNavigation())}function c(){A=new IMGesture(q),A.on(IMGestures.UP,u.up),A.on(IMGestures.DOWN,u.down)}function d(a){(x||a)&&(x=!1,n.disabledScroll(),null!=A&&(A.release(),A=null),n.disableDownButton(),n.disableUpButton(),"function"==typeof n.disableNavigation&&n.disableNavigation())}function e(){var a={min:y*g(),max:g()*f()+y*g()};return a.max>n.amount&&(a.max=n.amount),a}function f(){return v===!1&&(v=j()),v}function g(){return w===!1&&(w=k()),w}function h(){return C===!1&&(C=i()),C}function i(){var a={topBottom:(n.getSize().height-p.height*f())/(f()+1),leftRight:(n.getSize().width-p.width*g())/(g()+1)};return a}function j(){return Math.min(Math.ceil(n.amount/g()),Math.max(1,Math.floor(n.getSize().height/(p.height+n.spacing))))}function k(){var a=Math.max(1,Math.floor(n.getSize().width/(p.width+n.spacing)));return a>n.amount&&(a=n.amount),a}function l(a,b){function c(a){return"undefined"==typeof a&&(a=q),p.height*a.row+(a.row+1)*h().topBottom}function d(a){return"undefined"==typeof a&&(a=q),p.width*a.col+(a.col+1)*h().leftRight}function f(){if(null==t)return 2;if(0==s)return k.index<t.min?1:k.index>=t.min?2:0;var a=e();return k.index>=a.max?4:k.index<a.min?3:5}function i(a){if(!j.hasClass("status-"+a)){switch(j.removeClass("status-"+s),j.addClass("status-"+a),r=0==a,a){case 0:l=!1;break;case 1:l=!1;break;case 2:l=!1;break;case 3:l=!0;break;case 4:l=!0;break;case 5:l=!0}s=a}}var j=$("<div class='table-cell "+b+"' />"),k=this,l=!1,o=!0,q={},r=!0,s=0;this.view=null,this.index=a,this.render=function(){return null==k.view&&(k.view=n.getViewByIndex(k.view,k.index),j.html(k.view),m.append(j),"function"==typeof n.onClick&&j.on("click",function(a){n.onClick(k,a)})),u},this.isOnStage=function(){return l},this.getSpacing=function(){return h()},this.preparePosition=function(){var a=f(),b={};if(b.col=this.index%g(),b.row=Math.floor(this.index/g()),o=b.col!=q.col||q.row!=b.row||a!=s)if(q=b,0==s){var e,h;if(i(a),1==s)h=-I,e=b.row-1;else{if(2!=s)return;h=I,e=b.row+1}j.css(Magazine.device.getCssProperty("transition-duration"),"0s"),j.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(d({row:e,col:b.col}),c(b)+h))}else i(a)},this.canBeRemoved=function(){return 0==s},this.gotoPosition=function(){j.off(Magazine.device.getCssProperty("transitionend")),1!=s&&2!=s||(i(5),j.on(Magazine.device.getCssProperty("transitionend"),function(){j.css(Magazine.device.getCssProperty("transition-delay"),""),j.off(Magazine.device.getCssProperty("transitionend"))})),3==s||4==s?k.removeFromStage(!0):0!=s&&(r||(Magazine.device.isIE8?j.css("top",c()).css("left",d()):(j.css(Magazine.device.getCssProperty("transition-delay"),z*(k.index-y*g())+"ms"),j.css(Magazine.device.getCssProperty("transition-duration"),""),j.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(d(),c()))))),"function"==typeof n.onRender&&n.onRender(this.view,this.index)},this.removeFromStage=function(a){var b=I;3==s&&(b=-I),j.on(Magazine.device.getCssProperty("transitionend"),function(){j.off(Magazine.device.getCssProperty("transitionend")),i(0)}),j.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(d(),c()+b))},this.clear=function(){j.off(Magazine.device.getCssProperty("transitionend"))},this.resetStatus=function(){var a=e();k.index<a.max&&k.index>=a.min}}var m,n,o,p,q,r,s,t,u=this,v=!1,w=!1,x=!1,y=0,z=30,A=null,B=!1,C=!1,D=50,E=0,F=!1,G=!1,H=null,I=30;this.init=function(a,b,c){q=a,n=b,r=[],o=[],u.reset(),H=c,$(a).css({overflow:"hidden"}),"undefined"==typeof b.cellClass&&(b.cellClass=""),0==$(a).children(".table-grid").length?(m=$('<div class="table-grid" />'),$(a).html(m)):m=$(a).children(".table-grid");for(var d=0;d<n.amount;d++)o.push(new l(d,b.cellClass))},this.show=function(){a()},this.reset=function(){p=n.getCellSize(),D=n.getCellSize().height/2},this.pageDown=function(){u.setPosition(y-f())},this.pageUp=function(){u.setPosition(y+f())},this.down=function(){u.setPosition(y-1)},this.up=function(){u.setPosition(y+1)},this.release=function(){x=!1,r=null,null!=s&&s.release(),0!=B&&(clearTimeout(B),B=!1),$(q).html("")},this.onResize=function(){G||(p=n.getCellSize(),D=.9*(n.getCellSize().height+h().topBottom),a())},this.setPosition=function(b,c){function d(){m.off(g,d),n.didChangePosition(b,e)}var e=y;if("undefined"==typeof b&&(b=y),b<0?b=0:b>=u.getTotalRows()-f()&&(b=u.getTotalRows()-f()),y===b)return!1;if(n.willChangePosition(b,e),x?(0===b?n.disableDownButton():n.enableDownButton(),b===u.getTotalRows()-f()?n.disableUpButton():n.enableUpButton(),"function"==typeof n.enableNavigation&&n.enableNavigation()):"function"==typeof n.disableNavigation&&n.disableNavigation(),c!==!0)if(Magazine.device.isIE8)m.css("top",-(p.height+h().topBottom)*b+n.startAtPosition),n.didChangePosition(b,e);else{var g=Magazine.device.getCssProperty("transitionend");m.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,-(p.height+h().topBottom)*b)),m.on(g,d)}return a(b),F||(E=u.getPixelPosition()),H&&H(b),!0},this.canScroll=x,this.getTotalRows=function(){return Math.ceil(n.amount/g())},this.getPixelPosition=function(){return-(p.height+h().topBottom)*y},this.disable=function(){G=!0,d(!0)},this.enable=function(){G=!1,x=!0,this.onResize()}}function CustomComponents(a){function b(a,b){var a=new ActionModel(a);return $('<a href="'+a.href+'" target="'+a.target+'" onclick="'+a.onclick+'" style="'+b.join("")+'" class="component" />')}function c(a){var b=[];if(null!=a)for(var c in a){var d=640;"top"!==c&&"bottom"!==c||(d=500),b.push(c+":"+parseInt(a[c])/d*100+"%;")}return b}function d(a){return $('<div style="'+a.join("")+'" class="component" />')}function e(a){var b={};for(var c in a)"left"==c?b.x=10:"right"==c?b.x=90:"top"==c?b.y=10:"bottom"==c&&(b.y=90);return b}function f(f){var g,i=!1,j=!1,k=null,l=1.2,m={x:50,y:50};this.render=function(){var h=c(f.margin);if(k=1!=f.object_type?"text":"image",null!=f.font&&(h=h.concat(f.font)),g=null!=f.action?b(f.action,h).addClass(k+"-component"):d(h).addClass(k+"-component"),null!=f.size&&g.css(f.size),null!=f.margin&&(m=$.extend(m,e(f.margin)),g.css(Magazine.device.getCssProperty("transform-origin"),m.x+"% "+m.y+"%")),null==f.margin?(i=!0,j=!0):"undefined"==typeof f.margin.left&&"undefined"==typeof f.margin.right?j=!0:"undefined"==typeof f.margin.bottom&&"undefined"==typeof f.margin.top&&(i=("undefined"==typeof f.margin.left,!0)),1!=f.object_type)g.append(f.text);else if("undefined"!=typeof f.image&&null!=f.image){var n=new Image;n.onload=function(){null!=g&&$.isFunction(g.onResizeHandler)&&g.onResizeHandler(Magazine.device)},n.src=Config.magazine_url+f.image.uri,f.size&&f.image&&f.image.width&&f.size.width&&(l=f.image.width/f.size.width),g.append(n)}g.css("opacity","0"),a.append(g)},this.show=function(a){var b=h;"image"==k&&b>l&&(b=l);var c=null;g.css("opacity","1"),Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE&&(g.css(Magazine.device.getCssProperty("transform"),"scale("+b+","+b+") "+Magazine.device.getCssTranslate(0,100,0)),c=setTimeout(function(){clearTimeout(c),c=null,g.css(Magazine.device.getCssProperty("transition"),"all 500ms "+a+"ms "+CssEase.InOutCubic),g.css(Magazine.device.getCssProperty("transform"),"scale("+b+","+b+")"),g.on(Magazine.device.getCssProperty("transitionend"),function(){g.off(Magazine.device.getCssProperty("animationend")),g.css(Magazine.device.getCssProperty("transition"),"")})},100))},this.onResizeHandler=function(a){var b=h;"image"==k&&b>l&&(b=l),g.css(a.getCssProperty("transform"),"scale("+b+","+b+")"),i&&g.css({top:"50%","margin-top":-(g.height()/2)+"px"}),j&&g.css({left:"50%","margin-left":-(g.width()/2)+"px"})}}var g,h,i={width:1e3,height:570};this.init=function(a){g=[];for(var b in a)g.push(new f(a[b]))},this.render=function(){for(var a in g)g[a].render()},this.clearHandlers=function(){for(var a in g)g[a].clearHandlers()},this.show=function(){var a=0;for(var b in g)a=100*b,g[b].show(a)},this.onResizeHandler=function(a){h=(Magazine.pages.width/i.width+Magazine.pages.height/i.height)/2;for(var b in g)g[b].onResizeHandler(a)}}function Background(){function a(){null!==j&&(j.func.apply(g,j.arg),j=null)}function b(a){for(var b in h)b!=a&&null!==h[b]&&h[b].reset()}function c(){var a,b=this,c=!1,e=[];this.videoplayer=null,this.index,this.source,this.content,this.init=function(c){var d=this;if(a=$("<div></div>"),this.flickr===!0){if("search"===this.type)IMFlickr.findPhotoByTag(this.value,this.sortType,function(a){d.content=a,d.setSource(IMFlickr.getUrlByPhoto(a)),g.isReady()},function(a){Console.error(a)});else if("photoset"===this.type)IMFlickr.getLastPhotoFromSet(this.value,this.sortType,function(a){d.content=a,d.setSource(IMFlickr.getUrlByPhoto(a)),g.isReady()},function(a){Console.error(a)});else if("api"===this.type){var f=new CustomApi;f.init({url:this.value.user_id,cache:!0}),f.onComplete=function(a){"string"==typeof a&&(a=JSON.parse(a));var b=Object.byString(a,d.value.tags);"string"==typeof b&&(d.setSource(b),g.isReady())},f.load()}b.source=""}else this.width<300||this.height<300?b.source=Config.magazine_url+this.uri:b.source=Utils.viewHelper("getBackgroundImage",[this.uri]);this.onEndResizeHandler=function(a){null!=b.videoplayer&&b.videoplayer.onEndResizeHandler(a);for(var c=0;c<e.length;c++)e[c].onResizeHandler(a)},b.index=c},this.videoPause=function(){null!==b.videoplayer&&b.videoplayer.pause()},this.videoPlay=function(){null!==b.videoplayer&&b.videoplayer.play()},this.appendLayer=function(b){var c=(Config.is_preview?"":Config.magazine_url)+b.image.uri,d=$('<div class="im-absolute-view" style="width: '+b.image.width+"px; height: "+b.image.height+'px;"><div class="background-layer im-3d im-level-'+(e.length+2)+'"><img src="'+c+'"></div></div>');absoluteView=(new AbsoluteView).init(d),a.append(absoluteView.view),absoluteView.setPosition(b.position),absoluteView.setFixed(!0,this),e.push(absoluteView)},this.setSource=function(a){b.source=a,"undefined"!=typeof b.view&&b.view.css("background-image","url('"+b.source+"')")},this.appendTo=function(d){if(b.view=$('<div class="background-image im-3d im-level-1" style="background-image: url(\''+b.source+"');\"></div>"),"object"==typeof this.settings&&"undefined"!=typeof this.settings.position&&b.view.css("background-position",this.settings.position),(this.width<300||this.height<300)&&b.view.addClass("im-background-pattern"),"object"==typeof this.video&&!Config.is_screenshot&&Magazine.device.supports("background-video")){var e=$("<div class='im-background-video'></div>");b.view.append(e),this.settings=this.settings||{};var f=new VideoSettings;f.controls=0,f.autoplay=1,f.position=this.settings.position,f.is_background=!0,f.background_cover=!0,f.start=this.video.start,f.end=this.video.end,f.aspect_ratio=this.video.width/this.video.height,f.loop=this.video.loop,b.videoplayer=new Video(e,{id:this.video.id,thirdparty_id:this.video.thirdparty_id,video_urls:this.video.video_urls},f,function(a){a.data!==VideoEvent.ENDED||this.getLoop()||(b.videoplayer.pause(),b.videoplayer.fadeOut(function(){b.videoplayer.release(),b.videoplayer=null}))}),0!=this.video.disable_sound&&(b.videoplayer.supportSound=!1,b.videoplayer.mute()),b.videoplayer.setLoop(this.video.loop),c||b.videoplayer.pause(),e=void 0}b.reset(),a.append(b.view),d.append(a),null!==b.videoplayer&&b.videoplayer.setSize("100%","100%")},this.reset=function(){null!=b.view&&(b.view.removeClass("active"),TweenMax.set(b.view[0],d.showSettings.from))},this.show=function(a,c,e){function f(){null!=b.view&&($.isFunction(c)&&c(b),b.view.removeClass("animating"))}b.view.addClass("active");var g;g="undefined"!=typeof e?$.extend({},d.hideSettings,e):d.showSettings,a?(b.view.css("zIndex",""),b.view.addClass("animating"),TweenMax.to(b.view[0],g.time,$.extend({onComplete:f},g.to))):(TweenMax.set(b.view[0],g.to),$.isFunction(c)&&c(b))},this.hide=function(a,c,e){function f(){b.containerDidDisappear(),b.view.css("zIndex","")}b.view.addClass("active");var g;g="undefined"!=typeof e?$.extend({},d.hideSettings,e):d.hideSettings,b.view.css("zIndex","0"),a&&g.stayOnTop&&TweenMax.to(b.view[0],g.time,$.extend({onComplete:f},g.to)),g=void 0},this.setVisibleOnStage=function(a){c=a},this.containerWillAppear=function(){c=!0,null!==b.videoplayer&&(b.videoplayer.play(),b.videoplayer.onEndResizeHandler(Magazine.device))},this.containerDidDisappear=function(){c=!1,null!==b.videoplayer&&b.videoplayer.pause()},this.release=function(){b.view.remove(),b.view=null,b.source=null,e=[],b.index=null,null!==b.videoplayer&&(b.videoplayer.release(),b.videoplayer=null),b.onResizeHandler=null},this.onEndResizeHandler=null}var d,e,f,g=this,h=[],i=$('<div class="background"></div>'),j=null,k=!1,l=null,m=null;this.isset=!1,this.init=function(a,b,e){if(d=e,g.isset=!0,"undefined"!=typeof a){for(var f in a)"object"!=typeof a[f]&&"undefined"!=typeof a[f]&&(a[f]={value:a[f],flickr:!0}),null!=a[f]&&($.extend(a[f],new c),a[f].init(f));h=a}"undefined"==typeof d&&(d=new BackgroundDelegate),$.isFunction(b)&&g.preload(b)},this.getView=function(){return i},this.videoPause=function(a){this.getBackgroundImage(a?a:0).videoPause()},this.videoPlay=function(a){this.getBackgroundImage(a?a:0).videoPlay()},this.pageWillAppear=function(){k=!0,null!==h[f]&&void 0!==h[f]&&h[f].containerWillAppear()},this.getCurrentImage=function(){return null!==h[f]&&void 0!==h[f]&&h[f]},this.isReady=function(){"function"==typeof m&&m.apply(this)},this.onReady=function(a){m=a},this.pageDidDisappear=function(){k=!1,null!=h[f]&&h[f].containerDidDisappear()},this.show=function(c,d,i){if(e&&c!=f)return void(j={func:arguments.callee,arg:[c,d,i]});"undefined"==typeof c&&(c=0),"undefined"!=typeof h[f]&&null!=h[f]&&h[f].hide(d);var l=f;f=c,"undefined"!=typeof h[c]&&null!=h[c]&&(d&&(e=!0),k&&h[c].containerWillAppear(),h[c].show(d,function(c){e=!1,b(c.index),"undefined"!=typeof l&&null!=h[l]&&l!=f&&h[l].containerDidDisappear(),$.isFunction(i)&&oncomplete(g),a()}))},this.addFile=function(a,b){$.extend(a,new c),a.init(h.length),h.push(a),b!==!1&&Loader.loadImages(a.source)},this.preload=function(a){var b=[];for(var c in h)b.push(h[c].source);Loader.loadImages(b,function(){$.isFunction(a)&&a()})},this.release=function(){for(var a in h)null!=h[a]&&h[a].release();h=null,i.remove()},this.onEndResizeHandler=function(a){for(var b in h)null!=h[b]&&null!=h[b].onEndResizeHandler&&h[b].onEndResizeHandler(a)},this.height=function(a){return"undefined"==typeof a?i.height():void i.height(a)},this.setOverlayStyle=function(a){null!==l&&"undefined"!=typeof a?("object"==typeof a&&(a=a.join("")),a+="display: block;",l.attr("style",a)):null===l&&Console.error("You have to wait for overlay to be rendered before you set it's style")},this.getBackgroundImage=function(a){return h[a]},this.render=function(){for(var a in h)null!=h[a]&&h[a].appendTo(i);return l=$("<div class='background-image im-background-overlay' style='display: block;'></div>"),i.append(l),i},this.getContainer=function(){return i}}function BackgroundDelegate(){this.showSettings={time:1,from:{opacity:"0",scale:"1"},to:{opacity:"1",scale:"1"}},this.hideSettings={time:1,to:{opacity:"0",scale:"1",ease:Expo.easeIn},stayOnTop:!1}}function AbsoluteView(){var a,b,c,d=this,e=!1,f="center",g="center",h=!1,i=!1,j=null;this.view,this.init=function(a,b){return"undefined"!=typeof a&&null!==a?d.view=a:d.view=$("<div class='im-absolute-view'></div>"),"undefined"!=typeof b&&d.view.addClass(b),d.view[0].destroy=d.destroy,d.view[0].absoluteView=d,this},this.setFixed=function(c,f){e!==c&&("object"!=typeof f||null===f?c=!1:b=f,e=c,"undefined"!=typeof a&&d.setPosition(a))},this.setInScreen=function(a){var b=Magazine.pages.width,e=Magazine.pages.height,f=d.view.outerHeight(),g=d.view.outerWidth(),h={},i=60;"undefined"==typeof a&&(a=c);for(var j in a)switch(j){case"bottom":case"top":e-i-a[j]<f?h[j]=Math.max(e-f-i,i):h[j]=a[j];break;case"left":case"right":b-i-a[j]<g?h[j]=Math.max(b-g-i,i):h[j]=a[j]}d.view.css(h)},this.setFixedPosition=function(c){"undefined"==typeof c&&(c=a);var e=b.width,f=b.height,g=Magazine.pages.width,h=Magazine.pages.height,i=g/e,j=h/f,k=Math.max(i,j),l=k*e,m=k*f,n={top:.5*(h-m),left:.5*(g-l)},o={top:0,left:0};if("undefined"!=typeof b.settings&&"undefined"!=typeof b.settings.position&&"string"==typeof b.settings.position){var p=b.settings.position.split(" ");isNaN(p[0])&&("top"===p[0]?n.top=0:"bottom"===p[0]&&(n.top=h-m),"left"===p[1]?n.left=0:"right"===p[1]&&(n.left=g-l))}var q,o={
top:0,left:0},r={top:d.view.outerHeight()/2,left:d.view.outerWidth()/2};if("string"==typeof c){var p=c.split(" ");isNaN(p[0])||(o.left=e*parseInt(p[0])/100,o.top=f*parseInt(p[1])/100),q={top:o.top*k+n.top-r.top,left:o.left*k+n.left-r.left}}else if("object"==typeof c&&null!==c){if(o.left=e*parseInt(c.x)/100,o.top=f*parseInt(c.y)/100,"string"==typeof c.align){var s=c.align.split(" ");switch(s[0]){case"top":r.top=0;break;case"bottom":r.top=d.view.outerHeight()}switch(s[1]){case"left":r.left=0;break;case"right":r.left=d.view.outerHeight()}r.top=d.view.outerHeight()}q={top:o.top*k+n.top-r.top,left:o.left*k+n.left-r.left}}q&&d.view.css(q)},this.setPosition=function(b){if(d.view.css({top:"",left:"",bottom:"",right:"",position:"","margin-left":"","margin-top":""}),null!==j&&(d.view.removeClass(j),j=null),a=b,e)return void this.setFixedPosition(b);if(null!==b&&"undefined"!=typeof b||(b="center center"),"string"==typeof b){var i=b.split(" ");isNaN(i[0])?(j="im-align "+i.join("-"),d.view.addClass(j),f=i[0],g=i[1]):i.length>2||d.view.css({left:i[0]+"%",top:i[1]+"%"})}else if("object"==typeof b){var k={};if(b.x){if("string"==typeof b.align){var l={},m=b.align.split(" ");switch(m[0]){case"top":l.top=b.y;break;case"bottom":l.bottom=100-parseInt(b.y)}switch(m[1]){case"right":l.right=100-parseInt(b.x);break;case"left":l.left=b.x}if(h){for(var n in l)switch(n){case"top":case"bottom":l[n]=parseInt(Magazine.pages.height*(.01*l[n]));break;case"left":case"right":l[n]=parseInt(Magazine.pages.width*(.01*l[n]))}return c=l,void this.setInScreen()}for(var n in l)l[n]+="%";d.view.css(l)}else d.view.css({left:b.x+"%",top:b.y+"%"});return}for(var o in b)isNaN(b[o])||(b[o]=b[o]+"px"),"left"!==o&&"right"!==o||(g=o),"bottom"!==o&&"top"!==o||(f=o);"undefined"==typeof b.left&&"undefined"==typeof b.right?j="im-align isset-center":"undefined"==typeof b.bottom&&"undefined"==typeof b.top&&(j="im-align center-isset"),d.view.addClass(j),$.extend(k,b),d.view.css(k)}},this.toRelative=function(){d.view.attr("style","position:relative;")},this.toAbsolute=function(b){"undefined"==typeof b&&this.setPosition(a)},this.neverLeaveTheScreen=function(){h=!0},this.appendChild=function(a){d.view.append(a),d.view.find(".dynamicForm").each(function(){Console.log("AbsoluteView: Create form"),new DynamicForm(null,$(this))})},this.appendTo=function(a){a.append(d.view),d.view.find("iframe").each(function(){var a=$(this).attr("src");if(/w.soundcloud.com/.test(a)){var b=new Magazine.media.soundcloud.player(this);$(this).closest(".page").on(PageEvent.DISAPPEAR,function(a){b.pause()})}})},this.destroy=function(){$(d.view).closest(".page").off(PageEvent.DISAPPEAR),d.view=null},this.getVerticalAlignment=function(){return f},this.getHorizontalAlignment=function(){return g},this.onResizeHandler=function(a){e?this.setFixedPosition():h&&this.setInScreen()},this.height=function(){return this.view.height()},this.setRelative=function(b){i!=b&&(b===!0?d.view.css({position:"relative",top:"",bottom:"",left:"",right:""}).addClass("im-relative"):(d.view.css("position","").removeClass("im-relative"),d.setPosition(a))),i=b}}function IMRowContainer(){function a(){var a,b,c,d,e=!0,f={appear:{content:Animation.fadeInDown,text:Animation.fadeInLeft},disappear:{content:Animation.fadeOutUp,text:Animation.fadeOutRight},delay:500,duration:300};return rowView={init:function(d){return a=$('<div class="im-row-view" im-will-appear="rowWillAppear" im-will-disappear="rowWillDisappear"></div>'),c=new ImParallaxDirective,c.init(a,this),b=d,rowView},setAnimationSettings:function(a){f=$.extend(f,a)},onScroll:function(){c.onScroll()},getView:function(){return a},getData:function(){return d},setData:function(a){d=a},setView:function(b){"function"==typeof b.parent&&b.parent().length>0?b.wrap(a):a.append(b),a.find(".im-anm-content").each(function(a){$(this).css(Magazine.device.getCssProperty("animation-delay"),f.delay*a+"ms"),$(this).children().find(".im-anm-text").each(function(a){$(this).css(Magazine.device.getCssProperty("animation-delay"),f.delay*(a+1)+.5*f.duration+"ms")})})},rowWillAppear:function(){e&&Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE&&(a.find(".im-anm-content").startAnimation(f.appear.content,{display:"ignore"}),a.find(".im-anm-text").startAnimation(f.appear.text,{display:"ignore"})),b.rowWillAppear.apply(rowView),e=!1},rowWillDisappear:function(){b.rowDidDisappear.apply(rowView)},onResizeHandler:function(a){c.onResizeHandler(a)},getHeight:function(){return a.outerHeight()}},rowView}var b,c,d,e=[],f=function(){b.addClass("row-absolute")},g=function(){b.removeClass("row-absolute")},h={init:function(a){return void 0!==a?(b=$('<div class="im-row-container"></div>'),"function"==typeof a.parent&&a.parent().length>0?a.wrap(b):b.append(a)):b=$('<div class="im-row-container"></div>'),c=$('<div class="im-block im-row-align-top"></div>'),d=$('<div class="im-block im-row-align-bottom"></div>'),b.append(c),b.append(d),h},getView:function(){return b},addRow:function(b,f,g){var h=(new a).init(this);return h.setData(f),h.setView($(b.render(f))),h.align=g.align,h.align===IMRowViewAlignment.BOTTOM?d.append(h.getView()):c.append(h.getView()),e.push(h),h},onScroll:function(){for(var a=0;a<e.length;a++)e[a].onScroll()},onResizeHandler:function(a){for(var b,h=0,i=0;i<e.length;i++)e[i].onResizeHandler(a),h+=e[i].getHeight();a.size<DeviceSize.PORTRAIT?(b=Magazine.pages.height-c.height()-80,h+=b,d.css({top:Math.max(b,0)}),g()):(d.css({top:""}),h>Magazine.pages.height?g():f())},rowWillAppear:function(){h.events.trigger(IMRowEvents.ROW_APPEAR)},getRowLength:function(){return e.length},getRow:function(a){return e[a]},events:new IMEvents};return h}function PageHeader(a,b,c){function d(a,b,c,d){var e;return c.action?(e='<{{action.element}} {{#action.href}} href="{{action.href}}"{{/action.href}} target="{{action.target}}" onclick="{{action.onclick}}" class="page-header '+a+" "+(d?"page-header-mobile":"")+'" style="{{title_pos}}" data-animation="rotate3d"><img src="'+Config.magazine_url+b.uri+'"'+(b.alt?' alt="'+b.alt+'"':"")+"></{{action.element}}>",e=$(Hogan.compile(e).render(c))):e=$('<div class="page-header '+a+" "+(d?"page-header-mobile":"")+'"><img src="'+Config.magazine_url+b.uri+'"'+(b.alt?' alt="'+b.alt+'"':"")+"></div>"),e}var e,f,g=this,h=!0;return this.init=function(){a.action=new ActionModel(a.action,"header-cta");var b=[];a.image&&(e=d(a.title_position,a.image,a),b.push(Config.magazine_url+a.image.uri)),a.title_mobile_position&&0!==a.title_mobile_position.length&&(a.mobile_image?(f=d(a.title_mobile_position,a.mobile_image,a,!0),b.push(Config.magazine_url+a.mobile_image.uri)):e&&(f=d(a.title_mobile_position,a.image,a,!0))),b.length>0?Loader.loadImages(b,function(){c&&jQuery.isFunction(c)&&c(),g.placeImage()}):c&&jQuery.isFunction(c)&&c()},this.placeImage=function(){(e||f)&&(e&&b.append(e),f&&b.append(f),g.show())},this.removeImage=function(){(e||f)&&(e&&b.remove(e),f&&b.remove(f))},this.show=function(){(e||f)&&h&&(h=!1,e&&"function"==typeof e.startAnimation&&e.startAnimation(Animation.bounceIn),f&&"function"==typeof f.startAnimation&&f.startAnimation(Animation.bounceIn))},this.hide=function(){h||!e&&!f||(h=!0,e&&"function"==typeof e.startAnimation&&e.startAnimation(Animation.bounceOut),f&&"function"==typeof f.startAnimation&&f.startAnimation(Animation.bounceOut))},this.placeAgain=function(){g.placeImage()},this.destroy=function(){g.removeImage(),e=null,f=null,g=null},g.init(),this}function IMHeader(){function a(a,e){"object"!=typeof a&&(a=Magazine.getNavigationController().getCurrentPage()),d.clear();var g=f.duration,h=c.find(".animated");h.each(function(b){var c,e=f.duration,h=$(this);if(a.disableHeader||!$(this).hasClass("not-changing")){switch($(this).data("duration")&&(g=Math.max($(this).data("duration"),e),e=$(this).data("duration")),$(this).data("animation")){case"rotate3d":c={rotationX:90};break;case"slidedown":c={y:-(h.outerHeight()+h.offset().top)-1};break;case"fade":c={opacity:"0"};break;case"hideup":c={y:$(".im-header-container").outerHeight()-parseInt(h.css("top"))};break;case"left":default:c={x:-(h.outerWidth()+h.offset().left)-1}}(Magazine.device.isIE8||Magazine.device.isIE9)&&(c.opacity=0),c.ease=f.hideEasing,d.to(this,e,c,"-="+g)}}),d.call(function(){b(a),a.disableHeader&&d.pause()}),d.addLabel("show",g),h.each(function(a){var b=f.duration;$(this).data("duration")&&(b=$(this).data("duration")),d.to(this,b,{x:0,y:0,rotationX:0,rotationY:0,opacity:1,ease:f.showEasing},0===a?void 0:"-="+b)}),e===!0&&d.pause()}function b(a){var b=a.getHeaderData();c.find("[data-im-tp='true']").each(function(){"undefined"!=typeof b[$(this).data("im-tp-name")]&&$(this).html(b[$(this).data("im-tp-name")])})}var c,d,e=!1,f={duration:.5,showEasing:"Quad.easeOut",hideEasing:"Quad.easeIn"};this.init=function(b,e){var f=!1,g=function(g){if(null!=b.image&&(b.image.width_retina=b.image.width/2,b.image.height_retina=b.image.height/2,b.image.background_size="background-size: "+b.image.width_retina+"px "+b.image.height_retina+"px;"),null!=b.action&&(b.action=new ActionModel(b.action,"header-cta")),null!==b.title_position){b.title_pos="";var h=$.extend({top:"auto",right:"auto",bottom:"auto",left:"auto"},b.title_position);for(var i in h)isNaN(h[i])||(h[i]=h[i]+"px"),b.title_pos+=i+": "+h[i]+";"}if(c.append(Hogan.compile(g.response).render(b)),!f){if(null!==b.title_position&&"undefined"!=typeof b.title_position.top){var j=c.find(".im-header-title-container");j.find("h1").length>0&&j.height(Math.min(b.title_position.top,80)+j.find("h1").outerHeight())}null!==b.title_position&&"undefined"!=typeof b.title_position.bottom&&c.find(".im-header-title-container h1").length>0&&(c.find(".im-header-title-container h1").css("bottom","0"),c.find(".im-header-title-container").css("height",70-b.title_position.bottom+"px"))}a(Magazine.getNavigationController().getCurrentPage(),!0),setTimeout(function(){Magazine.getNavigationController().getCurrentPage().disableHeader||(d.seek("show"),d.play()),e()},100),Magazine.getNavigationController().getCurrentPage().disableHeader?c.css("visibility","hidden"):c.addClass("show")};d=new TimelineMax,c=$("<header class='im-header-container'></header>"),null===b&&(f=!0,b={}),"undefined"==typeof b.name&&(b.name="header01"),c.addClass("im-h-"+b.name),Loader.loadCss(Config.viewer_url+"/headers/"+b.name+"/style.css"),Loader.loadFile(Config.viewer_url+"/headers/"+b.name+"/header.html",g)},this.addToMagazine=function(){Magazine.container.prepend(c)},this.onPageChangeHandler=function(b,f){f.disableHeader||e?(Magazine.device.isIE8||Magazine.device.isIE9,a(f)):(a(f),d.seek(0),d.play(),c.css("visibility","visible").addClass("show"))},this.onSwitchSize=function(a,b){e=a.size<DeviceSize.PORTRAIT}}function NavigationControls(){function a(){return c("up").on("click",function(){f.up()})}function b(){return c("down").on("click",function(){f.down()})}function c(a){return $("<a href='javascript:void(0);' class='nav-button'><span class='im-sp im-sp-arrow-"+a+"-2'></span></a>")}var d,e,f=this,g=0,h=0;this.count=0,this.init=function(a,b,c,d){"undefined"==typeof c&&(c=0),"undefined"==typeof d&&(d="item"),g=c,h=b,f.count=a,e=d},this.getContainer=function(){return d},this.render=function(){if(f.count>1){d=$("<div class='im-cl-navigation-element' />");for(var c=$("<div class='items'></div>"),g=0;g<f.count;g++)c.append("<a href='"+h+"/"+e+"/"+g+"'></a>");d.append(a()),d.append(c),d.append(b())}return d},this.setCurrent=function(a){g=a,f.count>1&&(d.find(".items .active").removeClass("active"),$(d.find(".items").children()[a]).addClass("active"))},this.goto=function(a){f.setCurrent(a),window.location.href=h+"/"+e+"/"+a},this.up=function(){g>0?f.goto(g-1):f.goto(f.count-1)},this.down=function(){g<f.count-1?f.goto(g+1):f.goto(0)},this.onHashChange=function(a){"undefined"!=typeof a[e]&&isNumber(a[e])&&f.setCurrent(parseInt(a[e]))}}function getBackgroundImage(){"use strict";return void 0==_imhelpers.getBackgroundImage&&(_imhelpers.getBackgroundImage={execute:function(a){var b={width:"",height:"",max_width:"",max_height:"",crop:""};if("undefined"==typeof a)return"";if(Magazine.device.isIE8)b.width=Assets.maxWidth,b.height=Assets.maxHeight,b.crop=1,b.path=Config.is_preview?a:Config.magazine_url+a,b.type=Config.is_preview?"preview":"live";else{if(Magazine.device.type!=DeviceType.MOBILE)return Config.magazine_url+a;b.max_width=750,b.max_height=750,b.path=Config.is_preview?a:Config.magazine_url+a,b.type=Config.is_preview?"preview":"live"}if(Config.is_preview)return Config.piscina_url+"/?"+jQuery.param(b);var c=[];delete b.path,delete b.type;for(var d in b)c.push(b[d]);return a=a.splice(a.lastIndexOf("/")+1,0,c.join("-")),Config.magazine_url+a}}),_imhelpers.getBackgroundImage}function getImageUrl(){return void 0===_imhelpers.getImageUrl&&(_imhelpers.getImageUrl={execute:function(a,b,c,d,e,f,g,h){var i={width:"",height:"",max_width:"",max_height:"",crop:""};if("undefined"==typeof a)return"";if(void 0!==b&&null!==b&&(i.width=b),void 0!==c&&null!==c&&(i.height=c),void 0!==d&&null!==d&&(i.max_width=d),void 0!==e&&null!==e&&(i.max_height=e),"undefined"!=typeof f&&f&&(i.crop=f),"undefined"!=typeof g&&g&&Config.is_preview){i.clear=g;var j=new Date;i._=j.getTime()}if(i.path=Config.is_preview?a:Config.magazine_url+a,i.type=Config.is_preview?"preview":"live",1===h&&(i.path=a,i.type="media"),Config.is_preview||1===h)return Config.piscina_url+"/?"+jQuery.param(i);var k=[];delete i.path,delete i.type;for(var l in i)k.push(i[l]);return a=a.splice(a.lastIndexOf("/")+1,0,k.join("-")),Config.magazine_url+a}}),_imhelpers.getImageUrl}function translate(){return void 0===_imhelpers.translate&&(_imhelpers.translate={execute:function(a){return Translate.getLabel(a)}}),_imhelpers.translate}function trackEvent(){return void 0===_imhelpers.trackEvent&&(_imhelpers.trackEvent={execute:function(a,b,c,d){var e=[];for(var f in arguments)e.push(arguments[f]);return"onclick=\"Magazine.tracker.trackEvent('"+e.join("','")+"');\""}}),_imhelpers.trackEvent}function MousePositionScroll(a){var b=0,c=0,d=0,e=0,f=!1,g=.7,h=!1,i=.02;this.orientation=MousePositionScrollOrientation.HORIZONTAL,this.init=function(b){var c=this;"undefined"!=typeof b&&(this.orientation=b),a.addClass("im-mouse-position-scroll"),a.on("mousemove",function(a){c.onMouseMove(a)}),a.on("mouseleave mouseenter",function(a){h="mouseenter"===a.type})},this.onMouseMove=function(a){var d,g,h;d=a.clientX-c,g=.3*b,h=.7*b,d<g?e=(d-g)*i:d>h?e=(d-h)*i:(f=!1,e=0),f||0===e||(f=!0,this.move())},this.moveTo=function(b){var c,d;this.orientation===MousePositionScrollOrientation.VERTICAL?(c={y:a.scrollTop()},d={y:b}):(c={x:a.scrollLeft()},d={x:b}),d.onUpdate=function(){this.orientation===MousePositionScrollOrientation.VERTICAL?a.scrollTop(c.y):a.scrollLeft(c.x)},d.ease="easeInOut",TweenLite.to(c,.6,d)},this.move=function(){var c=this;a.scrollLeft(a.scrollLeft()+e);var i=a.scrollLeft()+b;(0!==a.scrollLeft()||i<d)&&(e>.05||e<-.05)?Magazine.device.requestAnimationFrame(function(){h||(e*=g),c.move()}):f=!1},this.release=function(){a.off("mousemove mouseleave mouseenter")},this.onResizeHandler=function(e){this.orientation===MousePositionScrollOrientation.HORIZONTAL?(b=a.outerWidth(),c=a.offset().left,d=a[0].scrollWidth):(b=a.outerHeight(),c=a.offset().top,d=a[0].scrollHeight)},a[0].mousePositionScroll=this}function ScrollHandler(){function a(a,d){if(!g&&(a.preventDefault(),c.height<e.outerHeight())){var h=b();Magazine.device.OS===DeviceOS.WINDOWS&&(d*=10);var i=Math.round(100*(f+d*-20))/100;c.scrollTo(Math.min(h,Math.max(i,0)))}}function b(){return"undefined"!=typeof e&&null!==e?"vertical"===k.orientation?Math.max(0,(c.height-e.outerHeight())*-1):Math.max(0,(c.width-e.outerWidth())*-1):0}var c=this,d=null,e=null,f=0,g=!1,h=null,i=0,j=0,k={orientation:"vertical"},l=[];this.delta=500,this.height=0,this.width=0,this.init=function(g,j,l){"undefined"!=typeof l&&(k=$.extend(k,l)),d=g,e=j,"vertical"===k.orientation?(0===this.height&&(this.height=d.height()),d.on("mousewheel",a)):0===this.width&&(this.width=d.width()),h=new Touch,h.preventDefault=!0,h.init(d,k.orientation,!0),h.onTouchStart=function(){i=f},h.onTouchEnd=function(a,b){},h.onVerticalDrag=function(a,d){c.scrollTo(Math.min(b(),Math.max(i+d*-1,0)))},h.onHorizontalDrag=function(a,d){c.scrollTo(Math.min(b(),Math.max(i+d*-1,0)))}},this.onResizeHandler=function(a){var d=b();f>d&&c.scrollTo(d)},this.up=function(a){var d=b(),e=Math.round(100*(f+c.delta*-1))/100;c.scrollTo(Math.min(d,Math.max(e,0)),a!==!1||a)},this.down=function(a){var d=b(),e=Math.round(100*(f+c.delta))/100;c.scrollTo(Math.min(d,Math.max(e,0)),a!==!1||a)},this.getTotalHeight=function(){return e.outerHeight()},this.getTotalWidth=function(){return e.outerWidth()},this.getPosition=function(){return f},this.canScroll=function(){return 0!==b()},this.trackScroll=function(a){var c=b(),d=100/(c/a);if(Math.floor(d/25)!=j){j=Math.floor(d/25);var e;e="vertical"===k.orientation?a>f?"Down":"Up":a>f?"Right":"Left",Magazine.tracker.trackEvent("Scroll",e,25*j+"%")}},this.disable=function(){g=!0,null!==h&&h.disable()},this.enable=function(){g=!1,null!==h&&h.enable()},this.release=function(){l=[],$(".im-scroll-handler-sticky",e).attr("style",""),null!==e&&(Magazine.device.isIE8?e.css("top",""):e.css(Magazine.device.getCssProperty("transform"),"")),null!==d&&d.off("mousewheel",a),d=null,e=null,null!==h&&h.release(),h=null},this.addEventListener=function(a,b){l.push({event:a,action:b})},this.didScroll=function(a){var b;b="vertical"===k.orientation?{height:"height",outerHeight:"outerHeight"}:{height:"width",outerHeight:"outerWidth"};var c=e[b.outerHeight]();"function"==typeof this.onScroll&&this.onScroll(a,a+this[b.height],c);for(var d in l)"onscroll"===l[d].event&&l[d].action.apply(this,[a,a+this[b.height],c])},this.scrollTo=function(a,d){var g={};if("vertical"===k.orientation?(g.top="top",g.y="y"):(g.top="left",g.y="x"),isNaN(a)&&"object"==typeof a){var h=a;a=h.offset()[g.top]-e.offset()[g.top]}if(a=Math.min(b(),Math.max(a,0)),"vertical"===k.orientation&&this.trackScroll(a),d===!0){var i=Math.min(.001*Math.abs(f-a),1),j={};j[g.y]=f;var l={onUpdate:function(){c.scrollTo(j[g.y])},onComplete:function(){c.scrollTo(a)},ease:"easeInOut"};return l[g.y]=a,void TweenMax.to(j,i,l)}f=a,c.didScroll(f),$(".im-scroll-handler-sticky",e).each(function(a){var b=$(this),c=parseInt(b.data("sh-start")),d=parseInt(b.data("sh-end"));c<=f?Magazine.device.isIE8?b.css(g.top,Math.min(d-c,f-c)+"px"):"vertical"===k.orientation?b.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,Math.min(d-c,f-c))):b.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(Math.min(d-c,f-c),0)):Magazine.device.isIE8?b.css(g.top,""):b.css(Magazine.device.getCssProperty("transform"),"")}),Magazine.device.isIE8?e.css(g.top,-f+"px"):"vertical"===k.orientation?e.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(0,-f)):e.css(Magazine.device.getCssProperty("transform"),Magazine.device.getCssTranslate(-f,0))}}function IMGesture(a){function b(){if(Magazine.device.SUPPORT_TOUCH){var b=[];for(var c in m)b.push(m[c]);$(a).on(b.join(" "),e)}d()}function c(a){var b=a.originalEvent.wheelDelta,c=a.originalEvent.detail;return c?b?b/c/40*c>0?1:-1:Magazine.device.OS===DeviceOS.MAC&&Magazine.device.browser===DeviceBrowser.FIREFOX?-c/300:-c/3:b/120}function d(){var b,d=0;$(a).on("mousewheel scroll",function(a){if(!(o||$(a.target).closest(".scroller").length>0)){p&&a.preventDefault();var e=c(a),g=e;isNaN(g)||(d+=Math.abs(g)),b>.9&&(b=.9),b<-.9&&(b=-.9),"undefined"!=typeof b&&null!==b&&(Math.abs(g)>Math.abs(b)||b>.9)&&d>3&&(clearTimeout(l),l=setTimeout(function(){d=0},300),k=!1),b=g,k||(k=!0,0==r&&(f(e>=0?IMGestures.DOWN:IMGestures.UP),d=0))}})}function e(a){if(!o){var b,c=a.type;switch(a=a.originalEvent,"ontouchstart"in window?b=a.touches.length>0?a.touches[0]:a.changedTouches[0]:"undefined"!=typeof a.screenY?(b=a,b.pageX=a.screenX,b.pageY=a.screenY):b=a,c){case m.START_EVENT:j={x:b.pageX,y:b.pageY};break;case m.MOVE_EVENT:break;case m.END_EVENT:var d={x:b.pageX,y:b.pageY};g(j,d,0)>q.threshold&&f(i(j,d));break;case m.CANCEL_EVENT:}}}function f(b){for(var c in n)n[c].event===b&&n[c].action.apply(a,[b])}function g(a,b,c){var d=0;return d=Math.round(Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))),c&&(d+=c),d}function h(a,b){var c=a.x-b.x,d=b.y-a.y,e=Math.atan2(d,c),f=Math.round(180*e/Math.PI);return f<0&&(f=360-Math.abs(f)),f}function i(a,b){var c=h(a,b);return c<=45&&c>=0?IMGestures.LEFT:c<=360&&c>=315?IMGestures.LEFT:c>=135&&c<=225?IMGestures.RIGHT:c>45&&c<135?IMGestures.DOWN:IMGestures.UP}var j,k,l,m=Magazine.device.getTouchEvents(),n=[],o=!1,p=!0,q={threshold:50},r=!1;return b(),{on:function(a,b){n.push({event:a,action:b})},off:function(a,b){var c=[];for(var d in n)"undefined"!=typeof b&&n[d].action!==b||a===n[d].event&&c.unshift(d);for(var d in c)n.splice(c[d],1)},disable:function(){o=!0},enable:function(){o=!1},release:function(){var b=[];for(var c in m)b.push(m[c]);$(a).off(b.join(" "),e),n=null},setPreventDefault:function(a){p=a}}}function AnimatedObject(){function a(){switch(d){case AnimatedObjectStyles.SLIDE:return{x:c.length%2==0?-300:300,opacity:0,ease:"easeOutPower4"};case AnimatedObjectStyles.FADE:return{opacity:0};case AnimatedObjectStyles.SCALE:return{scaleX:2,scaleY:2,opacity:0}}}function b(){switch(d){case AnimatedObjectStyles.SLIDE:return{scaleX:1,scaleY:1,x:0,opacity:1}}}var c=[],d=AnimatedObjectStyles.SLIDE,e=.4,f=new TimelineLite;this.setAnimationStyle=function(a){d=a},this.addObject=function(d){TweenLite.set(d,a()),f.to(d,e,b(),"-="+e),c.push(d)},this.setReady=function(){f.progress(0)},this.show=function(){f.play()},this.reset=function(){f.progress(0),f.play()},this.hide=function(){f.progress(100),f.reverse()}}function ImageCarousel(a){function b(){if(null==j&&(j=$("<div class='im-image-carousel-indicators'>"),e.length>1))for(var a in e){var b=$("<a href='#'></a>");b.on("click",function(a){a.preventDefault(),c.stopTimer(),c.showImage($(this).index())}),j.append(b)}return j}var c=this,d=a||{},e=[],f=-1,g=5e3,h=null,i=$("<div class='im-image-carousel'></div>"),j=null,k=null;this.pause=!0,this.slideSpeed=1,this.slide=d.slide||!1,this.isAnimating,this.isFullscreen=!0,this.size={width:"100%",height:"100%"},this.realsize={},this.addImage=function(a,b){e.push(a),a.setController(c),i.append(a.getContainer())},this.getImage=function(a){return e[a]},this.getLength=function(){return e.length},this.showImage=function(a){function d(){e[a].show(a>f),$(b().children()[a]).addClass("active"),f=a}a!=f&&(f>=0?e[a].preload(function(){c.isAnimating||(c.onResizeHandler(),e[f].hide(a<f),$(b().children()[f]).removeClass("active"),d())}):d())},this.reset=function(){e&&e[f]&&e[f].reset()},this.onResizeHandler=function(){c.realsize.width=i.width(),c.realsize.height=i.height()},this.onEndResizeHandler=function(a){for(var b in e)e[b].onEndResizeHandler(a)},this.render=function(){return i.append(b()),k=i.scanDirectives(),i},this.getStartParams=function(a){return c.slide?{x:a?-c.realsize.width+"px":c.realsize.width+"px"}:{opacity:0}},this.getHideParams=function(a){return c.slide?{x:a?-c.realsize.width+"px":c.realsize.width+"px",ease:"easeInPower4"}:{opacity:1}},this.startTimer=function(){c.pause===!0&&"undefined"!=typeof e[f]&&e[f].start(),c.pause=!1,e.length>1&&(null!=h||Config.is_screenshot||(h=setInterval(function(){c.next()},g)))},this.stopTimer=function(){c.pause=!0,null!=h&&(clearInterval(h),h=null),"undefined"!=typeof e[f]&&e[f].pause()},this.resetTimer=function(){null==h||c.pause||(c.stopTimer(),c.startTimer())},this.next=function(){c.showImage((f+1)%e.length)},this.prev=function(){var a=f-1;a<0&&(a=e.length-1),c.showImage(f-1%e.length)},this.release=function(){c.stopTimer(),i.remove(),e=null}}function ImageCarouselImage(){var a,b,c,d,e,f=this,g=$("<div class='im-image-carousel-image'></div>"),h=new AnimatedObject,i=!1,j=!1;this.init=function(a){c=a},this.setController=function(b){if(a=b,"object"==typeof c&&null!==c)if(b.isFullscreen)i=new Background,i.init([c]),g.prepend(i.render()),i.show(0,!1),d=Utils.viewHelper("getBackgroundImage",[c.uri]);else{d=Utils.viewHelper("getImageUrl",[c.uri,null,null,b.size.width,b.size.height]);var e={"background-image":"url('"+d+"')"};"undefined"!=typeof c.settings&&"undefined"!=typeof c.settings.position&&(e["background-position"]=c.settings.position),g.css(e)}},this.getContainer=function(){return g},this.pause=function(){i&&i.pageDidDisappear()},this.reset=function(){h.reset()},this.start=function(){i&&i.pageWillAppear()},this.preload=function(a){j?a():Loader.loadImages([d],function(){j=!0,a()})},this.setTitle=function(a,b,c){f.getInfoContainer().children().length>0&&f.getInfoContainer().append("<br />");var d=$("<h1 class='im-ts-title-background' im-object='im-style-directive'>"+a+"</h1>");this.setStyle(d,b,c),f.getInfoContainer().prepend(d),h.addObject(d)},this.setSubtitle=function(a,b,c){f.getInfoContainer().children().length>0&&f.getInfoContainer().append("<br />");var d=$("<h2 class='im-ts-title-background' im-object='im-style-directive'>"+a+"</h2>");this.setStyle(d,b,c),f.getInfoContainer().append(d),h.addObject(d)},this.setStyle=function(a,b,c){"undefined"!=typeof b&&b.length>0&&("string"==typeof b?a.attr("data-style",b):a.attr("data-style",b.join(""))),"undefined"!=typeof c&&c.length>0&&("string"==typeof c?a.attr("data-mobile-style",c):a.attr("data-mobile-style",c.join("")))},this.getInfoContainer=function(){return b||(b=$("<div class='im-image-carousel-info'></div>"),g.append(b)),b},this.setDesktopPosition=function(a,b){"undefined"==typeof a&&"undefined"==typeof b?"object"==typeof e?this.setPosition(e[0],e[1]):this.setPosition():e=[a,b]},this.setPosition=function(a,c){"undefined"!=typeof b&&("undefined"==typeof a?f.getInfoContainer().css({top:"",left:""}):"object"==typeof a&&(c=a[1],a=a[0]),"undefined"!=typeof c&&c.indexOf("px")<0&&c.length>0&&(c+="%"),"undefined"!=typeof a&&a.indexOf("px")<0&&a.length>0&&(a+="%"),f.getInfoContainer().css({top:c,left:a}))},this.show=function(b){a.isAnimating=!0,g.css({"z-index":"2"}).show(),h.setReady(),Magazine.device.isIE8||Magazine.device.isIE9?(TweenLite.set(g,a.getStartParams(b)),TweenLite.to(g,.8*a.slideSpeed,{x:0,onComplete:function(){h.show(),a.isAnimating=!1},opacity:"1"})):g.startAnimation(Animation.fadeIn,{},function(){h.show(),a.isAnimating=!1}),f.getInfoContainer().show(),i&&i.pageWillAppear()},this.hide=function(b,c){function d(){i&&i.pageDidDisappear(),g.hide(),$.isFunction(c)&&c()}g.css({"z-index":"1"}),h.hide(),Magazine.device.isIE8||Magazine.device.isIE9?TweenLite.to(g,a.slideSpeed,$.extend({onComplete:d},a.getHideParams(b))):g.startAnimation(Animation.fadeOut,{},d)},this.onEndResizeHandler=function(a){i&&i.onEndResizeHandler(a)}}function DotPaginator(){function a(){c=$("<div class='im-dot-paginator "+i+"'>");for(var a=0;a<b;a++){var j=$("<a href='#'><span></span></a>");c.append(j),h.push(j)}if("vertical"===i){var k=b*f+(b-1)*g;c.css({"margin-top":-(k/2)+"px",height:k+g})}else{var l=b*f+(b-1)*g;c.css({"margin-left":-(l/2)+"px",width:l+g})}"undefined"==typeof d&&(d=0),h[d].addClass("active"),c.children().on("click",function(a){a.preventDefault();var b=$(this).index();e.set(b),"function"==typeof e.onclick&&e.onclick(b)})}var b,c,d,e=this,f=10,g=20,h=[],i="horizontal";this.init=function(a,c){b=a,"undefined"!=typeof c&&(i=c)},this.set=function(a){a<h.length&&h[a].addClass("active"),"undefined"!=typeof d&&d!=a&&h[d].removeClass("active"),d=a},this.appendTo=function(b){return"undefined"==typeof c&&a(),b.append(c),b},this.release=function(){c.children().off("click")},this.onclick=null}function Marker(){function a(){return"undefined"==typeof e&&(e=$('<span class="im-ts-label"></span>')),e}function b(){return"undefined"==typeof f&&(f=$(d).clone().addClass("clone"),f.children(".im-ts-label").remove(),l.appendChild(f),TweenMax.set(f[0],{scale:1,opacity:0})),f}function c(a,b,c){var e=d.height(),f=d.width();k&&(e/=1.5,f=f);var g=Math.round((e+c/2)*Math.sin(2*Math.PI/360*a)+e/2),h=Math.round((f+b/2)*Math.cos(2*Math.PI/360*a)-b/2+f/2),i=h+"px",j=g+"px";return{left:i,top:j}}var d,e,f,g,h,i,j=!1,k=!1,l=null;this.index=0,this.init=function(a,b){return this.index=a,l=(new AbsoluteView).init(),b?(i=b,d=i):d=$("<a class='im-ts-button marker hotspot'></a>"),d[0].marker=this,Magazine.device.isIE8||TweenMax.set(d[0],{scale:.1,opacity:0}),l.appendChild(d),this},this.getOffset=function(){return d.offset()},this.getLabel=function(){return e},this.getLabelSize=function(){return!!e&&{width:$(".im-ts-label.hover-label")[0].scrollWidth,height:$(".im-ts-label.hover-label")[0].scrollHeight}},this.getLabel=function(){return!!j&&e},this.show=function(a,b,c,e){b=b||"easeOut",c=c||.6,e=e||.3,Magazine.device.isIE8||TweenMax.to(d,c,{scale:1,delay:e,opacity:1,ease:b,onComplete:function(){"function"==typeof a&&a.apply(d)}})},this.setAction=function(a){"string"==typeof a?(0===a.indexOf("http")&&(d.attr("target","_blank"),d.attr("onclick","Magazine.tracker.trackEvent('outbound', 'click', $(this).attr('href'));")),d.attr("href",a)):"object"==typeof a&&null!=a&&(d.attr("href",a.href),d.attr("onclick",a.onclick),d.attr("target",a.target))},this.getActionUrl=function(){},this.setImage=function(a){null!=a&&"undefined"!=typeof a&&(g=a,d.addClass("marker-custom"),k=!0,d.css({"background-image":"url('"+Config.magazine_url+a.uri+"')",width:a.width,height:a.height}))},this.setCharacter=function(a){null!=a&&"undefined"!=typeof a&&(h=a)},this.setPosition=function(a){l.setPosition(a)},this.setFixed=function(a,b){l.setFixed(a,b)},this.onResizeHandler=function(a){l.onResizeHandler(a)},this.pulseAnimation=function(a,c,d){if("undefined"==typeof a||a){"undefined"==typeof d&&(d=0),"undefined"==typeof c&&(c=0);var e=3e3*Math.random()+2e3;$(b()).startAnimation(Animation.pulseInOut,{loop:c,loopDelay:e,delay:d})}else $(b()).abortAnimation(Animation.pulseInOut),$(b()).hide()},this.setLabel=function(b,c){null!==b&&"undefined"!=typeof b&&(j=!0,a().html(b),"undefined"!=typeof c&&a().addClass(c))},this.setLabelPosition=function(b){if("undefined"!=typeof b&&null!=b){var d={};"object"!=typeof b&&(d=c(b,a().outerWidth(),a().outerHeight()),k&&setTimeout(function(){d=c(b,a().outerWidth(),a().outerHeight()),a().css(d)},500)),a().css(d)}},this.appendTo=function(a){"undefined"!=typeof g||"undefined"!=typeof i||("string"==typeof h||"number"==typeof h?d.append('<div class="marker-number im-ts-button-color">'+h+"</div>"):d.append('<div class="im-sp im-sp-plus"></div>')),j&&d.append(e),l.appendTo(a)},this.set3dLevel=function(a){l.view.addClass("im-3d im-level-"+a)},this.getElement=function(){return d}}function TextBlock(){var a,b,c,d=null,e=!1,f=null;this.title=null,this.subtitle=null,this.description=null,this.button=null,this.order=["title","subtitle","description","button"],this.init=function(){a=$("<div class='im-cl-text-block'></div>")},this.setTitle=function(a){null!==a&&""!==a&&"undefined"!=typeof a&&(this.title=$("<h2 class='im-ts-title-background'>"+a+"</h2>"))},this.setSubtitle=function(a){null!==a&&""!==a&&"undefined"!=typeof a&&(this.subtitle=$("<h4 class='im-ts-subtitle-background'>"+a+"</h4>"))},this.setDescription=function(a){null!==a&&""!==a&&"undefined"!=typeof a&&(this.description=$("<div class='paragraph im-ts-paragraph-background im-ts-border-radius'>"+a+"</div>"))},this.setColumns=function(a){null!=this.description&&this.description.addClass("im-columns-"+a)},this.setButton=function(a,b,c){"undefined"==typeof c&&(c=""),c+=" im-ts-button button im-sp-after im-sp-arrow-down-s-2-after im-ts-border-radius","function"==typeof b?(this.button=$('<a class="'+c+'" href="#">'+a+"</a>"),this.button.on("click",b)):"object"==typeof b?this.button=$('<a class="'+c+'" '+b.getAnchor()+">"+a+"</a>"):Console.error("Unknown action given to button: TextBlock")},this.setStyle=function(a){null!==a&&"undefined"!=typeof a&&(f="undefined"==typeof a.appendTo?new StyleModel(a):a,e&&(Magazine.device.size<=DeviceSize.MOBILE_LANDSCAPE?(null!==this.title&&this.title.attr("style",f.get(["title","title_background","m_title","m_title_background"])),
null!==this.subtitle&&this.subtitle.attr("style",f.get(["subtitle","subtitle_background","m_subtitle","m_subtitle_background"])),null!==this.description&&this.description.attr("style",f.get(["paragraph","paragraph_background","m_paragraph","m_paragraph_background"]))):(null!==this.title&&this.title.attr("style",f.get(["title","title_background"])),null!==this.subtitle&&this.subtitle.attr("style",f.get(["subtitle","subtitle_background"])),null!==this.description&&this.description.attr("style",f.get(["paragraph","paragraph_background"]))),null!==this.button&&this.button.attr("style",f.get(["button","button_color"]))))},this.height=function(){return d.height()},this.setPosition=function(b){b===c&&void 0!==b||(c=b,null===d&&(d=(new AbsoluteView).init(),d.appendChild(a)),d.setPosition(b))},this.setSize=function(b,c){"undefined"!=typeof b&&a.width(b),"undefined"!=typeof c&&a.height(c)},this.replace=function(){},this.show=function(){},this.hide=function(){},this.render=function(){e=!0;var b=!0;for(var c in this.order){var g=this[this.order[c]];null!==g&&(b||"subtitle"!==this.order[c]&&"title"!==this.order[c]||a.append("<br />"),b=!1,a.append(this[this.order[c]]))}return null!==f&&this.setStyle(f),null!==d?d.view:a},this.removeRadius=function(){$($(a).find(".paragraph")[0]).removeClass("im-ts-border-radius")},this.onSwitchSize=function(c,d){"undefined"==typeof b&&null!==this.description&&(b=$(this.description.children("p")[0]).css("text-align")),c.size>DeviceSize.MOBILE_LANDSCAPE?(d||a.css({"text-align":b}),e&&null!==f&&(null!==this.title&&this.title.attr("style",f.get(["title","title_background"])),null!==this.subtitle&&this.subtitle.attr("style",f.get(["subtitle","subtitle_background"])),null!==this.description&&this.description.attr("style",f.get(["paragraph","paragraph_background"])),null!==this.button&&this.button.attr("style",f.get(["button","button_color"])))):(d||a.css({"text-align":"right"!==b?b:"left"}),e&&null!==f&&(null!==this.title&&this.title.attr("style",f.get(["title","title_background","m_title","m_title_background"])),null!==this.subtitle&&this.subtitle.attr("style",f.get(["subtitle","subtitle_background","m_subtitle","m_subtitle_background"])),null!==this.description&&this.description.attr("style",f.get(["paragraph","paragraph_background","m_paragraph","m_paragraph_background"])),null!==this.button&&this.button.attr("style",f.get(["button","button_color","m_button","m_button_color"]))))},this.afterRendering=function(){null!==this.description&&("undefined"==typeof b&&(b=$(this.description.children("p")[0]).css("text-align")),this.description.children("p").css({"text-align":""}),Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE?a.css({"text-align":b}):a.css({"text-align":"right"!==b?b:"left"})),null!==this.title&&this.title.hasTransparentBackground()&&this.title.css({padding:"0px"}),null!==this.subtitle&&this.subtitle.hasTransparentBackground()&&this.subtitle.css({padding:"0px"}),null!==this.description&&this.description.hasTransparentBackground()&&this.description.css({padding:"0px"})},this.appendTo=function(b){this.render(),null!==d?d.appendTo(b):b.append(a),b[0].offsetHeight},this.getHeight=function(){return a[0].offsetHeight}}function IMDialogGroup(a,b){function c(){this.release=function(){delete this.view,delete this.parent,delete this.data,delete this.template},this.show=function(a){this.view=$("<div class='dialog-pages'><div class='dialog-page'>"+this.template.render(this.data)+"</div></div>"),this.parent.contentContainer.append(this.view),this.view.scanDirectives(),this.view.find(".dynamicForm").each(function(){new DynamicForm(null,$(this))}),a&&this.view.startAnimation(a),"function"==typeof i.onAddedToStage&&i.onAddedToStage(this.view)},this.hide=function(a){if(a){var b=this;this.view.startAnimation(a,{},function(){b.view.remove()})}else this.view.remove()}}var d,e=[],f=Hogan.compile(b),g=!1,h=-1,i=this;this.template='<div class="im-ts-overlay {{className}}"><a href="{{urlbase}}" aria-label="Close" class="close">&#10060;</a>{{#navigation}}<a href="#" aria-label="Back" class="previous-overlay">&#59237;</a><a href="#" aria-label="Next" class="next-overlay">&#59238;</a>{{/navigation}}<div class="content-container"></div></div>',this.add=function(a){var b=new c;b.data=a,b.parent=this,b.template=f,e.push(b)},this.addToStage=function(){var b=this,c={urlbase:"#!/"+("undefined"==typeof this.urlbase?Magazine.getNavigationController().getCurrentPage().alias:this.urlbase),navigation:e.length>1,className:this.className};d=$(Hogan.compile(this.template).render(c)),a.append(d),d.startAnimation("slideInUp"),d.find(".next-overlay").on("click",function(a){var c=parseInt(h)+1;c>=e.length-1&&(c%=e.length),$(this).attr("href","#!/"+b.urlbase+"/item/"+c)}),d.find(".previous-overlay").on("click",function(a){var c=parseInt(h)-1;c<0&&(c=e.length+c),$(this).attr("href","#!/"+b.urlbase+"/item/"+c)}),this.contentContainer=$(".content-container",d),g=!0},this.hide=function(){d.startAnimation(Animation.slideOutDown,{},function(){d.remove(),g=!1}),h=-1},this.release=function(){for(var a in e)e[a].release()},this.show=function(a){var b="fadeIn";"undefined"==typeof a&&(a=0),g||this.addToStage(),h!==-1&&(h<a?(e[h].hide("slideOutLeft"),b="slideInLeft"):(e[h].hide("slideOutRight"),b="slideInRight")),e[a].show(b),h=a}}function CustomApi(){var a=this,b={},c=function(a,b){CustomApiCache[a]=b},d=function(b){CustomApiCache[b]={preserved:a}},e=function(a){return"undefined"!==CustomApiCache[a]&&null!==CustomApiCache[a]&&CustomApiCache[a]};this.init=function(a){return"string"==typeof a?b.url=a:b=a,this},this.load=function(){if(b.success=function(d){if("function"==typeof a.onComplete)try{c(b.url,d),a.onComplete(d,a),CustomApiCache.triggerCompleteListeners(b.url,d)}catch(a){}},b.error=function(b,c,d){Console.error(d),"function"==typeof a.onError&&a.onError(a)},b.cache===!0){var f=e(b.url);if(f&&"object"==typeof f)return void(void 0!==f.preserved?"function"==typeof a.onComplete&&("undefined"==typeof CustomApiCache.completeListeners[b.url]&&(CustomApiCache.completeListeners[b.url]=[]),CustomApiCache.completeListeners[b.url].push({func:a.onComplete,target:a})):"function"==typeof a.onComplete&&a.onComplete(f,a));d(b.url)}return $.ajax(b),this},this.onComplete,this.onError}function ActionModel(a,b,c){function d(){var c,d,e="_self",f="",g="a",h=!0;if(null!==a&&"undefined"!=typeof a)if("object"==typeof a)if("undefined"!=typeof a.video){c="#";var i=a.video;try{i=JSON.stringify(a.video)}catch(b){i="'"+a.video+"'"}f="Magazine.overlay.showMedia("+i+",'"+OverlayType.VIDEO+"'); return false;",e="_self"}else"undefined"!=typeof a.image?(c="#",f="Magazine.overlay.showMedia("+JSON.stringify(a.image)+",'"+OverlayType.IMAGE+"'); return false;",e="_self"):a.alias?(c="#!/"+a.alias,e="_self"):(g="div",h=!1);else if("undefined"!=typeof a&&0===a.indexOf("overlay:"))f="Magazine.overlay.show('"+parseInt(a.substr(8))+"'); return false;",c="#",e="_self";else if(isNaN(a)){if(c=a,0!==a.indexOf("#")){b="string"!=typeof b?"$(this).text()":"'"+b.stripHtml()+"'",f="Magazine.tracker.trackOutbound(this, event, 'click', "+b+")";var j=c.indexOf("//"+window.location.hostname);(j===-1||j>window.location.hostname.length)&&(e="_blank")}}else d=Magazine.getNavigationController().getPageById(a),d?(c="#!/"+d.alias,e="_self"):(c="#",e="_self");else f="",g="div",h=!1;var k={page:d,href:c,target:e,onclick:f,element:g,isAnchor:h,getAnchor:function(){return"a"===this.element?' href="'+this.href+'" onclick="'+this.onclick+'" target="'+this.target+'"':""},go:function(){"#"!==c&&void 0!==c&&null!==c?window.location=c:"undefined"!=typeof a&&0===a.indexOf("overlay:")&&Magazine.overlay.show(parseInt(a.substr(8)))}};return"object"==typeof a?$.extend(a,k):k}return d()}function StyleModel(a){function b(a){var b=a.split(":"),c={};return c[b[0]]=b[1],c}var c=[];null==a&&(a={});for(var d in a)c.push(d);return a.get=function(a){"string"==typeof a?a=[a]:"undefined"==typeof a&&(a=c);var b="";for(var d in a)if("undefined"!=typeof this[a[d]]&&null!==this[a[d]])if("object"==typeof this[a[d]])try{b+=this[a[d]].join("")}catch(b){Console.error(b,"StyleModel cannot join "+a[d])}else b+=this[a[d]];return b},a.appendTo=function(a,d){"string"==typeof d?d=[d]:"undefined"==typeof d&&(d=c);var e={};for(var f in c)if("undefined"!=typeof this[d[f]]&&null!==this[d])if("object"==typeof this[d[f]])for(var g in this[d[f]])$.extend(e,b(this[d[f]][g].replace(";","")));else $.extend(e,b(this[d[f]].replace(";","")));$(a).css(e)},a}function TransparentOverlay(){var a,b=function(a){a.stopPropagation()};this.init=function(b){a=$("<div class='transparent-overlay'></div>"),b.append(a)},this.show=function(){a.show(),Magazine.device.isIE8||Magazine.device.isIE9?TweenMax.to(a,.6,{css:{opacity:this.opacity},ease:"linear"}):a.css("opacity",.6).startAnimation(Animation.semiFadeIn),a.on("scroll mousewheel",b)},this.opacity=.65,this.setOnClick=function(b){a.on("click",b)},this.hide=function(){Magazine.device.isIE8||Magazine.device.isIE9?TweenMax.to(a,.6,{css:{opacity:0},onComplete:function(){a.hide()},ease:"linear"}):a.startAnimation(Animation.semiFadeOut),a.off("scroll mousewheel",b)},this.release=function(){a.off(),a.remove()}}function ImList(){var a,b,c,d,e,f=0,g=!1;this.init=function(d,e,f){f=f||{};var g=this;a=d,c="undefined"==typeof e?d:e,"undefined"!=typeof a.attr("count")&&(b=parseInt(a.attr("count"))),setTimeout(function(){a.on("scroll mousewheel",function(b){if("function"==typeof f.onScroll&&f.onScroll(b),a[0].scrollHeight-a.scrollTop()==a.height())return b.preventDefault(),g.load(),!1})},100)},this.load=function(){f+this.preload>=b&&(g=!0,a.off("scroll mousewheel"));for(var h,i,j=f;j<Math.min(f+this.preload,b);j++)if(d){for(var k=[],l=0;l<e.length;l++)e[l]<=j&&k.push(l);k=k[k.length-1],h=e.indexOf(j),h!==-1?(i&&(c.append(i),i=null),"function"==typeof this.getSegmentFooter&&(i=this.getSegmentFooter(j,d[h])),c.append(this.getSegment(j,d[h]))):c.append(this.getItemByIndex(j-e[k]-1,k))}else c.append(this.getItemByIndex(j));i&&(c.append(i),i=null),f=j},this.preload=5,this.setCount=function(a){b=parseInt(a)},this.setSegments=function(a){d=a,e=[],b=0;for(var c=0;c<a.length;c++)e.push(b),b++,b+=a[c].count},this.getSegmentItemByIndex,this.getItemByIndex,this.destroy=function(){a.off("scroll mousewheel")}}function ColorModel(){function a(a){return"#"+d(a[0])+d(a[1])+d(a[2])}function b(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:null}function c(a){var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=Math.max(d,e,f),h=Math.min(d,e,f),i=(g+h)/2;if(g==h)b=c=0;else{var j=g-h;switch(c=i>.5?j/(2-g-h):j/(g+h),g){case d:b=(e-f)/j+(e<f?6:0);break;case e:b=(f-d)/j+2;break;case f:b=(d-e)/j+4}b/=6}return[Math.floor(360*b),Math.floor(100*c),Math.floor(100*i)]}function d(a){var b=a.toString(16);return 1===b.length?"0"+b:b}this.rgb,this.hsl,this.hex,this.init=function(a){return"string"==typeof a&&(0===a.indexOf("#")?a.length<7?this.hex=a+a.substring(1):this.hex=a:0===a.indexOf("rgb")&&(this.rgb=a.split("(")[1].split(")")[0].split(" ").join("").split(","))),this},this.isDark=function(){return this.getHsl()[2]<30},this.getHex=function(){return"undefined"!=typeof this.hex?this.hex:"undefined"!=typeof this.rgb&&(this.hex=a(this.rgb),this.hex)},this.getHsl=function(){return"undefined"!=typeof this.hsl?this.hsl:"undefined"!=typeof this.rgb?(this.hsl=c(this.rgb),this.hsl):"undefined"!=typeof this.hex&&(this.hsl=c(b(this.hex)),this.hsl)},this.getRgb=function(){return"undefined"!=typeof this.rgb?this.rgb:"undefined"!=typeof this.hex&&(this.rgb=b(this.hex),this.rgb)}}function DynamicGrid(){"use strict";function a(){var a;this.$view,this.onStage=!1,this.cols=1,this.rows=1,this.init=function(a,c,d){var e=a.find(".paragraph.text-block");return this.cols=Math.ceil(c.width/b.minBlockWidth),b.fixedBlockHeight&&(this.rows=Math.ceil(c.height/b.minBlockWidth)),this.ratio=c.height/c.width,this.$view=a,e.length>0&&e.css("text-align",$(e.children("p")[0]).css("text-align")),this},this.toStage=function(a){this.onStage===!1&&("undefined"!=typeof e.children()[a]?$(e.children()[a]).after(this.$view):e.append(this.$view),this.onStage=!0,this.$view.find(".dynamicForm").each(function(){new DynamicForm(null,$(this))}))},this.getX=function(b){return a},this.setPosition=function(b,c,d,e,f){a=c,this.toStage(b),this.$view.css({top:d+"px",height:f+"px",left:c+"%",width:e+"%"})},this.setX=function(b){a=b,this.$view.css({left:b+"%"})}}var b,c,d,e,f,g=[],h=function(){if(void 0===f){f=0;for(var a=0;a<g.length;a++)f+=g[a].rows*g[a].cols}return f};this.init=function(a,f){return d=a,b="undefined"==typeof f?$.extend({},DynamicGridSettings):$.extend({},DynamicGridSettings,f),isNaN(b.padding)&&Console.error("Padding should be a number"),e=$("<div class='im-db-grid'></div>"),e.css({maxWidth:(b.padding+b.maxBlockWidth)*b.maxCols,width:"100%"}),d.append(e),c=this,this},this.add=function(b,c,d){"undefined"==typeof d&&(d=g.length),g.splice(d,0,(new a).init(b,c)),"function"==typeof this.onAdd&&this.onAdd(b,d)},this.remove=function(a){delete g[a]},this.setPosition=function(){for(var a,c,f=[],i=[],j=[],k=d.width(),l=this.getColumnCount(k),m=this.getColumnWidth(l,k),n=Math.ceil(m.padding/100*k),o=0,p=0,q=0,r=0;r<l;r++)f[r]=b.perfectFit?0:n;for(var s,t=0,u=function(){var a,b=9999999,c=-1;a=s>1?f.slice(0,(s-1)*-1):f.slice(0,f.length);for(var d in a)if(s>1){for(var e=!0,g=0;g<s;g++)f[parseInt(d)+parseInt(g)]>a[d]&&(e=!1);if(!e)continue;a[d]<b&&(b=a[d],c=d)}else a[d]<b&&(b=a[d],c=d);return c===-1?{column:0,y:Math.max.apply(Math,f)}:{column:parseInt(c)}},v=function(){if(!b.fixedBlockHeight)return!1;for(var c in i)if(i[c].height>=a&&i[c].count>=s&&i[c].used!==!0){var d=$.extend({},i[c]);return i[c].used=!0,i[c].count>s&&(i[c].count-=s,i[c].col+=s,i[c].used=!1),i[c].height>a&&(i[c].height-=a+n,i[c].y+=a+n,i[c].used=!1),d}return!1},w=function(){var a=l;if("left"!==b.align){for(var c=0;c<j.length;c++)a-=j[c].cols;if(a>0)for(var c=0;c<j.length;c++){var d=j[c].getX();"center"===b.align?j[c].setX(d+(m.block+m.padding)*a/2):j[c].setX(d+(m.block+m.padding)*a)}}},x=0;x<g.length;x++){var y=g[x];s=Math.min(y.cols,f.length),c=(m.block+m.padding)*s-m.padding;var z=(m.block+m.padding)*y.cols-m.padding;a=b.fixedBlockHeight&&z===c?Math.round(((m.block+m.padding)*y.rows-m.padding)/100*k):Math.round(c/100*k*y.ratio);var A=v();if(A)p=A.y,q=A.col;else{var B=u();q=B.column,p="undefined"!=typeof B.y?B.y:f[q]}o=q*(m.block+m.padding),b.perfectFit||(o+=m.padding),Math.ceil((t+1)/l)===Math.ceil(h()/l)&&j.push(g[x]),t+=g[x].rows*g[x].cols,g[x].setPosition(x,o,p,c,a);var C=p+a+n,D={};if(!A){for(var E=0;E<s;E++){if(f[parseInt(q+parseInt(E))]<p)if("undefined"==typeof D.height||D.height<=p-f[parseInt(q+parseInt(E))]-n){var F=!1;for(var G in i)i[G].y==f[parseInt(q+parseInt(E))]&&i[G].col==q+parseInt(E)&&(F=!0);F||("undefined"==typeof D.height?(D.count=0,D.col=q+parseInt(E),D.y=f[parseInt(q+parseInt(E))],D.height=p-f[parseInt(q+parseInt(E))]-n):D.height=Math.min(D.height,p-f[parseInt(q+parseInt(E))]-n),D.count++)}else"undefined"!=typeof D.height&&(i.push(D),D={});else"undefined"!=typeof D.height&&(i.push(D),D={});f[parseInt(q+parseInt(E))]=C;for(var H=Math.max.apply(Math,f),I=0;I<f.length;I++)H-f[I]<3&&(f[I]=H)}"undefined"!=typeof D.height&&i.push(D)}}b.fixedBlockHeight&&w(),e.css("height",Math.max.apply(Math,f)+"px")},this.getMinBlockWidth=function(){switch(Magazine.device.size){case DeviceSize.MOBILE:return b.mobile.minBlockWidth;case DeviceSize.MOBILE_LANDSCAPE:return b.mobile_landscape.minBlockWidth;default:return b.minBlockWidth}},this.getMaxBlockWidth=function(){switch(Magazine.device.size){case DeviceSize.MOBILE:return b.mobile.maxBlockWidth;case DeviceSize.MOBILE_LANDSCAPE:return b.mobile_landscape.maxBlockWidth;default:return b.maxBlockWidth}},this.getColumnWidth=function(a,c){"undefined"==typeof a&&(a=this.getColumnCount()),"undefined"==typeof c&&(c=d.width());var e=b.padding/this.getMinBlockWidth()*100,f=(100-e)/a;b.perfectFit&&(f+=2*e/a);var g=f-e;return{padding:e,block:g}},this.getColumnCount=function(a){return Math.min(b.maxCols,Math.floor(a/(parseInt(this.getMinBlockWidth())+parseInt(b.padding))))},this.release=function(){e.remove()},this.onResizeHandler=function(a){}}function IMEvents(a){var b=[];this.addEventListener=function(a,c){b.push({action:c,event:a})},this.trigger=function(c,d){for(var e in b)b[e].event===c&&b[e].action.apply(a,[c,d])},this.removeEventListener=function(a,c){for(var d in b)b[d].event!==a||c!==b[d].action&&"undefined"!=typeof c||b.splice(d,1)},this.release=function(){b=null}}function PageEvents(a){return new IMEvents(a)}function NavigationButtons(){var a,b,c,d=null,e=!1,f=!0,g=!1;this.type,this.view,this.setTop=function(a){b=a},this.init=function(b,d,e){if(a=this,this.setTop(d.top),c=d.name,this.type=d,this.view=$(d.view),"undefined"!=typeof this.type._labelClass){var f=this.view.find("."+this.type._labelClass);f.text("undefined"==typeof e?Translate.getLabel("btn_scroll"):e)}return b.append(this.view),this.view.find(".im-n-button").on("click",this.onClick),this},this.enable=function(){g=!1},this.disable=function(){g=!0},this.release=function(){this.view.find(".im-n-button").off("click"),this.view.remove(),delete this.view},this.show=function(){if(f!==!0){if("undefined"!=typeof this.type._labelClass){var a=this.view.find("."+this.type._labelClass);setTimeout(function(){a.css("width",a[0].scrollWidth+20+"px").addClass("show")},500),e=!0}switch(c){case"arrows":$(".im-n-button-down,.im-ts-label",this.view).addClass("show");break;case"bars":$(".im-n-button-down",this.view).addClass("show");break;case"circle":$(".im-n-button-down",this.view).addClass("show")}f=!0}},this.hide=function(){if(f!==!1)switch(f=!1,c){case"arrows":$(".im-n-button-down,.im-n-button-up,.im-ts-label",this.view).removeClass("show"),$(".im-ts-label",this.view).removeClass("show").css("width","0");break;case"bars":$(".im-n-button-down,.im-n-button-up",this.view).removeClass("show");break;case"circle":$(".im-n-button-down,.im-n-button-up",this.view).removeClass("show")}},this.up=function(){"function"==typeof this.onUp&&this.onUp()===!1||null!==d&&d.up()},this.onClick=function(b){if(!g)return $(this).hasClass("im-n-button-up")?a.up():a.down(),"object"==typeof b&&b.preventDefault(),!1},this.down=function(){"function"==typeof this.onDown&&this.onDown()===!1||null!==d&&d.down()},this.setScrollHandler=function(a){d=a,d.addEventListener("onscroll",this.onScroll)};var h=function(a){f===!0&&("Mac"===Magazine.device.OS&&"tablet"===Magazine.device.type?a.show():a.addClass("show"))},i=function(a){"Mac"===Magazine.device.OS&&"tablet"===Magazine.device.type?a.hide():a.removeClass("show")};this.onScroll=function(d,f,g){var j=$(".im-n-button-up",a.view),k=$(".im-n-button-down",a.view);switch(c){case"bars":Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE&&(d>32?h(j):i(j),f>=g-4?i(k):h(k));break;case"arrows":if(Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE){if(d>32)h(j),$(".im-ts-label",a.view).removeClass("show").css("width","0"),e=!1;else if(i(j),e===!1){var l=a.view.find(".im-ts-label");l.addClass("show").css("width",l[0].scrollWidth+20+"px"),e=!0}f>=g-4?(i(k),$(".im-ts-label",this.view).removeClass("show").css("width","0")):h(k)}break;case"circle":b?Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE&&(d>32?i(k):h(k)):Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE&&(d>32?h(j):i(j),f>=g-4?i(k):h(k))}}}Magazine.request=function(){function a(){e=d()}function b(a,c,d){if(c.length>1){var e=c.shift();a[e]=a[e]||{},b(a[e],c,d)}else{var e=c.shift();a[e]=d}}function c(a,c,d){return b(a,c.split("."),d)}function d(){var a={},b=window.location.search.substring(1);if(b.length>0)for(var d=b.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(1!==f.length&&""!==f[1])if("undefined"==typeof a[f[0]])f[0].indexOf(".")!==-1?c(a,f[0],f[1]):a[f[0]]=decodeURIComponent(f[1]);else if("string"==typeof a[f[0]]){var g=[a[f[0]],decodeURIComponent(f[1])];a[f[0]]=g}else a[f[0]].push(decodeURIComponent(f[1]))}return"undefined"!=typeof Config.getParams&&0!==Config.getParams.length&&($.extend(a,Config.getParams),Config.getParams=a),a}var e={};return a(),{getParams:function(){return e},setParam:function(a,b){return null===b?void delete e[a]:(Config.getParams=Config.getParams||{},Config.getParams[a]=b,void(e[a]=b))},getParam:function(a,b){return"undefined"!=typeof e[a]?"string"==typeof e[a]&&0===e[a].indexOf("o::")?JSON.parse(e[a].substring(3)):e[a]:"undefined"!=typeof b&&b}}}();var animationstarted=0,animationended=0;!function(a){a.fn.abortAnimation=function(b){function c(){if(b)d="animate "+b;else{if(!e.data("animation"))return this;d="animate "+e.data("animation")}e[0].loopTimer&&clearTimeout(e[0].loopTimer),null!=e[0].safetyTimer&&(clearTimeout(e[0].safetyTimer),e[0].safetyTimer=null),e.hasClass(d)&&e.off(Magazine.device.getCssProperty("animationend")).css(Magazine.device.getCssProperty("AnimationDelay"),"").css(Magazine.device.getCssProperty("AnimationIterationCount"),"").css(Magazine.device.getCssProperty("AnimationTimingFunction"),"").css(Magazine.device.getCssProperty("AnimationDuration"),"").removeClass(d)}var d,e=a(this);return c(),this},a.fn.setAnimation=function(a,b){return this.each(function(a){})},a.fn.startAnimation=function(b,c,d){return this.each(function(e){function f(){j.off(Magazine.device.getCssProperty("animationend")).css(Magazine.device.getCssProperty("AnimationDelay"),"").css(Magazine.device.getCssProperty("AnimationIterationCount"),"").css(Magazine.device.getCssProperty("AnimationTimingFunction"),"").css(Magazine.device.getCssProperty("AnimationDuration"),"")}function g(){/animate.\w*/.test(j[0].className)&&(f(),j[0].className=j[0].className.replace(/animate.\w*/,"")),m=a.extend({},k,m),j.on(Magazine.device.getCssProperty("animationend"),h),m.delay>0&&j.css(Magazine.device.getCssProperty("AnimationDelay"),m.delay+"ms"),0==m.loop&&0==m.loopDelay?j.css(Magazine.device.getCssProperty("AnimationIterationCount"),"infinite"):m.loop>-1&&0==m.loopDelay?j.css(Magazine.device.getCssProperty("AnimationIterationCount"),m.loop):m.loop>0,null!=m.ease&&j.css(Magazine.device.getCssProperty("AnimationTimingFunction"),m.ease),null!=m.duration&&j.css(Magazine.device.getCssProperty("AnimationDuration"),m.duration+"ms"),/In/.test(b)&&0===m.delay&&"ignore"!==m.display&&("inline-block"===m.display?j.css("display","inline-block"):j.css("display","block")),j.data("animation",i),j.addClass(i),null!=j[0].safetyTimer&&(clearTimeout(j[0].safetyTimer),j[0].safetyTimer=null),/Out/.test(b)&&0==m.loopDelay&&(j[0].safetyTimer=setTimeout(function(){h({target:j[0]})},5e3)),Magazine.device.supportsAnimations()||h({target:j[0]})}function h(b){if(b.target===j[0]){if(l++,null!=j[0].safetyTimer&&(clearTimeout(j[0].safetyTimer),j[0].safetyTimer=null),m.loop>l-1&&0!=m.loopDelay&&Magazine.device.supportsAnimations()&&"undefined"!=typeof b)return m.delay>0&&j.css(Magazine.device.getCssProperty("AnimationDelay"),""),m.delay=0,/In/.test(i)&&j.hide(),j.removeClass(i),void(b.target.loopTimer=setTimeout(function(){j.show().addClass(i)},m.loopDelay));j.data("animation",""),j.off(Magazine.device.getCssProperty("animationend"),h),m.delay>0&&j.css(Magazine.device.getCssProperty("animationDelay"),""),m.loop!=-1&&j.css(Magazine.device.getCssProperty("AnimationIterationCount"),""),null!=m.ease&&j.css(Magazine.device.getCssProperty("AnimationTimingFunction"),""),null!=m.duration&&j.css(Magazine.device.getCssProperty("AnimationDuration"),""),m.hideAfterAnimation&&/Out/.test(j[0].className)&&j.hide(),j.removeClass(i),a.isFunction(d)&&d(j)}}var i="animate "+b,j=a(this);j[0].safetyTimer=0,this.loopTimer=!1;var k={delay:0,hideAfterAnimation:!0,loop:-1,loopDelay:!1,ease:null,duration:null},l=0,m=c||{};if(!m.display){try{m.display=j.css("display")}catch(a){m.display="block"}"none"===m.display&&(m.display="block")}return g(),this})}}(jQuery);var selectedTransition={slideInLeft:"slideInLeft",slideInRight:"slideInRight",slideOutLeft:"slideOutLeft",slideOutRight:"slideOutRight"},IntroAnimation={animate:!0,contentType:"fadeInUp",textType:"fadeInLeft",duration:"",contentType2:"scaleDownIn",textType2:"fadeIn",contentDelay:100,textDelay:400},Animation={semiFadeIn:"semiFadeIn",semiFadeOut:"semiFadeOut",bunnyScaleUpIn:"bunnyScaleUpIn",scaleUpIn:"scaleUpIn",scaleUpOut:"scaleUpOut",scaleDownIn:"scaleDownIn",scaleDownOut:"scaleDownOut",flash:"attentionflash",bounce:"attentionbounce",shake:"attentionshake",ring:"attentionring",swing:"attentionswing",wobble:"attentionwobble",wiggle:"attentionwiggle",pulse:"attentionpulse",pulseInOut:"pulseInOut",pulse2:"pulse",flip:"flip",flipInX:"flipInX",flipOutX:"flipOutX",flipInY:"flipInY",flipOutY:"flipOutY",fadeIn:"fadeIn",fadeInUp:"fadeInUp",fadeInDown:"fadeInDown",fadeInLeft:"fadeInLeft",fadeInRight:"fadeInRight",fadeInUpBig:"fadeInUpBig",fadeInDownBig:"fadeInDownBig",fadeInLeftBig:"fadeInLeftBig",fadeInRightBig:"fadeInRightBig",fadeOut:"fadeOut",fadeOutUp:"fadeOutUp",fadeOutDown:"fadeOutDown",fadeOutLeft:"fadeOutLeft",fadeOutRight:"fadeOutRight",fadeOutUpBig:"fadeOutUpBig",fadeOutDownBig:"fadeOutDownBig",fadeOutLeftBig:"fadeOutLeftBig",fadeOutRightBig:"fadeOutRightBig",bounceIn:"bounceIn",bounceInDown:"bounceInDown",bounceInUp:"bounceInUp",bounceInLeft:"bounceInLeft",bounceInRight:"bounceInRight",slideInDown:"slideInDown",slideInUp:"slideInUp",slideInLeft:"slideInLeft",slideInRight:"slideInRight",slideOutDown:"slideOutDown",slideOutUp:"slideOutUp",slideOutLeft:"slideOutLeft",slideOutRight:"slideOutRight",bounceOut:"bounceOut",bounceOutDown:"bounceOutDown",bounceOutUp:"bounceOutUp",bounceOutLeft:"bounceOutLeft",bounceOutRight:"bounceOutRight",rotateIn:"rotateIn",rotateInDownLeft:"rotateInDownLeft",rotateInDownRight:"rotateInDownRight",rotateInUpLeft:"rotateInUpLeft",rotateInUpRight:"rotateInUpRight",rotateOut:"rotateOut",rotateOutDownLeft:"rotateOutDownLeft",rotateOutDownRight:"rotateOutDownRight",rotateOutUpLeft:"rotateOutUpLeft",rotateOutUpRight:"rotateOutUpRight",lightSpeedIn:"lightSpeedIn",lightSpeedOut:"lightSpeedOut",hinge:"hinge",rollIn:"rollIn",rollOut:"rollOut"},CssEase={bounce:"cubic-bezier(0.0, 0.35, .5, 1.3)",linear:"linear",swing:"-in-out",InQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",InCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",InQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",InQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",InSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",InExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",InCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",InBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",OutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",OutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",OutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",OutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",OutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",OutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",OutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",OutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",InOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",InOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",InOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",InOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",InOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",InOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",InOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",InOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550",MarcoTest:"cubic-bezier(0.875, 0.220, 0.715, 1.350)"},PageControllerDirection={UP:"up",DOWN:"down"},PageControllerDelegate={willAppear:function(a){},didAppear:function(a){},willDisappear:function(a){},didDisappear:function(a){}},Hogan={};!function(a,b){function c(a){return"object"==typeof a&&null!==a?JSON.stringify(a):String(null===a||void 0===a?"":a)}function d(a){return a=c(a),j.test(a)?a.replace(e,"&amp;").replace(f,"&lt;").replace(g,"&gt;").replace(h,"&#39;").replace(i,"&quot;"):a}a.Template=function(a,c,d,e){this.r=a||this.r,this.c=d,this.options=e,this.text=c||"",this.buf=b?[]:""},a.Template.prototype={r:function(a,b,c,d){return""},v:d,t:c,render:function(a,b,c,d){return"object"==typeof a?a.Config=Config:a={Config:Config},this.ri([a],b||{},c,d||!1)},ri:function(a,b,c,d){return this.r(a,b,c,d)},rp:function(a,b,c,d){var e=c[a];return e?(this.c&&"string"==typeof e&&(e=this.c.compile(e,this.options)),e.ri(b,c,d)):""},rs:function(a,b,c){var d=a[a.length-1];if(!k(d))return void c(a,b,this);for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop()},s:function(a,b,c,d,e,f,g){var h;return(!k(a)||0!==a.length)&&("function"==typeof a&&(a=this.ls(a,b,c,d,e,f,g)),h=""===a||!!a,!d&&h&&b&&b.push("object"==typeof a?a:b[b.length-1]),h)},d:function(a,b,c,d){var e=a.split("."),f=this.f(e[0],b,c,d),g=null;if("."===a&&k(b[b.length-2]))return b[b.length-1];for(var h=1;h<e.length;h++)f&&"object"==typeof f&&e[h]in f?(g=f,f=f[e[h]]):f="";return!(d&&!f)&&(d||"function"!=typeof f||(b.push(g),f=this.lv(f,b,c),b.pop()),f)},f:function(a,b,c,d){var e=!1,f=null,g=!1;if(0==a.indexOf("helper("))try{var h=a.split("("),i=h[1].split(")")[0].split(","),j=[];for(var k in i){var l=!1,m=trim(i[k]);m.indexOf("{")<0?l="null"==m?null:isNaN(m)?"false"!=m&&m:parseInt(m):(m=m.replace(/{/g,"").replace(/}/g,""),l=m.indexOf(".")>0?this.d(m,b,c,d):this.f(m,b,c,d)),j.push(l)}var n=j.shift();e=Utils.viewHelper(n,j),g=!0}catch(a){Console.error(a)}for(var o=b.length-1;o>=0;o--)if(f=b[o],f&&"object"==typeof f&&a in f){e=f[a],g=!0;break}return g?(d||"function"!=typeof e||(e=this.lv(e,b,c)),e):!d&&""},ho:function(a,b,c,d,e){var f=this.c,g=this.options;g.delimiters=e;var d=a.call(b,d);return d=null==d?String(d):d.toString(),this.b(f.compile(d,g).render(b,c)),!1},b:b?function(a){this.buf.push(a)}:function(a){this.buf+=a},fl:b?function(){var a=this.buf.join("");return this.buf=[],a}:function(){var a=this.buf;return this.buf="",a},ls:function(a,b,c,d,e,f,g){var h=b[b.length-1],i=null;if(!d&&this.c&&a.length>0)return this.ho(a,h,c,this.text.substring(e,f),g);if(i=a.call(h),"function"==typeof i){if(d)return!0;if(this.c)return this.ho(i,h,c,this.text.substring(e,f),g)}return i},lv:function(a,b,d){var e=b[b.length-1],f=a.call(e);return"function"==typeof f&&(f=c(f.call(e)),this.c&&~f.indexOf("{{"))?this.c.compile(f,this.options).render(e,d):c(f)}};var e=/&/g,f=/</g,g=/>/g,h=/\'/g,i=/\"/g,j=/[&<>\"\']/,k=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}}("undefined"!=typeof exports?exports:Hogan),function(a){function b(a){"}"===a.n.substr(a.n.length-1)&&(a.n=a.n.substring(0,a.n.length-1))}function c(a){return a.trim?a.trim():a.replace(/^\s*|\s*$/g,"")}function d(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var d=1,e=a.length;d<e;d++)if(b.charAt(c+d)!=a.charAt(d))return!1;return!0}function e(a,b,c,d){if(!a)return[];for(var h=[],i=null,j=null;a.length>0;)if(j=a.shift(),"#"==j.tag||"^"==j.tag||f(j,d))c.push(j),j.nodes=e(a,j.tag,c,d),h.push(j);else{if("/"==j.tag){if(0===c.length)throw new Error("Closing tag without opener: /"+j.n);if(i=c.pop(),j.n!=i.n&&!g(j.n,i.n,d))throw new Error("Nesting error: "+i.n+" vs. "+j.n);return i.end=j.i,h}h.push(j)}if(c.length>0)throw new Error("missing closing tag: "+c.pop().n);return h}function f(a,b){for(var c=0,d=b.length;c<d;c++)if(b[c].o==a.n)return a.tag="#",!0}function g(a,b,c){for(var d=0,e=c.length;d<e;d++)if(c[d].c==a&&c[d].o==b)return!0}function h(a){return a.replace(u,"\\\\").replace(r,'\\"').replace(s,"\\n").replace(t,"\\r")}function i(a){return~a.indexOf(".")&&!~a.indexOf("(")?"d":"f"}function j(a){for(var b="",c=0,d=a.length;c<d;c++){var e=a[c].tag;"#"==e?b+=k(a[c].nodes,a[c].n,i(a[c].n),a[c].i,a[c].end,a[c].otag+" "+a[c].ctag):"^"==e?b+=l(a[c].nodes,a[c].n,i(a[c].n)):"<"==e||">"==e?b+=m(a[c]):"{"==e||"&"==e?b+=n(a[c].n,i(a[c].n)):"\n"==e?b+=p('"\\n"'+(a.length-1==c?"":" + i")):"_v"==e?b+=o(a[c].n,i(a[c].n)):void 0===e&&(b+=p('"'+h(a[c])+'"'))}return b}function k(a,b,c,d,e,f){return"if(_.s(_."+c+'("'+h(b)+'",c,p,1),c,p,0,'+d+","+e+',"'+f+'")){_.rs(c,p,function(c,p,_){'+j(a)+"});c.pop();}"}function l(a,b,c){
return"if(!_.s(_."+c+'("'+h(b)+'",c,p,1),c,p,1,0,0,"")){'+j(a)+"};"}function m(a){return'_.b(_.rp("'+h(a.n)+'",c,p,"'+(a.indent||"")+'"));'}function n(a,b){return"_.b(_.t(_."+b+'("'+h(a)+'",c,p,0)));'}function o(a,b){return"_.b(_.v(_."+b+'("'+h(a)+'",c,p,0)));'}function p(a){return"_.b("+a+");"}var q=/\S/,r=/\"/g,s=/\n/g,t=/\r/g,u=/\\/g,v={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};a.scan=function(a,e){function f(){r.length>0&&(s.push(String(r)),r="")}function g(){for(var a=!0,b=w;b<s.length;b++)if(a=s[b].tag&&v[s[b].tag]<v._v||!s[b].tag&&null===s[b].match(q),!a)return!1;return a}function h(a,b){if(f(),a&&g())for(var c,d=w;d<s.length;d++)s[d].tag||((c=s[d+1])&&">"==c.tag&&(c.indent=s[d].toString()),s.splice(d,1));else b||s.push({tag:"\n"});t=!1,w=s.length}function i(a,b){var d="="+y,e=a.indexOf(d,b),f=c(a.substring(a.indexOf("=",b)+1,e)).split(" ");return x=f[0],y=f[1],e+d.length-1}if(!a)return[];var j=a.length,k=0,l=1,m=2,n=k,o=null,p=null,r="",s=[],t=!1,u=0,w=0,x="{{",y="}}";for(e&&(e=e.split(" "),x=e[0],y=e[1]),u=0;u<j;u++)n==k?d(x,a,u)?(--u,f(),n=l):"\n"==a.charAt(u)?h(t):r+=a.charAt(u):n==l?(u+=x.length-1,p=v[a.charAt(u+1)],o=p?a.charAt(u+1):"_v","="==o?(u=i(a,u),n=k):(p&&u++,n=m),t=u):d(y,a,u)?(s.push({tag:o,n:c(r),otag:x,ctag:y,i:"/"==o?t-y.length:u+x.length}),r="",u+=y.length-1,n=k,"{"==o&&("}}"==y?u++:b(s[s.length-1]))):r+=a.charAt(u);return h(t,!0),s},a.generate=function(b,c,d){var e='var _=this;_.b(i=i||"");'+j(b)+"return _.fl();";return d.asString?"function(c,p,i){"+e+";}":new a.Template(new Function("c","p","i",e),c,a,d)},a.parse=function(a,b,c){return c=c||{},e(a,"",[],c.sectionTags||[])},a.cache={},a.compile=function(a,b){b=b||{};var c=a+"||"+!!b.asString,d=this.cache[c];return d?d:(d=this.generate(this.parse(this.scan(a,b.delimiters),a,b),a,b),this.cache[c]=d)}}("undefined"!=typeof exports?exports:Hogan);var Dates={EEEE:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],EE:["mon","tue","wed","thu","fri","sat","sun"],MMMM:["january","february","march","april","may","june","july","august","september","october","november","december"],MMM:["jan","feb","maa","apr","mei","jun","jul","aug","sep","nov","dec"],MM:"",yyyy:"",ss:"",mm:"",hh:"","dd'":"",dd:""},RequestMethod={GET:"GET",POST:"POST"},DeviceEngine={WEBKIT:"webkit",MOZILLA:"moz",OPERA:"o",MICROSOFT:"ms",UNKNOWN:""},DeviceType={MOBILE:"mobile",TABLET:"tablet",DESKTOP:"desktop"},DeviceSize={MOBILE:1,MOBILE_LANDSCAPE:2,PORTRAIT:3,LANDSCAPE:4},DeviceOS={WINDOWS:"Windows",MAC:"Mac",IOS_MAC:"IOS-iPod-iPhone",ANDROID:"Android",BLACKBERRY:"BlackBerry",LINUX:"Linux",UNKNOWN:"Unknown"},DeviceBrowser={FIREFOX:"Firefox",OPERA:"Opera",SAFARI:"Safari",CHROME:"Chrome",ANDROID:"Android",IE:"Explorer",KONQUEROR:"Konqueror",ICAB:"iCab",OMNIWEB:"OmniWeg",CAMINO:"Camino",NETSCAPE:"Netscape"},DeviceOrientation={LANDSCAPE:"landscape",PORTRAIT:"portrait"};Magazine.storage={get:function(a,b){var c;if("undefined"==typeof Storage){var d=Magazine.cookies.get("imstorage");c=d[a]}else try{var c=localStorage.getItem(a);c&&(0===c.indexOf("o::")?c=JSON.parse(c.substring(3)):0===c.indexOf("n::")?c=parseFloat(c.substring(3)):c&&(c=c.substring(3)))}catch(a){Console.error(a,"No access to localStorage")}return"undefined"==typeof b||"undefined"!=typeof c&&null!==c?c:b},set:function(a,b){if("undefined"==typeof Storage)Magazine.cookies.set("imstorage",b,100);else try{"object"==typeof b?localStorage.setItem(a,"o::"+JSON.stringify(b)):"string"==typeof b?localStorage.setItem(a,"s::"+b):"number"==typeof b&&localStorage.setItem(a,"n::"+b)}catch(a){Console.error(a,"No access writing localStorage")}return this}};var PageEvent={DISAPPEAR:"disappear",APPEAR:"appear"},PageViewType={NORMAL:"View.html",MOBILE:"Mobile.html"},SubPageDefault={getTemplate:function(){return Config.themePathView+Config.theme+"/Details.html"},getHeader:function(){return Hogan.compile('<div class="top_header"><a href="javascript:window.history.go(-1);"><div class="header-left"><span class="im-sp im-sp-arrow-left"></span></div><div class="header-right"><span class="back">{{{backButton}}}</span>{{{navigation}}}</div><div class="clear"></div></a></div>')},getHeaderNavigation:function(){return Hogan.compile('<a href="{{next}}" class="next"><img src="../images/mobile/arrowRight.png"/></a><a href="{{prev}}" class="prev"><img src="../images/mobile/arrowLeft.png"/></a><div class="indicator"><span>{{current}}/{{itemCount}}</span></div>')}},SubPageID=1,imUniqueAdId=0;ImGalleryDirective.VIEW="{{#length}}<div class='im-media' im-object='im-media-directive' data-media='{{index}}'></div>{{/length}}",Magazine.favorites=function(){var a;return a={list:[],init:function(){try{var a=Magazine.request.getParam("imfav")||[],b=Magazine.storage.get(Magazine.id+"imfav"+Magazine.request.getParam("t",""),!1);b!==!1?(a=b,"object"==typeof a&&(this.list=a,Magazine.request.setParam("imfav",this.list))):"object"==typeof a&&(this.list=a)}catch(a){Console.error(a,"Initiate favorites")}return this},getListView:function(){if("undefined"==typeof this.listView){this.listView={};for(var a in this.list)this.listView[this.list[a][2]]=this.listView[this.list[a][2]]||[],this.listView[this.list[a][2]].push({url:this.list[a][0],title:this.list[a][1],group:this.list[a][2],view:"<a href='"+this.list[a][0]+"' class='im-fav-list-item'>"+this.list[a][1]+"</a>"})}return this.listView},add:function(a){if(this.list.push(a),"undefined"!=typeof this.listView){var b=a[2];this.listView[b]=this.listView[b]||[],this.listView[b].push({url:a[0],title:a[1],group:a[2],view:"<a href='"+a[0]+"' class='im-fav-list-item'>"+a[1]+"</a>"})}this.update(),Magazine.tracker.trackEvent("Favorites","Add",a[0])},remove:function(a){for(var b in this.list)a===this.list[b][0]&&this.list.splice(b,1);if("undefined"!=typeof this.listView)for(var b in this.listView)for(var c in this.listView[b])if(this.listView[b][c].url===a){this.listView[b].splice(c,1),0===this.listView[b].length&&delete this.listView[b];break}this.update(),Magazine.tracker.trackEvent("Favorites","Remove",a)},update:function(){Magazine.storage.set(Magazine.id+"imfav"+Magazine.request.getParam("t",""),this.list),Magazine.request.setParam("imfav",this.list),Magazine.getNavigationBar().favoritePage.show(),Magazine.getNavigationBar().favoritePage.update()},has:function(a){for(var b in this.list)if(a===this.list[b][0])return!0;return!1}},a.init(),a}();var IMFlickr=function(){return this.api={endpoint:"https://api.flickr.com/services/rest/",get:function(a,b,c,d){"undefined"==typeof b&&(b={}),b.api_key="92c68df409a1167f8946fb6b31469195",b.method=a,b.format="json",$.ajax({url:this.endpoint,data:b,dataType:"jsonp",jsonpCallback:"jsonFlickrApi",success:function(a){"ok"===a.stat?c(a):d(a)}})},getPhotoset:function(a,b,c){this.get("flickr.photosets.getPhotos",{photoset_id:a},b,c)},getPhotoByTag:function(a,b,c){var d=["group_id","user_id","tags","text"],e={};for(var f in a)d.indexOf(f)!==-1&&a[f]&&(e[f]=a[f]);this.get("flickr.photos.search",e,b,c)}},this.getLastPhotoFromSet=function(a,b,c,d){this.api.getPhotoset(a,function(a){c(a.photoset.photo[a.photoset.photo.length-1])},d)},this.findPhotoByTag=function(a,b,c,d){this.api.getPhotoByTag(a,function(a){c(a.photos.photo[a.photos.photo.length-1])},d)},this.getUrlByPhoto=function(a){return"https://farm"+a.farm+".staticflickr.com/"+a.server+"/"+a.id+"_"+a.secret+"_b.jpg"},this}();Video.ready=!1,Video.loading=!1,Video.playerNumber=0;var IMVideoControls=function(){var a=[],b=null;return{add:function(b){a[b.videoplayerId]=b},clear:function(b){a[b.videoplayerId]=void 0,delete a[b.videoplayerId]},pause:function(){b=null;for(var c in a)a[c].isPlaying()&&(a[c].forcePause(),b=c)},resume:function(){b&&a[b]&&a[b].play()}}}(),VideoQuality={SMALL:"small",MEDIUM:"medium",LARGE:"large",HD720:"hd720",HD1080:"hd1080",HIGHRES:"highres",DEFAULT:"default"},VideoEvent={ENDED:0,PAUSED:2,BUFFERING:3,PLAYING:1,UNSTARTED:-1,READY:5,SEEKING:6,PROGRESS:-4};Video.onCompleteWistiaHandlers={},Video.onCompleteNpoHandlers={},Video.onCompleteHandlers={},Video.loadedWistia=!1,Video.loadingWistia=!1,Video.loadedNpo=!1,Video.loadingNpo=!1;var IMPlayerID=0,IMPlayerType={0:"ended",2:"pause",3:"waiting",1:"playing","-1":"unstarted",5:"canplay",6:"seeking","-4":"PROGRESS"};Magazine.soundControl={wasPlaying:null,registedSounds:[],volume:10,init:function(){this.volume=Magazine.storage.get("volume",100)},regist:function(a){this._initiated||this.init(),void 0===a.$$soundControlId&&(a.$$soundControlId=IMSoundControlId++,this.registedSounds.push(a),Magazine.getNavigationBar().showVolumeOptions())},unregist:function(a){for(var b in this.registedSounds)if(this.registedSounds[b].$$soundControlId===a.$$soundControlId){delete this.registedSounds[b].$$soundControlId,this.registedSounds.splice(b,1);break}0===this.registedSounds.length&&Magazine.getNavigationBar().hideVolumeOptions()},isMuted:function(){return 0==this.volume},play:function(a){for(var b in this.registedSounds)this.registedSounds[b]!==a&&a.isPlaying()&&(this.wasPlaying=a);return a.setVolume(this.volume),a},ended:function(){return null!==this.wasPlaying&&(this.wasPlaying.play(),this.wasPlaying=null),this},setVolume:function(a){this.volume=a,Magazine.storage.set("volume",a);for(var b in this.registedSounds)"object"==typeof this.registedSounds[b]&&this.registedSounds[b].setVolume(a);return this},mute:function(){this._unmutedVolume=this.volume,this.setVolume(0),Magazine.getNavigationBar().volumeOptions.mute()},unmute:function(){this.setVolume(this._unmutedVolume||100),Magazine.getNavigationBar().volumeOptions.unmute()},getVolume:function(){return this.volume},_unmutedVolume:null,_initiated:!1},IMSoundControlId=0;var VidYardPlayerLoadState=0,VidYardPlayerLoadReadyHandler=[];Popup.id=0;var TouchDirection={LEFT:"left",RIGHT:"right",UP:"up",DOWN:"down"},TouchOrientation={HORIZONTAL:"horizontal",VERTICAL:"vertical",BOTH:"both",NONE:"none"},TouchEvent={END:"end",CANCEL:"cancel"},TouchSettings={DISABLED:!1,Count:0},AvailableSocialPlatforms=[],SocialPlatforms={facebook:{label:"Facebook",icon:"fb",type:"facebook",url:Hogan.compile("https://www.facebook.com/sharer.php?u={{url}}&t={{title}}")},twitter:{label:"Twitter",icon:"twitter",type:"twitter",url:Hogan.compile("https://twitter.com/share?text={{title}}&url={{url}}")},linkedin:{label:"LinkedIn",icon:"linkedin",type:"linkedin",url:Hogan.compile("https://www.linkedin.com/shareArticle?mini=true&title={{title}}&url={{url}}")},googleplus:{label:"Google+",icon:"google",type:"googleplus",url:Hogan.compile("https://plus.google.com/share?text={{title}}&url={{url}}")},mail:{label:"Mail",icon:"mail",type:"mail",url:Hogan.compile("mailto:?subject={{title}}&body={{url}}")},whatsapp:{label:"WhatsApp",icon:"whatsapp",type:"whatsapp",url:Hogan.compile("whatsapp://send?text={{url}}")},xing:{label:"Xing",icon:"xing",type:"xing",url:Hogan.compile("https://www.xing.com/spi/shares/new?url={{url}}&title={{title}}")}},SocialPlatformsReady=!1,OverlayType={VIDEO:"video",IMAGE:"image"},TableGridDelegate=function(){return{amount:0,getViewByIndex:function(a){return""},startAtPosition:0,onClick:null,startTransform:"",spacing:20,getCellSize:function(){return{width:200,height:200}},getSize:function(){return{width:800,height:800}},disabledScroll:function(){},enabledScroll:function(){},disableUpButton:function(){},enableUpButton:function(){},disableDownButton:function(){},enableDownButton:function(){},willChangePosition:function(a,b){},didChangePosition:function(a,b){}}},Translate=function(){var a,b="nl_nl";return{setLabels:function(c,d){b=c,a=d},getLabel:function(b){return"undefined"!=typeof a[b]?a[b]:(Console.error("Unknown translation "+b),b)},setLanguage:function(a,b){}}}(),IMRowViewAlignment={TOP:"top",BOTTOM:"bottom"},IMRowEvents={ROW_APPEAR:"rowAppear",ROW_DISAPPEAR:"rowDisappear"},_imhelpers={},MousePositionScrollOrientation={HORIZONTAL:"horizontal",VERTICAL:"vertical"},IMGestures={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right"};(window._gsQueue||(window._gsQueue=[])).push(function(){"use strict";window._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=[].slice,e=function(a,b,d){c.call(this,a,b,d),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=e.prototype.render},f=1e-10,g=c._internals.isSelector,h=c._internals.isArray,i=e.prototype=c.to({},.1,{}),j=[];e.version="1.11.2",i.constructor=e,i.kill()._gc=!1,e.killTweensOf=e.killDelayedCallsTo=c.killTweensOf,e.getTweensOf=c.getTweensOf,e.ticker=c.ticker,i.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),c.prototype.invalidate.call(this)},i.updateTo=function(a,b){var d,e=this.ratio;b&&this.timeline&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(d in a)this.vars[d]=a[d];if(this._initted)if(b)this._initted=!1;else if(this._notifyPluginsOfEnabled&&this._firstPT&&c._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var f=this._time;this.render(0,!0,!1),this._initted=!1,this.render(f,!0,!1)}else if(this._time>0){this._initted=!1,this._init();for(var g,h=1/(1-e),i=this._firstPT;i;)g=i.s+i.c,i.c*=h,i.s=g-i.c,i=i._next}return this},i.render=function(a,b,c){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var d,e,g,h,i,k,l,m,n=this._dirty?this.totalDuration():this._totalDuration,o=this._time,p=this._totalTime,q=this._cycle,r=this._duration;if(a>=n?(this._totalTime=n,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=r,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(d=!0,e="onComplete"),0===r&&(m=this._rawPrevTime,(0===a||0>m||m===f)&&m!==a&&(c=!0,m>f&&(e="onReverseComplete")),this._rawPrevTime=m=!b||a?a:f)):1e-7>a?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==p||0===r&&this._rawPrevTime>f)&&(e="onReverseComplete",d=this._reversed),0>a?(this._active=!1,0===r&&(this._rawPrevTime>=0&&(c=!0),this._rawPrevTime=m=!b||a?a:f)):this._initted||(c=!0)):(this._totalTime=this._time=a,0!==this._repeat&&(h=r+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=r-this._time),this._time>r?this._time=r:0>this._time&&(this._time=0)),this._easeType?(i=this._time/r,k=this._easeType,l=this._easePower,(1===k||3===k&&i>=.5)&&(i=1-i),3===k&&(i*=2),1===l?i*=i:2===l?i*=i*i:3===l?i*=i*i*i:4===l&&(i*=i*i*i*i),this.ratio=1===k?1-i:2===k?i:.5>this._time/r?i/2:1-i/2):this.ratio=this._ease.getRatio(this._time/r)),o===this._time&&!c&&q===this._cycle)return void(p!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||j)));if(!this._initted){if(this._init(),!this._initted||this._gc)return;this._time&&!d?this.ratio=this._ease.getRatio(this._time/r):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==o&&a>=0&&(this._active=!0),0===p&&(this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===r)&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||j))),g=this._firstPT;g;)g.f?g.t[g.p](g.c*this.ratio+g.s):g.t[g.p]=g.c*this.ratio+g.s,g=g._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,c),b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||j)),this._cycle!==q&&(b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||j)),e&&(this._gc||(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||j),0===r&&this._rawPrevTime===f&&m!==f&&(this._rawPrevTime=0)))},e.to=function(a,b,c){return new e(a,b,c)},e.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new e(a,b,c)},e.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new e(a,b,d)},e.staggerTo=e.allTo=function(a,b,f,i,k,l,m){i=i||0;var n,o,p,q,r=f.delay||0,s=[],t=function(){f.onComplete&&f.onComplete.apply(f.onCompleteScope||this,arguments),k.apply(m||this,l||j)};for(h(a)||("string"==typeof a&&(a=c.selector(a)||a),g(a)&&(a=d.call(a,0))),n=a.length,p=0;n>p;p++){o={};for(q in f)o[q]=f[q];o.delay=r,p===n-1&&k&&(o.onComplete=t),s[p]=new e(a[p],b,o),r+=i}return s},e.staggerFrom=e.allFrom=function(a,b,c,d,f,g,h){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,e.staggerTo(a,b,c,d,f,g,h)},e.staggerFromTo=e.allFromTo=function(a,b,c,d,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,e.staggerTo(a,b,d,f,g,h,i)},e.delayedCall=function(a,b,c,d,f){return new e(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,useFrames:f,overwrite:0})},e.set=function(a,b){return new e(a,0,b)},e.isTweening=function(a){return c.getTweensOf(a,!0).length>0};var k=function(a,b){for(var d=[],e=0,f=a._first;f;)f instanceof c?d[e++]=f:(b&&(d[e++]=f),d=d.concat(k(f,b)),e=d.length),f=f._next;return d},l=e.getAllTweens=function(b){return k(a._rootTimeline,b).concat(k(a._rootFramesTimeline,b))};e.killAll=function(a,c,d,e){null==c&&(c=!0),null==d&&(d=!0);var f,g,h,i=l(0!=e),j=i.length,k=c&&d&&e;for(h=0;j>h;h++)g=i[h],(k||g instanceof b||(f=g.target===g.vars.onComplete)&&d||c&&!f)&&(a?g.totalTime(g.totalDuration()):g._enabled(!1,!1))},e.killChildTweensOf=function(a,b){if(null!=a){var f,i,j,k,l,m=c._tweenLookup;if("string"==typeof a&&(a=c.selector(a)||a),g(a)&&(a=d(a,0)),h(a))for(k=a.length;--k>-1;)e.killChildTweensOf(a[k],b);else{f=[];for(j in m)for(i=m[j].target.parentNode;i;)i===a&&(f=f.concat(m[j].tweens)),i=i.parentNode;for(l=f.length,k=0;l>k;k++)b&&f[k].totalTime(f[k].totalDuration()),f[k]._enabled(!1,!1)}}};var m=function(a,c,d,e){c=c!==!1,d=d!==!1,e=e!==!1;for(var f,g,h=l(e),i=c&&d&&e,j=h.length;--j>-1;)g=h[j],(i||g instanceof b||(f=g.target===g.vars.onComplete)&&d||c&&!f)&&g.paused(a)};return e.pauseAll=function(a,b,c){m(!0,a,b,c)},e.resumeAll=function(a,b,c){m(!1,a,b,c)},e.globalTimeScale=function(b){var d=a._rootTimeline,e=c.ticker.time;return arguments.length?(b=b||f,d._startTime=e-(e-d._startTime)*d._timeScale/b,d=a._rootFramesTimeline,e=c.ticker.frame,d._startTime=e-(e-d._startTime)*d._timeScale/b,d._timeScale=a._rootTimeline._timeScale=b,b):d._timeScale},i.progress=function(a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},i.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},i.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},i.duration=function(b){return arguments.length?a.prototype.duration.call(this,b):this._duration},i.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},i.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},i.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},i.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},e},!0),window._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=function(a){b.call(this,a),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var c,d,e=this.vars;for(d in e)c=e[d],g(c)&&-1!==c.join("").indexOf("{self}")&&(e[d]=this._swapSelfInParams(c));g(e.tweens)&&this.add(e.tweens,0,e.align,e.stagger)},e=1e-10,f=c._internals.isSelector,g=c._internals.isArray,h=[],i=function(a){var b,c={};for(b in a)c[b]=a[b];return c},j=function(a,b,c,d){a._timeline.pause(a._startTime),b&&b.apply(d||a._timeline,c||h)},k=h.slice,l=d.prototype=new b;return d.version="1.11.0",l.constructor=d,l.kill()._gc=!1,l.to=function(a,b,d,e){return b?this.add(new c(a,b,d),e):this.set(a,d,e)},l.from=function(a,b,d,e){return this.add(c.from(a,b,d),e)},l.fromTo=function(a,b,d,e,f){return b?this.add(c.fromTo(a,b,d,e),f):this.set(a,e,f)},l.staggerTo=function(a,b,e,g,h,j,l,m){var n,o=new d({onComplete:j,onCompleteParams:l,onCompleteScope:m});for("string"==typeof a&&(a=c.selector(a)||a),f(a)&&(a=k.call(a,0)),g=g||0,n=0;a.length>n;n++)e.startAt&&(e.startAt=i(e.startAt)),o.to(a[n],b,i(e),n*g);return this.add(o,h)},l.staggerFrom=function(a,b,c,d,e,f,g,h){return c.immediateRender=0!=c.immediateRender,c.runBackwards=!0,this.staggerTo(a,b,c,d,e,f,g,h)},l.staggerFromTo=function(a,b,c,d,e,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,this.staggerTo(a,b,d,e,f,g,h,i)},l.call=function(a,b,d,e){return this.add(c.delayedCall(0,a,b,d),e)},l.set=function(a,b,d){return d=this._parseTimeOrLabel(d,0,!0),null==b.immediateRender&&(b.immediateRender=d===this._time&&!this._paused),this.add(new c(a,0,b),d)},d.exportRoot=function(a,b){a=a||{},null==a.smoothChildTiming&&(a.smoothChildTiming=!0);var e,f,g=new d(a),h=g._timeline;for(null==b&&(b=!0),h._remove(g,!0),g._startTime=0,g._rawPrevTime=g._time=g._totalTime=h._time,e=h._first;e;)f=e._next,b&&e instanceof c&&e.target===e.vars.onComplete||g.add(e,e._startTime-e._delay),e=f;return h.add(g,0),g},l.add=function(e,f,h,i){var j,k,l,m,n,o;if("number"!=typeof f&&(f=this._parseTimeOrLabel(f,0,!0,e)),!(e instanceof a)){if(e instanceof Array||e&&e.push&&g(e)){for(h=h||"normal",i=i||0,j=f,k=e.length,l=0;k>l;l++)g(m=e[l])&&(m=new d({tweens:m})),this.add(m,j),"string"!=typeof m&&"function"!=typeof m&&("sequence"===h?j=m._startTime+m.totalDuration()/m._timeScale:"start"===h&&(m._startTime-=m.delay())),j+=i;return this._uncache(!0)}if("string"==typeof e)return this.addLabel(e,f);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=c.delayedCall(0,e)}if(b.prototype.add.call(this,e,f),this._gc&&!this._paused&&this._duration<this.duration())for(n=this,o=n.rawTime()>e._startTime;n._gc&&n._timeline;)n._timeline.smoothChildTiming&&o?n.totalTime(n._totalTime,!0):n._enabled(!0,!1),n=n._timeline;return this},l.remove=function(b){if(b instanceof a)return this._remove(b,!1);if(b instanceof Array||b&&b.push&&g(b)){for(var c=b.length;--c>-1;)this.remove(b[c]);return this}return"string"==typeof b?this.removeLabel(b):this.kill(null,b)},l._remove=function(a,c){b.prototype._remove.call(this,a,c);var d=this._last;return d?this._time>d._startTime+d._totalDuration/d._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=0,this},l.append=function(a,b){return this.add(a,this._parseTimeOrLabel(null,b,!0,a))},l.insert=l.insertMultiple=function(a,b,c,d){return this.add(a,b||0,c,d)},l.appendMultiple=function(a,b,c,d){return this.add(a,this._parseTimeOrLabel(null,b,!0,a),c,d)},l.addLabel=function(a,b){return this._labels[a]=this._parseTimeOrLabel(b),this},l.addPause=function(a,b,c,d){return this.call(j,["{self}",b,c,d],this,a)},l.removeLabel=function(a){return delete this._labels[a],this},l.getLabelTime=function(a){return null!=this._labels[a]?this._labels[a]:-1},l._parseTimeOrLabel=function(b,c,d,e){var f;if(e instanceof a&&e.timeline===this)this.remove(e);else if(e&&(e instanceof Array||e.push&&g(e)))for(f=e.length;--f>-1;)e[f]instanceof a&&e[f].timeline===this&&this.remove(e[f]);if("string"==typeof c)return this._parseTimeOrLabel(c,d&&"number"==typeof b&&null==this._labels[c]?b-this.duration():0,d);if(c=c||0,"string"!=typeof b||!isNaN(b)&&null==this._labels[b])null==b&&(b=this.duration());else{if(f=b.indexOf("="),-1===f)return null==this._labels[b]?d?this._labels[b]=this.duration()+c:c:this._labels[b]+c;c=parseInt(b.charAt(f-1)+"1",10)*Number(b.substr(f+1)),b=f>1?this._parseTimeOrLabel(b.substr(0,f-1),0,d):this.duration()}return Number(b)+c},l.seek=function(a,b){return this.totalTime("number"==typeof a?a:this._parseTimeOrLabel(a),b!==!1)},l.stop=function(){return this.paused(!0)},l.gotoAndPlay=function(a,b){return this.play(a,b)},l.gotoAndStop=function(a,b){return this.pause(a,b)},l.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,f,g,i,j,k=this._dirty?this.totalDuration():this._totalDuration,l=this._time,m=this._startTime,n=this._timeScale,o=this._paused;if(a>=k?(this._totalTime=this._time=k,this._reversed||this._hasPausedChild()||(f=!0,i="onComplete",0===this._duration&&(0===a||0>this._rawPrevTime||this._rawPrevTime===e)&&this._rawPrevTime!==a&&this._first&&(j=!0,this._rawPrevTime>e&&(i="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a?a:e,a=k+1e-6):1e-7>a?(this._totalTime=this._time=0,(0!==l||0===this._duration&&(this._rawPrevTime>e||0>a&&this._rawPrevTime>=0))&&(i="onReverseComplete",f=this._reversed),0>a?(this._active=!1,0===this._duration&&this._rawPrevTime>=0&&this._first&&(j=!0),this._rawPrevTime=a):(this._rawPrevTime=this._duration||!b||a?a:e,a=0,this._initted||(j=!0))):this._totalTime=this._time=this._rawPrevTime=a,this._time!==l&&this._first||c||j){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==l&&a>0&&(this._active=!0),0===l&&this.vars.onStart&&0!==this._time&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||h)),this._time>=l)for(d=this._first;d&&(g=d._next,!this._paused||o);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;else for(d=this._last;d&&(g=d._prev,!this._paused||o);)(d._active||l>=d._startTime&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||h)),i&&(this._gc||(m===this._startTime||n!==this._timeScale)&&(0===this._time||k>=this.totalDuration())&&(f&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[i]&&this.vars[i].apply(this.vars[i+"Scope"]||this,this.vars[i+"Params"]||h)))}},l._hasPausedChild=function(){for(var a=this._first;a;){if(a._paused||a instanceof d&&a._hasPausedChild())return!0;a=a._next}return!1},l.getChildren=function(a,b,d,e){e=e||-9999999999;for(var f=[],g=this._first,h=0;g;)e>g._startTime||(g instanceof c?b!==!1&&(f[h++]=g):(d!==!1&&(f[h++]=g),a!==!1&&(f=f.concat(g.getChildren(!0,b,d)),h=f.length))),g=g._next;return f},l.getTweensOf=function(a,b){for(var d=c.getTweensOf(a),e=d.length,f=[],g=0;--e>-1;)(d[e].timeline===this||b&&this._contains(d[e]))&&(f[g++]=d[e]);return f},l._contains=function(a){for(var b=a.timeline;b;){if(b===this)return!0;b=b.timeline}return!1},l.shiftChildren=function(a,b,c){c=c||0;for(var d,e=this._first,f=this._labels;e;)e._startTime>=c&&(e._startTime+=a),e=e._next;if(b)for(d in f)f[d]>=c&&(f[d]+=a);return this._uncache(!0)},l._kill=function(a,b){if(!a&&!b)return this._enabled(!1,!1);for(var c=b?this.getTweensOf(b):this.getChildren(!0,!0,!1),d=c.length,e=!1;--d>-1;)c[d]._kill(a,b)&&(e=!0);return e},l.clear=function(a){var b=this.getChildren(!1,!0,!0),c=b.length;for(this._time=this._totalTime=0;--c>-1;)b[c]._enabled(!1,!1);return a!==!1&&(this._labels={}),this._uncache(!0)},l.invalidate=function(){for(var a=this._first;a;)a.invalidate(),a=a._next;return this},l._enabled=function(a,c){if(a===this._gc)for(var d=this._first;d;)d._enabled(a,!0),d=d._next;return b.prototype._enabled.call(this,a,c)},l.duration=function(a){return arguments.length?(0!==this.duration()&&0!==a&&this.timeScale(this._duration/a),this):(this._dirty&&this.totalDuration(),this._duration)},l.totalDuration=function(a){if(!arguments.length){if(this._dirty){for(var b,c,d=0,e=this._last,f=999999999999;e;)b=e._prev,e._dirty&&e.totalDuration(),e._startTime>f&&this._sortChildren&&!e._paused?this.add(e,e._startTime-e._delay):f=e._startTime,0>e._startTime&&!e._paused&&(d-=e._startTime,this._timeline.smoothChildTiming&&(this._startTime+=e._startTime/this._timeScale),this.shiftChildren(-e._startTime,!1,-9999999999),f=0),c=e._startTime+e._totalDuration/e._timeScale,c>d&&(d=c),e=b;this._duration=this._totalDuration=d,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==a&&this.timeScale(this._totalDuration/a),this},l.usesFrames=function(){for(var b=this._timeline;b._timeline;)b=b._timeline;return b===a._rootFramesTimeline},l.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},d},!0),window._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(a,b,c){var d=function(b){a.call(this,b),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},e=1e-10,f=[],g=new c(null,null,1,0),h=d.prototype=new a;return h.constructor=d,h.kill()._gc=!1,d.version="1.11.0",h.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),a.prototype.invalidate.call(this)},h.addCallback=function(a,c,d,e){return this.add(b.delayedCall(0,a,d,e),c)},h.removeCallback=function(a,b){if(a)if(null==b)this._kill(null,a);else for(var c=this.getTweensOf(a,!1),d=c.length,e=this._parseTimeOrLabel(b);--d>-1;)c[d]._startTime===e&&c[d]._enabled(!1,!1);return this},h.tweenTo=function(a,c){c=c||{};var d,e,h={ease:g,overwrite:2,useFrames:this.usesFrames(),immediateRender:!1};for(d in c)h[d]=c[d];return h.time=this._parseTimeOrLabel(a),e=new b(this,Math.abs(Number(h.time)-this._time)/this._timeScale||.001,h),h.onStart=function(){e.target.paused(!0),e.vars.time!==e.target.time()&&e.duration(Math.abs(e.vars.time-e.target.time())/e.target._timeScale),c.onStart&&c.onStart.apply(c.onStartScope||e,c.onStartParams||f)},e},h.tweenFromTo=function(a,b,c){c=c||{},a=this._parseTimeOrLabel(a),c.startAt={onComplete:this.seek,onCompleteParams:[a],onCompleteScope:this},c.immediateRender=c.immediateRender!==!1;var d=this.tweenTo(b,c);return d.duration(Math.abs(d.vars.time-a)/this._timeScale||.001)},h.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,g,h,i,j,k,l=this._dirty?this.totalDuration():this._totalDuration,m=this._duration,n=this._time,o=this._totalTime,p=this._startTime,q=this._timeScale,r=this._rawPrevTime,s=this._paused,t=this._cycle;if(a>=l?(this._locked||(this._totalTime=l,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(g=!0,i="onComplete",0===this._duration&&(0===a||0>r||r===e)&&r!==a&&this._first&&(j=!0,r>e&&(i="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a?a:e,this._yoyo&&0!==(1&this._cycle)?this._time=a=0:(this._time=m,a=m+1e-6)):1e-7>a?(this._locked||(this._totalTime=this._cycle=0),
this._time=0,(0!==n||0===m&&(r>e||0>a&&r>=0)&&!this._locked)&&(i="onReverseComplete",g=this._reversed),0>a?(this._active=!1,0===m&&r>=0&&this._first&&(j=!0),this._rawPrevTime=a):(this._rawPrevTime=m||!b||a?a:e,a=0,this._initted||(j=!0))):(0===m&&0>r&&(j=!0),this._time=this._rawPrevTime=a,this._locked||(this._totalTime=a,0!==this._repeat&&(k=m+this._repeatDelay,this._cycle=this._totalTime/k>>0,0!==this._cycle&&this._cycle===this._totalTime/k&&this._cycle--,this._time=this._totalTime-this._cycle*k,this._yoyo&&0!==(1&this._cycle)&&(this._time=m-this._time),this._time>m?(this._time=m,a=m+1e-6):0>this._time?this._time=a=0:a=this._time))),this._cycle!==t&&!this._locked){var u=this._yoyo&&0!==(1&t),v=u===(this._yoyo&&0!==(1&this._cycle)),w=this._totalTime,x=this._cycle,y=this._rawPrevTime,z=this._time;if(this._totalTime=t*m,t>this._cycle?u=!u:this._totalTime+=m,this._time=n,this._rawPrevTime=0===m?r-1e-5:r,this._cycle=t,this._locked=!0,n=u?0:m,this.render(n,b,0===m),b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||f),v&&(n=u?m+1e-6:-1e-6,this.render(n,!0,!1)),this._locked=!1,this._paused&&!s)return;this._time=z,this._totalTime=w,this._cycle=x,this._rawPrevTime=y}if(!(this._time!==n&&this._first||c||j))return void(o!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||f)));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==o&&a>0&&(this._active=!0),0===o&&this.vars.onStart&&0!==this._totalTime&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||f)),this._time>=n)for(d=this._first;d&&(h=d._next,!this._paused||s);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=h;else for(d=this._last;d&&(h=d._prev,!this._paused||s);)(d._active||n>=d._startTime&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=h;this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||f)),i&&(this._locked||this._gc||(p===this._startTime||q!==this._timeScale)&&(0===this._time||l>=this.totalDuration())&&(g&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[i]&&this.vars[i].apply(this.vars[i+"Scope"]||this,this.vars[i+"Params"]||f)))},h.getActive=function(a,b,c){null==a&&(a=!0),null==b&&(b=!0),null==c&&(c=!1);var d,e,f=[],g=this.getChildren(a,b,c),h=0,i=g.length;for(d=0;i>d;d++)e=g[d],e.isActive()&&(f[h++]=e);return f},h.getLabelAfter=function(a){a||0!==a&&(a=this._time);var b,c=this.getLabelsArray(),d=c.length;for(b=0;d>b;b++)if(c[b].time>a)return c[b].name;return null},h.getLabelBefore=function(a){null==a&&(a=this._time);for(var b=this.getLabelsArray(),c=b.length;--c>-1;)if(a>b[c].time)return b[c].name;return null},h.getLabelsArray=function(){var a,b=[],c=0;for(a in this._labels)b[c++]={time:this._labels[a],name:a};return b.sort(function(a,b){return a.time-b.time}),b},h.progress=function(a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},h.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},h.totalDuration=function(b){return arguments.length?-1===this._repeat?this:this.duration((b-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(a.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},h.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},h.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},h.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},h.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},h.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.getLabelBefore(this._time+1e-8)},d},!0),function(){var a=180/Math.PI,b=[],c=[],d=[],e={},f=function(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d,this.da=d-a,this.ca=c-a,this.ba=b-a},g=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",h=function(a,b,c,d){var e={a:a},f={},g={},h={c:d},i=(a+b)/2,j=(b+c)/2,k=(c+d)/2,l=(i+j)/2,m=(j+k)/2,n=(m-l)/8;return e.b=i+(a-i)/4,f.b=l+n,e.c=f.a=(e.b+f.b)/2,f.c=g.a=(l+m)/2,g.b=m-n,h.b=k+(d-k)/4,g.c=h.a=(g.b+h.b)/2,[e,f,g,h]},i=function(a,e,f,g,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w=a.length-1,x=0,y=a[0].a;for(j=0;w>j;j++)n=a[x],k=n.a,l=n.d,m=a[x+1].d,i?(t=b[j],u=c[j],v=.25*(u+t)*e/(g?.5:d[j]||.5),o=l-(l-k)*(g?.5*e:0!==t?v/t:0),p=l+(m-l)*(g?.5*e:0!==u?v/u:0),q=l-(o+((p-o)*(3*t/(t+u)+.5)/4||0))):(o=l-.5*(l-k)*e,p=l+.5*(m-l)*e,q=l-(o+p)/2),o+=q,p+=q,n.c=r=o,n.b=0!==j?y:y=n.a+.6*(n.c-n.a),n.da=l-k,n.ca=r-k,n.ba=y-k,f?(s=h(k,y,r,l),a.splice(x,1,s[0],s[1],s[2],s[3]),x+=4):x++,y=p;n=a[x],n.b=y,n.c=y+.4*(n.d-y),n.da=n.d-n.a,n.ca=n.c-n.a,n.ba=y-n.a,f&&(s=h(n.a,y,n.c,n.d),a.splice(x,1,s[0],s[1],s[2],s[3]))},j=function(a,d,e,g){var h,i,j,k,l,m,n=[];if(g)for(a=[g].concat(a),i=a.length;--i>-1;)"string"==typeof(m=a[i][d])&&"="===m.charAt(1)&&(a[i][d]=g[d]+Number(m.charAt(0)+m.substr(2)));if(h=a.length-2,0>h)return n[0]=new f(a[0][d],0,0,a[-1>h?0:1][d]),n;for(i=0;h>i;i++)j=a[i][d],k=a[i+1][d],n[i]=new f(j,0,0,k),e&&(l=a[i+2][d],b[i]=(b[i]||0)+(k-j)*(k-j),c[i]=(c[i]||0)+(l-k)*(l-k));return n[i]=new f(a[i][d],0,0,a[i+1][d]),n},k=function(a,f,h,k,l,m){var n,o,p,q,r,s,t,u,v={},w=[],x=m||a[0];l="string"==typeof l?","+l+",":g,null==f&&(f=1);for(o in a[0])w.push(o);if(a.length>1){for(u=a[a.length-1],t=!0,n=w.length;--n>-1;)if(o=w[n],Math.abs(x[o]-u[o])>.05){t=!1;break}t&&(a=a.concat(),m&&a.unshift(m),a.push(a[1]),m=a[a.length-3])}for(b.length=c.length=d.length=0,n=w.length;--n>-1;)o=w[n],e[o]=-1!==l.indexOf(","+o+","),v[o]=j(a,o,e[o],m);for(n=b.length;--n>-1;)b[n]=Math.sqrt(b[n]),c[n]=Math.sqrt(c[n]);if(!k){for(n=w.length;--n>-1;)if(e[o])for(p=v[w[n]],s=p.length-1,q=0;s>q;q++)r=p[q+1].da/c[q]+p[q].da/b[q],d[q]=(d[q]||0)+r*r;for(n=d.length;--n>-1;)d[n]=Math.sqrt(d[n])}for(n=w.length,q=h?4:1;--n>-1;)o=w[n],p=v[o],i(p,f,h,k,e[o]),t&&(p.splice(0,q),p.splice(p.length-q,q));return v},l=function(a,b,c){b=b||"soft";var d,e,g,h,i,j,k,l,m,n,o,p={},q="cubic"===b?3:2,r="soft"===b,s=[];if(r&&c&&(a=[c].concat(a)),null==a||q+1>a.length)throw"invalid Bezier data";for(m in a[0])s.push(m);for(j=s.length;--j>-1;){for(m=s[j],p[m]=i=[],n=0,l=a.length,k=0;l>k;k++)d=null==c?a[k][m]:"string"==typeof(o=a[k][m])&&"="===o.charAt(1)?c[m]+Number(o.charAt(0)+o.substr(2)):Number(o),r&&k>1&&l-1>k&&(i[n++]=(d+i[n-2])/2),i[n++]=d;for(l=n-q+1,n=0,k=0;l>k;k+=q)d=i[k],e=i[k+1],g=i[k+2],h=2===q?0:i[k+3],i[n++]=o=3===q?new f(d,e,g,h):new f(d,(2*e+d)/3,(2*e+g)/3,g);i.length=n}return p},m=function(a,b,c){for(var d,e,f,g,h,i,j,k,l,m,n,o=1/c,p=a.length;--p>-1;)for(m=a[p],f=m.a,g=m.d-f,h=m.c-f,i=m.b-f,d=e=0,k=1;c>=k;k++)j=o*k,l=1-j,d=e-(e=(j*j*g+3*l*(j*h+l*i))*j),n=p*c+k-1,b[n]=(b[n]||0)+d*d},n=function(a,b){b=b>>0||6;var c,d,e,f,g=[],h=[],i=0,j=0,k=b-1,l=[],n=[];for(c in a)m(a[c],g,b);for(e=g.length,d=0;e>d;d++)i+=Math.sqrt(g[d]),f=d%b,n[f]=i,f===k&&(j+=i,f=d/b>>0,l[f]=n,h[f]=j,i=0,n=[]);return{length:j,lengths:h,segments:l}},o=window._gsDefine.plugin({propName:"bezier",priority:-1,API:2,global:!0,init:function(a,b,c){this._target=a,b instanceof Array&&(b={values:b}),this._func={},this._round={},this._props=[],this._timeRes=null==b.timeResolution?6:parseInt(b.timeResolution,10);var d,e,f,g,h,i=b.values||[],j={},m=i[0],o=b.autoRotate||c.vars.orientToBezier;this._autoRotate=o?o instanceof Array?o:[["x","y","rotation",o===!0?0:Number(o)||0]]:null;for(d in m)this._props.push(d);for(f=this._props.length;--f>-1;)d=this._props[f],this._overwriteProps.push(d),e=this._func[d]="function"==typeof a[d],j[d]=e?a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]():parseFloat(a[d]),h||j[d]!==i[0][d]&&(h=j);if(this._beziers="cubic"!==b.type&&"quadratic"!==b.type&&"soft"!==b.type?k(i,isNaN(b.curviness)?1:b.curviness,!1,"thruBasic"===b.type,b.correlate,h):l(i,b.type,j),this._segCount=this._beziers[d].length,this._timeRes){var p=n(this._beziers,this._timeRes);this._length=p.length,this._lengths=p.lengths,this._segments=p.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(o=this._autoRotate)for(o[0]instanceof Array||(this._autoRotate=o=[o]),f=o.length;--f>-1;)for(g=0;3>g;g++)d=o[f][g],this._func[d]="function"==typeof a[d]&&a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)];return!0},set:function(b){var c,d,e,f,g,h,i,j,k,l,m=this._segCount,n=this._func,o=this._target;if(this._timeRes){if(k=this._lengths,l=this._curSeg,b*=this._length,e=this._li,b>this._l2&&m-1>e){for(j=m-1;j>e&&b>=(this._l2=k[++e]););this._l1=k[e-1],this._li=e,this._curSeg=l=this._segments[e],this._s2=l[this._s1=this._si=0]}else if(this._l1>b&&e>0){for(;e>0&&(this._l1=k[--e])>=b;);0===e&&this._l1>b?this._l1=0:e++,this._l2=k[e],this._li=e,this._curSeg=l=this._segments[e],this._s1=l[(this._si=l.length-1)-1]||0,this._s2=l[this._si]}if(c=e,b-=this._l1,e=this._si,b>this._s2&&l.length-1>e){for(j=l.length-1;j>e&&b>=(this._s2=l[++e]););this._s1=l[e-1],this._si=e}else if(this._s1>b&&e>0){for(;e>0&&(this._s1=l[--e])>=b;);0===e&&this._s1>b?this._s1=0:e++,this._s2=l[e],this._si=e}h=(e+(b-this._s1)/(this._s2-this._s1))*this._prec}else c=0>b?0:b>=1?m-1:m*b>>0,h=(b-c*(1/m))*m;for(d=1-h,e=this._props.length;--e>-1;)f=this._props[e],g=this._beziers[f][c],i=(h*h*g.da+3*d*(h*g.ca+d*g.ba))*h+g.a,this._round[f]&&(i=i+(i>0?.5:-.5)>>0),n[f]?o[f](i):o[f]=i;if(this._autoRotate){var p,q,r,s,t,u,v,w=this._autoRotate;for(e=w.length;--e>-1;)f=w[e][2],u=w[e][3]||0,v=w[e][4]===!0?1:a,g=this._beziers[w[e][0]],p=this._beziers[w[e][1]],g&&p&&(g=g[c],p=p[c],q=g.a+(g.b-g.a)*h,s=g.b+(g.c-g.b)*h,q+=(s-q)*h,s+=(g.c+(g.d-g.c)*h-s)*h,r=p.a+(p.b-p.a)*h,t=p.b+(p.c-p.b)*h,r+=(t-r)*h,t+=(p.c+(p.d-p.c)*h-t)*h,i=Math.atan2(t-r,s-q)*v+u,n[f]?o[f](i):o[f]=i)}}}),p=o.prototype;o.bezierThrough=k,o.cubicToQuadratic=h,o._autoCSS=!0,o.quadraticToCubic=function(a,b,c){return new f(a,(2*b+a)/3,(2*b+c)/3,c)},o._cssRegister=function(){var a=window._gsDefine.globals.CSSPlugin;if(a){var b=a._internals,c=b._parseToProxy,d=b._setPluginRatio,e=b.CSSPropTween;b._registerComplexSpecialProp("bezier",{parser:function(a,b,f,g,h,i){b instanceof Array&&(b={values:b}),i=new o;var j,k,l,m=b.values,n=m.length-1,p=[],q={};if(0>n)return h;for(j=0;n>=j;j++)l=c(a,m[j],g,h,i,n!==j),p[j]=l.end;for(k in b)q[k]=b[k];return q.values=p,h=new e(a,"bezier",0,0,l.pt,2),h.data=l,h.plugin=i,h.setRatio=d,0===q.autoRotate&&(q.autoRotate=!0),!q.autoRotate||q.autoRotate instanceof Array||(j=q.autoRotate===!0?0:Number(q.autoRotate),q.autoRotate=null!=l.end.left?[["left","top","rotation",j,!1]]:null!=l.end.x&&[["x","y","rotation",j,!1]]),q.autoRotate&&(g._transform||g._enableTransforms(!1),l.autoRotate=g._target._gsTransform),i._onInitTween(l.proxy,q,g._tween),h}})}},p._roundProps=function(a,b){for(var c=this._overwriteProps,d=c.length;--d>-1;)(a[c[d]]||a.bezier||a.bezierThrough)&&(this._round[c[d]]=b)},p._kill=function(a){var b,c,d=this._props;for(b in this._beziers)if(b in a)for(delete this._beziers[b],delete this._func[b],c=d.length;--c>-1;)d[c]===b&&d.splice(c,1);return this._super._kill.call(this,a)}}(),window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,b){var c,d,e,f,g=function(){a.call(this,"css"),this._overwriteProps.length=0,this.setRatio=g.prototype.setRatio},h={},i=g.prototype=new a("css");i.constructor=g,g.version="1.11.2",g.API=2,g.defaultTransformPerspective=0,i="px",g.suffixMap={top:i,right:i,bottom:i,left:i,width:i,height:i,fontSize:i,padding:i,margin:i,perspective:i};var j,k,l,m,n,o,p=/(?:\d|\-\d|\.\d|\-\.\d)+/g,q=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,r=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,s=/[^\d\-\.]/g,t=/(?:\d|\-|\+|=|#|\.)*/g,u=/opacity *= *([^)]*)/,v=/opacity:([^;]*)/,w=/alpha\(opacity *=.+?\)/i,x=/^(rgb|hsl)/,y=/([A-Z])/g,z=/-([a-z])/gi,A=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,B=function(a,b){return b.toUpperCase()},C=/(?:Left|Right|Width)/i,D=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,E=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,F=/,(?=[^\)]*(?:\(|$))/gi,G=Math.PI/180,H=180/Math.PI,I={},J=document,K=J.createElement("div"),L=J.createElement("img"),M=g._internals={_specialProps:h},N=navigator.userAgent,O=function(){var a,b=N.indexOf("Android"),c=J.createElement("div");return l=-1!==N.indexOf("Safari")&&-1===N.indexOf("Chrome")&&(-1===b||Number(N.substr(b+8,1))>3),n=l&&6>Number(N.substr(N.indexOf("Version/")+8,1)),m=-1!==N.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N)&&(o=parseFloat(RegExp.$1)),c.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",a=c.getElementsByTagName("a")[0],!!a&&/^0.55/.test(a.style.opacity)}(),P=function(a){return u.test("string"==typeof a?a:(a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Q=function(a){window.console&&console.log(a)},R="",S="",T=function(a,b){b=b||K;var c,d,e=b.style;if(void 0!==e[a])return a;for(a=a.charAt(0).toUpperCase()+a.substr(1),c=["O","Moz","ms","Ms","Webkit"],d=5;--d>-1&&void 0===e[c[d]+a];);return d>=0?(S=3===d?"ms":c[d],R="-"+S.toLowerCase()+"-",S+a):null},U=J.defaultView?J.defaultView.getComputedStyle:function(){},V=g.getStyle=function(a,b,c,d,e){var f;return O||"opacity"!==b?(!d&&a.style[b]?f=a.style[b]:(c=c||U(a,null))?(a=c.getPropertyValue(b.replace(y,"-$1").toLowerCase()),f=a||c.length?a:c[b]):a.currentStyle&&(f=a.currentStyle[b]),null==e||f&&"none"!==f&&"auto"!==f&&"auto auto"!==f?f:e):P(a)},W=function(a,b,c,d,e){if("px"===d||!d)return c;if("auto"===d||!c)return 0;var f,g=C.test(b),h=a,i=K.style,j=0>c;return j&&(c=-c),"%"===d&&-1!==b.indexOf("border")?f=c/100*(g?a.clientWidth:a.clientHeight):(i.cssText="border:0 solid red;position:"+V(a,"position")+";line-height:0;","%"!==d&&h.appendChild?i[g?"borderLeftWidth":"borderTopWidth"]=c+d:(h=a.parentNode||J.body,i[g?"width":"height"]=c+d),h.appendChild(K),f=parseFloat(K[g?"offsetWidth":"offsetHeight"]),h.removeChild(K),0!==f||e||(f=W(a,b,c,d,!0))),j?-f:f},X=function(a,b,c){if("absolute"!==V(a,"position",c))return 0;var d="left"===b?"Left":"Top",e=V(a,"margin"+d,c);return a["offset"+d]-(W(a,b,parseFloat(e),e.replace(t,""))||0)},Y=function(a,b){var c,d,e={};if(b=b||U(a,null))if(c=b.length)for(;--c>-1;)e[b[c].replace(z,B)]=b.getPropertyValue(b[c]);else for(c in b)e[c]=b[c];else if(b=a.currentStyle||a.style)for(c in b)"string"==typeof c&&void 0!==e[c]&&(e[c.replace(z,B)]=b[c]);return O||(e.opacity=P(a)),d=xa(a,b,!1),e.rotation=d.rotation,e.skewX=d.skewX,e.scaleX=d.scaleX,e.scaleY=d.scaleY,e.x=d.x,e.y=d.y,wa&&(e.z=d.z,e.rotationX=d.rotationX,e.rotationY=d.rotationY,e.scaleZ=d.scaleZ),e.filters&&delete e.filters,e},Z=function(a,b,c,d,e){var f,g,h,i={},j=a.style;for(g in c)"cssText"!==g&&"length"!==g&&isNaN(g)&&(b[g]!==(f=c[g])||e&&e[g])&&-1===g.indexOf("Origin")&&("number"==typeof f||"string"==typeof f)&&(i[g]="auto"!==f||"left"!==g&&"top"!==g?""!==f&&"auto"!==f&&"none"!==f||"string"!=typeof b[g]||""===b[g].replace(s,"")?f:0:X(a,g),void 0!==j[g]&&(h=new la(j,g,j[g],h)));if(d)for(g in d)"className"!==g&&(i[g]=d[g]);return{difs:i,firstMPT:h}},$={width:["Left","Right"],height:["Top","Bottom"]},_=["marginLeft","marginRight","marginTop","marginBottom"],aa=function(a,b,c){var d=parseFloat("width"===b?a.offsetWidth:a.offsetHeight),e=$[b],f=e.length;for(c=c||U(a,null);--f>-1;)d-=parseFloat(V(a,"padding"+e[f],c,!0))||0,d-=parseFloat(V(a,"border"+e[f]+"Width",c,!0))||0;return d},ba=function(a,b){(null==a||""===a||"auto"===a||"auto auto"===a)&&(a="0 0");var c=a.split(" "),d=-1!==a.indexOf("left")?"0%":-1!==a.indexOf("right")?"100%":c[0],e=-1!==a.indexOf("top")?"0%":-1!==a.indexOf("bottom")?"100%":c[1];return null==e?e="0":"center"===e&&(e="50%"),("center"===d||isNaN(parseFloat(d))&&-1===(d+"").indexOf("="))&&(d="50%"),b&&(b.oxp=-1!==d.indexOf("%"),b.oyp=-1!==e.indexOf("%"),b.oxr="="===d.charAt(1),b.oyr="="===e.charAt(1),b.ox=parseFloat(d.replace(s,"")),b.oy=parseFloat(e.replace(s,""))),d+" "+e+(c.length>2?" "+c[2]:"")},ca=function(a,b){return"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2)):parseFloat(a)-parseFloat(b)},da=function(a,b){return null==a?b:"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*Number(a.substr(2))+b:parseFloat(a)},ea=function(a,b,c,d){var e,f,g,h,i=1e-6;return null==a?h=b:"number"==typeof a?h=a:(e=360,f=a.split("_"),g=Number(f[0].replace(s,""))*(-1===a.indexOf("rad")?1:H)-("="===a.charAt(1)?0:b),f.length&&(d&&(d[c]=b+g),-1!==a.indexOf("short")&&(g%=e,g!==g%(e/2)&&(g=0>g?g+e:g-e)),-1!==a.indexOf("_cw")&&0>g?g=(g+9999999999*e)%e-(0|g/e)*e:-1!==a.indexOf("ccw")&&g>0&&(g=(g-9999999999*e)%e-(0|g/e)*e)),h=b+g),i>h&&h>-i&&(h=0),h},fa={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ga=function(a,b,c){return a=0>a?a+1:a>1?a-1:a,0|255*(1>6*a?b+6*(c-b)*a:.5>a?c:2>3*a?b+6*(c-b)*(2/3-a):b)+.5},ha=function(a){var b,c,d,e,f,g;return a&&""!==a?"number"==typeof a?[a>>16,255&a>>8,255&a]:(","===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),fa[a]?fa[a]:"#"===a.charAt(0)?(4===a.length&&(b=a.charAt(1),c=a.charAt(2),d=a.charAt(3),a="#"+b+b+c+c+d+d),a=parseInt(a.substr(1),16),[a>>16,255&a>>8,255&a]):"hsl"===a.substr(0,3)?(a=a.match(p),e=Number(a[0])%360/360,f=Number(a[1])/100,g=Number(a[2])/100,c=.5>=g?g*(f+1):g+f-g*f,b=2*g-c,a.length>3&&(a[3]=Number(a[3])),a[0]=ga(e+1/3,b,c),a[1]=ga(e,b,c),a[2]=ga(e-1/3,b,c),a):(a=a.match(p)||fa.transparent,a[0]=Number(a[0]),a[1]=Number(a[1]),a[2]=Number(a[2]),a.length>3&&(a[3]=Number(a[3])),a)):fa.black},ia="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(i in fa)ia+="|"+i+"\\b";ia=RegExp(ia+")","gi");var ja=function(a,b,c,d){if(null==a)return function(a){return a};var e,f=b?(a.match(ia)||[""])[0]:"",g=a.split(f).join("").match(r)||[],h=a.substr(0,a.indexOf(g[0])),i=")"===a.charAt(a.length-1)?")":"",j=-1!==a.indexOf(" ")?" ":",",k=g.length,l=k>0?g[0].replace(p,""):"";return k?e=b?function(a){var b,m,n,o;if("number"==typeof a)a+=l;else if(d&&F.test(a)){for(o=a.replace(F,"|").split("|"),n=0;o.length>n;n++)o[n]=e(o[n]);return o.join(",")}if(b=(a.match(ia)||[f])[0],m=a.split(b).join("").match(r)||[],n=m.length,k>n--)for(;k>++n;)m[n]=c?m[0|(n-1)/2]:g[n];return h+m.join(j)+j+b+i+(-1!==a.indexOf("inset")?" inset":"")}:function(a){var b,f,m;if("number"==typeof a)a+=l;else if(d&&F.test(a)){for(f=a.replace(F,"|").split("|"),m=0;f.length>m;m++)f[m]=e(f[m]);return f.join(",")}if(b=a.match(r)||[],m=b.length,k>m--)for(;k>++m;)b[m]=c?b[0|(m-1)/2]:g[m];return h+b.join(j)+i}:function(a){return a}},ka=function(a){return a=a.split(","),function(b,c,d,e,f,g,h){var i,j=(c+"").split(" ");for(h={},i=0;4>i;i++)h[a[i]]=j[i]=j[i]||j[(i-1)/2>>0];return e.parse(b,h,f,g)}},la=(M._setPluginRatio=function(a){this.plugin.setRatio(a);for(var b,c,d,e,f=this.data,g=f.proxy,h=f.firstMPT,i=1e-6;h;)b=g[h.v],h.r?b=b>0?0|b+.5:0|b-.5:i>b&&b>-i&&(b=0),h.t[h.p]=b,h=h._next;if(f.autoRotate&&(f.autoRotate.rotation=g.rotation),1===a)for(h=f.firstMPT;h;){if(c=h.t,c.type){if(1===c.type){for(e=c.xs0+c.s+c.xs1,d=1;c.l>d;d++)e+=c["xn"+d]+c["xs"+(d+1)];c.e=e}}else c.e=c.s+c.xs0;h=h._next}},function(a,b,c,d,e){this.t=a,this.p=b,this.v=c,this.r=e,d&&(d._prev=this,this._next=d)}),ma=(M._parseToProxy=function(a,b,c,d,e,f){var g,h,i,j,k,l=d,m={},n={},o=c._transform,p=I;for(c._transform=null,I=b,d=k=c.parse(a,b,d,e),I=p,f&&(c._transform=o,l&&(l._prev=null,l._prev&&(l._prev._next=null)));d&&d!==l;){if(1>=d.type&&(h=d.p,n[h]=d.s+d.c,m[h]=d.s,f||(j=new la(d,"s",h,j,d.r),d.c=0),1===d.type))for(g=d.l;--g>0;)i="xn"+g,h=d.p+"_"+i,n[h]=d.data[i],m[h]=d[i],f||(j=new la(d,i,h,j,d.rxp[i]));d=d._next}return{proxy:m,end:n,firstMPT:j,pt:k}},M.CSSPropTween=function(a,b,d,e,g,h,i,j,k,l,m){this.t=a,this.p=b,this.s=d,this.c=e,this.n=i||b,a instanceof ma||f.push(this.n),this.r=j,this.type=h||0,k&&(this.pr=k,c=!0),this.b=void 0===l?d:l,this.e=void 0===m?d+e:m,g&&(this._next=g,g._prev=this)}),na=g.parseComplex=function(a,b,c,d,e,f,g,h,i,k){c=c||f||"",g=new ma(a,b,0,0,g,k?2:1,null,!1,h,c,d),d+="";var l,m,n,o,r,s,t,u,v,w,y,z,A=c.split(", ").join(",").split(" "),B=d.split(", ").join(",").split(" "),C=A.length,D=j!==!1;for((-1!==d.indexOf(",")||-1!==c.indexOf(","))&&(A=A.join(" ").replace(F,", ").split(" "),B=B.join(" ").replace(F,", ").split(" "),C=A.length),C!==B.length&&(A=(f||"").split(" "),C=A.length),g.plugin=i,g.setRatio=k,l=0;C>l;l++)if(o=A[l],r=B[l],u=parseFloat(o),u||0===u)g.appendXtra("",u,ca(r,u),r.replace(q,""),D&&-1!==r.indexOf("px"),!0);else if(e&&("#"===o.charAt(0)||fa[o]||x.test(o)))z=","===r.charAt(r.length-1)?"),":")",o=ha(o),r=ha(r),v=o.length+r.length>6,v&&!O&&0===r[3]?(g["xs"+g.l]+=g.l?" transparent":"transparent",g.e=g.e.split(B[l]).join("transparent")):(O||(v=!1),g.appendXtra(v?"rgba(":"rgb(",o[0],r[0]-o[0],",",!0,!0).appendXtra("",o[1],r[1]-o[1],",",!0).appendXtra("",o[2],r[2]-o[2],v?",":z,!0),v&&(o=4>o.length?1:o[3],g.appendXtra("",o,(4>r.length?1:r[3])-o,z,!1)));else if(s=o.match(p)){if(t=r.match(q),!t||t.length!==s.length)return g;for(n=0,m=0;s.length>m;m++)y=s[m],w=o.indexOf(y,n),g.appendXtra(o.substr(n,w-n),Number(y),ca(t[m],y),"",D&&"px"===o.substr(w+y.length,2),0===m),n=w+y.length;g["xs"+g.l]+=o.substr(n)}else g["xs"+g.l]+=g.l?" "+o:o;if(-1!==d.indexOf("=")&&g.data){for(z=g.xs0+g.data.s,l=1;g.l>l;l++)z+=g["xs"+l]+g.data["xn"+l];g.e=z+g["xs"+l]}return g.l||(g.type=-1,g.xs0=g.e),g.xfirst||g},oa=9;for(i=ma.prototype,i.l=i.pr=0;--oa>0;)i["xn"+oa]=0,i["xs"+oa]="";i.xs0="",i._next=i._prev=i.xfirst=i.data=i.plugin=i.setRatio=i.rxp=null,i.appendXtra=function(a,b,c,d,e,f){var g=this,h=g.l;return g["xs"+h]+=f&&h?" "+a:a||"",c||0===h||g.plugin?(g.l++,g.type=g.setRatio?2:1,g["xs"+g.l]=d||"",h>0?(g.data["xn"+h]=b+c,g.rxp["xn"+h]=e,g["xn"+h]=b,g.plugin||(g.xfirst=new ma(g,"xn"+h,b,c,g.xfirst||g,0,g.n,e,g.pr),g.xfirst.xs0=0),g):(g.data={s:b+c},g.rxp={},g.s=b,g.c=c,g.r=e,g)):(g["xs"+h]+=b+(d||""),g)};var pa=function(a,b){b=b||{},this.p=b.prefix?T(a)||a:a,h[a]=h[this.p]=this,this.format=b.formatter||ja(b.defaultValue,b.color,b.collapsible,b.multi),b.parser&&(this.parse=b.parser),this.clrs=b.color,this.multi=b.multi,this.keyword=b.keyword,this.dflt=b.defaultValue,this.pr=b.priority||0},qa=M._registerComplexSpecialProp=function(a,b,c){"object"!=typeof b&&(b={parser:c});var d,e,f=a.split(","),g=b.defaultValue;for(c=c||[g],d=0;f.length>d;d++)b.prefix=0===d&&b.prefix,b.defaultValue=c[d]||g,e=new pa(f[d],b)},ra=function(a){if(!h[a]){var b=a.charAt(0).toUpperCase()+a.substr(1)+"Plugin";qa(a,{parser:function(a,c,d,e,f,g,i){var j=(window.GreenSockGlobals||window).com.greensock.plugins[b];return j?(j._cssRegister(),h[d].parse(a,c,d,e,f,g,i)):(Q("Error: "+b+" js file not loaded."),f)}})}};i=pa.prototype,i.parseComplex=function(a,b,c,d,e,f){var g,h,i,j,k,l,m=this.keyword;if(this.multi&&(F.test(c)||F.test(b)?(h=b.replace(F,"|").split("|"),i=c.replace(F,"|").split("|")):m&&(h=[b],i=[c])),i){for(j=i.length>h.length?i.length:h.length,g=0;j>g;g++)b=h[g]=h[g]||this.dflt,c=i[g]=i[g]||this.dflt,m&&(k=b.indexOf(m),l=c.indexOf(m),k!==l&&(c=-1===l?i:h,c[g]+=" "+m));b=h.join(", "),c=i.join(", ")}return na(a,this.p,b,c,this.clrs,this.dflt,d,this.pr,e,f)},i.parse=function(a,b,c,d,f,g){return this.parseComplex(a.style,this.format(V(a,this.p,e,!1,this.dflt)),this.format(b),f,g)},g.registerSpecialProp=function(a,b,c){qa(a,{parser:function(a,d,e,f,g,h){var i=new ma(a,e,0,0,g,2,e,!1,c);return i.plugin=h,i.setRatio=b(a,d,f._tween,e),i},priority:c})};var sa="scaleX,scaleY,scaleZ,x,y,z,skewX,rotation,rotationX,rotationY,perspective".split(","),ta=T("transform"),ua=R+"transform",va=T("transformOrigin"),wa=null!==T("perspective"),xa=function(a,b,c,d){if(a._gsTransform&&c&&!d)return a._gsTransform;var e,f,h,i,j,k,l,m,n,o,p,q,r,s=c?a._gsTransform||{skewY:0}:{skewY:0},t=0>s.scaleX,u=2e-5,v=1e5,w=179.99,x=w*G,y=wa?parseFloat(V(a,va,b,!1,"0 0 0").split(" ")[2])||s.zOrigin||0:0;for(ta?e=V(a,ua,b,!0):a.currentStyle&&(e=a.currentStyle.filter.match(D),e=e&&4===e.length?[e[0].substr(4),Number(e[2].substr(4)),Number(e[1].substr(4)),e[3].substr(4),s.x||0,s.y||0].join(","):""),f=(e||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],h=f.length;--h>-1;)i=Number(f[h]),f[h]=(j=i-(i|=0))?(0|j*v+(0>j?-.5:.5))/v+i:i;if(16===f.length){var z=f[8],A=f[9],B=f[10],C=f[12],E=f[13],F=f[14];if(s.zOrigin&&(F=-s.zOrigin,C=z*F-f[12],E=A*F-f[13],F=B*F+s.zOrigin-f[14]),!c||d||null==s.rotationX){var I,J,K,L,M,N,O,P=f[0],Q=f[1],R=f[2],S=f[3],T=f[4],U=f[5],W=f[6],X=f[7],Y=f[11],Z=Math.atan2(W,B),$=-x>Z||Z>x;s.rotationX=Z*H,Z&&(L=Math.cos(-Z),M=Math.sin(-Z),I=T*L+z*M,J=U*L+A*M,K=W*L+B*M,z=T*-M+z*L,A=U*-M+A*L,B=W*-M+B*L,Y=X*-M+Y*L,T=I,U=J,W=K),Z=Math.atan2(z,P),s.rotationY=Z*H,Z&&(N=-x>Z||Z>x,L=Math.cos(-Z),M=Math.sin(-Z),I=P*L-z*M,J=Q*L-A*M,K=R*L-B*M,A=Q*M+A*L,B=R*M+B*L,Y=S*M+Y*L,P=I,Q=J,R=K),Z=Math.atan2(Q,U),s.rotation=Z*H,Z&&(O=-x>Z||Z>x,L=Math.cos(-Z),M=Math.sin(-Z),P=P*L+T*M,J=Q*L+U*M,U=Q*-M+U*L,W=R*-M+W*L,Q=J),O&&$?s.rotation=s.rotationX=0:O&&N?s.rotation=s.rotationY=0:N&&$&&(s.rotationY=s.rotationX=0),s.scaleX=(0|Math.sqrt(P*P+Q*Q)*v+.5)/v,s.scaleY=(0|Math.sqrt(U*U+A*A)*v+.5)/v,s.scaleZ=(0|Math.sqrt(W*W+B*B)*v+.5)/v,s.skewX=0,s.perspective=Y?1/(0>Y?-Y:Y):0,s.x=C,s.y=E,s.z=F}}else if(!(wa&&!d&&f.length&&s.x===f[4]&&s.y===f[5]&&(s.rotationX||s.rotationY)||void 0!==s.x&&"none"===V(a,"display",b))){var _=f.length>=6,aa=_?f[0]:1,ba=f[1]||0,ca=f[2]||0,da=_?f[3]:1;s.x=f[4]||0,s.y=f[5]||0,k=Math.sqrt(aa*aa+ba*ba),l=Math.sqrt(da*da+ca*ca),m=aa||ba?Math.atan2(ba,aa)*H:s.rotation||0,n=ca||da?Math.atan2(ca,da)*H+m:s.skewX||0,o=k-Math.abs(s.scaleX||0),p=l-Math.abs(s.scaleY||0),Math.abs(n)>90&&270>Math.abs(n)&&(t?(k*=-1,n+=0>=m?180:-180,m+=0>=m?180:-180):(l*=-1,n+=0>=n?180:-180)),q=(m-s.rotation)%180,r=(n-s.skewX)%180,(void 0===s.skewX||o>u||-u>o||p>u||-u>p||q>-w&&w>q&&!1|q*v||r>-w&&w>r&&!1|r*v)&&(s.scaleX=k,s.scaleY=l,s.rotation=m,s.skewX=n),wa&&(s.rotationX=s.rotationY=s.z=0,s.perspective=parseFloat(g.defaultTransformPerspective)||0,s.scaleZ=1)}s.zOrigin=y;for(h in s)u>s[h]&&s[h]>-u&&(s[h]=0);return c&&(a._gsTransform=s),s},ya=function(a){var b,c,d=this.data,e=-d.rotation*G,f=e+d.skewX*G,g=1e5,h=(0|Math.cos(e)*d.scaleX*g)/g,i=(0|Math.sin(e)*d.scaleX*g)/g,j=(0|Math.sin(f)*-d.scaleY*g)/g,k=(0|Math.cos(f)*d.scaleY*g)/g,l=this.t.style,m=this.t.currentStyle;if(m){c=i,i=-j,j=-c,b=m.filter,l.filter="";var n,p,q=this.t.offsetWidth,r=this.t.offsetHeight,s="absolute"!==m.position,v="progid:DXImageTransform.Microsoft.Matrix(M11="+h+", M12="+i+", M21="+j+", M22="+k,w=d.x,x=d.y;if(null!=d.ox&&(n=(d.oxp?.01*q*d.ox:d.ox)-q/2,p=(d.oyp?.01*r*d.oy:d.oy)-r/2,w+=n-(n*h+p*i),x+=p-(n*j+p*k)),s?(n=q/2,p=r/2,v+=", Dx="+(n-(n*h+p*i)+w)+", Dy="+(p-(n*j+p*k)+x)+")"):v+=", sizingMethod='auto expand')",l.filter=-1!==b.indexOf("DXImageTransform.Microsoft.Matrix(")?b.replace(E,v):v+" "+b,(0===a||1===a)&&1===h&&0===i&&0===j&&1===k&&(s&&-1===v.indexOf("Dx=0, Dy=0")||u.test(b)&&100!==parseFloat(RegExp.$1)||-1===b.indexOf(b.indexOf("Alpha"))&&l.removeAttribute("filter")),!s){var y,z,A,B=8>o?1:-1;for(n=d.ieOffsetX||0,p=d.ieOffsetY||0,d.ieOffsetX=Math.round((q-((0>h?-h:h)*q+(0>i?-i:i)*r))/2+w),d.ieOffsetY=Math.round((r-((0>k?-k:k)*r+(0>j?-j:j)*q))/2+x),oa=0;4>oa;oa++)z=_[oa],y=m[z],c=-1!==y.indexOf("px")?parseFloat(y):W(this.t,z,parseFloat(y),y.replace(t,""))||0,A=c!==d[z]?2>oa?-d.ieOffsetX:-d.ieOffsetY:2>oa?n-d.ieOffsetX:p-d.ieOffsetY,l[z]=(d[z]=Math.round(c-A*(0===oa||2===oa?1:B)))+"px"}}},za=function(){var a,b,c,d,e,f,g,h,i,j,k,l,n,o,p,q,r,s,t,u,v,w,x,y=this.data,z=this.t.style,A=y.rotation*G,B=y.scaleX,C=y.scaleY,D=y.scaleZ,E=y.perspective;if(m){var F=1e-4;F>B&&B>-F&&(B=D=2e-5),F>C&&C>-F&&(C=D=2e-5),!E||y.z||y.rotationX||y.rotationY||(E=0)}if(A||y.skewX)s=Math.cos(A),t=Math.sin(A),a=s,e=t,y.skewX&&(A-=y.skewX*G,s=Math.cos(A),t=Math.sin(A)),b=-t,f=s;else{if(!(y.rotationY||y.rotationX||1!==D||E))return void(z[ta]="translate3d("+y.x+"px,"+y.y+"px,"+y.z+"px)"+(1!==B||1!==C?" scale("+B+","+C+")":""));a=f=1,b=e=0}k=1,c=d=g=h=i=j=l=n=o=0,p=E?-1/E:0,q=y.zOrigin,r=1e5,A=y.rotationY*G,A&&(s=Math.cos(A),t=Math.sin(A),i=k*-t,n=p*-t,c=a*t,g=e*t,k*=s,p*=s,a*=s,e*=s),A=y.rotationX*G,A&&(s=Math.cos(A),t=Math.sin(A),u=b*s+c*t,v=f*s+g*t,w=j*s+k*t,x=o*s+p*t,c=b*-t+c*s,g=f*-t+g*s,k=j*-t+k*s,p=o*-t+p*s,b=u,f=v,j=w,o=x),1!==D&&(c*=D,g*=D,k*=D,p*=D),1!==C&&(b*=C,f*=C,j*=C,o*=C),1!==B&&(a*=B,e*=B,i*=B,n*=B),q&&(l-=q,d=c*l,h=g*l,l=k*l+q),d=(u=(d+=y.x)-(d|=0))?(0|u*r+(0>u?-.5:.5))/r+d:d,h=(u=(h+=y.y)-(h|=0))?(0|u*r+(0>u?-.5:.5))/r+h:h,l=(u=(l+=y.z)-(l|=0))?(0|u*r+(0>u?-.5:.5))/r+l:l,z[ta]="matrix3d("+[(0|a*r)/r,(0|e*r)/r,(0|i*r)/r,(0|n*r)/r,(0|b*r)/r,(0|f*r)/r,(0|j*r)/r,(0|o*r)/r,(0|c*r)/r,(0|g*r)/r,(0|k*r)/r,(0|p*r)/r,d,h,l,E?1+-l/E:1].join(",")+")"},Aa=function(){var a,b,c,d,e,f,g,h,i,j=this.data,k=this.t,l=k.style;m&&(a=l.top?"top":l.bottom?"bottom":parseFloat(V(k,"top",null,!1))?"bottom":"top",b=V(k,a,null,!1),c=parseFloat(b)||0,d=b.substr((c+"").length)||"px",j._ffFix=!j._ffFix,l[a]=(j._ffFix?c+.05:c-.05)+d),j.rotation||j.skewX?(e=j.rotation*G,f=e-j.skewX*G,g=1e5,h=j.scaleX*g,i=j.scaleY*g,l[ta]="matrix("+(0|Math.cos(e)*h)/g+","+(0|Math.sin(e)*h)/g+","+(0|Math.sin(f)*-i)/g+","+(0|Math.cos(f)*i)/g+","+j.x+","+j.y+")"):l[ta]="matrix("+j.scaleX+",0,0,"+j.scaleY+","+j.x+","+j.y+")"};qa("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D",{parser:function(a,b,c,d,f,g,h){if(d._transform)return f;var i,j,k,l,m,n,o,p=d._transform=xa(a,e,!0,h.parseTransform),q=a.style,r=1e-6,s=sa.length,t=h,u={};if("string"==typeof t.transform&&ta)k=q.cssText,q[ta]=t.transform,q.display="block",i=xa(a,null,!1),q.cssText=k;else if("object"==typeof t){if(i={scaleX:da(null!=t.scaleX?t.scaleX:t.scale,p.scaleX),scaleY:da(null!=t.scaleY?t.scaleY:t.scale,p.scaleY),scaleZ:da(null!=t.scaleZ?t.scaleZ:t.scale,p.scaleZ),x:da(t.x,p.x),y:da(t.y,p.y),z:da(t.z,p.z),perspective:da(t.transformPerspective,p.perspective)},o=t.directionalRotation,null!=o)if("object"==typeof o)for(k in o)t[k]=o[k];else t.rotation=o;i.rotation=ea("rotation"in t?t.rotation:"shortRotation"in t?t.shortRotation+"_short":"rotationZ"in t?t.rotationZ:p.rotation,p.rotation,"rotation",u),wa&&(i.rotationX=ea("rotationX"in t?t.rotationX:"shortRotationX"in t?t.shortRotationX+"_short":p.rotationX||0,p.rotationX,"rotationX",u),i.rotationY=ea("rotationY"in t?t.rotationY:"shortRotationY"in t?t.shortRotationY+"_short":p.rotationY||0,p.rotationY,"rotationY",u)),i.skewX=null==t.skewX?p.skewX:ea(t.skewX,p.skewX),i.skewY=null==t.skewY?p.skewY:ea(t.skewY,p.skewY),(j=i.skewY-p.skewY)&&(i.skewX+=j,i.rotation+=j)}for(null!=t.force3D&&(p.force3D=t.force3D,n=!0),m=p.force3D||p.z||p.rotationX||p.rotationY||i.z||i.rotationX||i.rotationY||i.perspective,m||null==t.scale||(i.scaleZ=1);--s>-1;)c=sa[s],l=i[c]-p[c],
(l>r||-r>l||null!=I[c])&&(n=!0,f=new ma(p,c,p[c],l,f),c in u&&(f.e=u[c]),f.xs0=0,f.plugin=g,d._overwriteProps.push(f.n));return l=t.transformOrigin,(l||wa&&m&&p.zOrigin)&&(ta?(n=!0,c=va,l=(l||V(a,c,e,!1,"50% 50%"))+"",f=new ma(q,c,0,0,f,-1,"transformOrigin"),f.b=q[c],f.plugin=g,wa?(k=p.zOrigin,l=l.split(" "),p.zOrigin=(l.length>2&&(0===k||"0px"!==l[2])?parseFloat(l[2]):k)||0,f.xs0=f.e=q[c]=l[0]+" "+(l[1]||"50%")+" 0px",f=new ma(p,"zOrigin",0,0,f,-1,f.n),f.b=k,f.xs0=f.e=p.zOrigin):f.xs0=f.e=q[c]=l):ba(l+"",p)),n&&(d._transformType=m||3===this._transformType?3:2),f},prefix:!0}),qa("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),qa("borderRadius",{defaultValue:"0px",parser:function(a,b,c,f,g){b=this.format(b);var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],y=a.style;for(p=parseFloat(a.offsetWidth),q=parseFloat(a.offsetHeight),h=b.split(" "),i=0;x.length>i;i++)this.p.indexOf("border")&&(x[i]=T(x[i])),l=k=V(a,x[i],e,!1,"0px"),-1!==l.indexOf(" ")&&(k=l.split(" "),l=k[0],k=k[1]),m=j=h[i],n=parseFloat(l),s=l.substr((n+"").length),t="="===m.charAt(1),t?(o=parseInt(m.charAt(0)+"1",10),m=m.substr(2),o*=parseFloat(m),r=m.substr((o+"").length-(0>o?1:0))||""):(o=parseFloat(m),r=m.substr((o+"").length)),""===r&&(r=d[c]||s),r!==s&&(u=W(a,"borderLeft",n,s),v=W(a,"borderTop",n,s),"%"===r?(l=100*(u/p)+"%",k=100*(v/q)+"%"):"em"===r?(w=W(a,"borderLeft",1,"em"),l=u/w+"em",k=v/w+"em"):(l=u+"px",k=v+"px"),t&&(m=parseFloat(l)+o+r,j=parseFloat(k)+o+r)),g=na(y,x[i],l+" "+k,m+" "+j,!1,"0px",g);return g},prefix:!0,formatter:ja("0px 0px 0px 0px",!1,!0)}),qa("backgroundPosition",{defaultValue:"0 0",parser:function(a,b,c,d,f,g){var h,i,j,k,l,m,n="background-position",p=e||U(a,null),q=this.format((p?o?p.getPropertyValue(n+"-x")+" "+p.getPropertyValue(n+"-y"):p.getPropertyValue(n):a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY)||"0 0"),r=this.format(b);if(-1!==q.indexOf("%")!=(-1!==r.indexOf("%"))&&(m=V(a,"backgroundImage").replace(A,""),m&&"none"!==m)){for(h=q.split(" "),i=r.split(" "),L.setAttribute("src",m),j=2;--j>-1;)q=h[j],k=-1!==q.indexOf("%"),k!==(-1!==i[j].indexOf("%"))&&(l=0===j?a.offsetWidth-L.width:a.offsetHeight-L.height,h[j]=k?parseFloat(q)/100*l+"px":100*(parseFloat(q)/l)+"%");q=h.join(" ")}return this.parseComplex(a.style,q,r,f,g)},formatter:ba}),qa("backgroundSize",{defaultValue:"0 0",formatter:ba}),qa("perspective",{defaultValue:"0px",prefix:!0}),qa("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),qa("transformStyle",{prefix:!0}),qa("backfaceVisibility",{prefix:!0}),qa("userSelect",{prefix:!0}),qa("margin",{parser:ka("marginTop,marginRight,marginBottom,marginLeft")}),qa("padding",{parser:ka("paddingTop,paddingRight,paddingBottom,paddingLeft")}),qa("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(a,b,c,d,f,g){var h,i,j;return 9>o?(i=a.currentStyle,j=8>o?" ":",",h="rect("+i.clipTop+j+i.clipRight+j+i.clipBottom+j+i.clipLeft+")",b=this.format(b).split(",").join(j)):(h=this.format(V(a,this.p,e,!1,this.dflt)),b=this.format(b)),this.parseComplex(a.style,h,b,f,g)}}),qa("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),qa("autoRound,strictUnits",{parser:function(a,b,c,d,e){return e}}),qa("border",{defaultValue:"0px solid #000",parser:function(a,b,c,d,f,g){return this.parseComplex(a.style,this.format(V(a,"borderTopWidth",e,!1,"0px")+" "+V(a,"borderTopStyle",e,!1,"solid")+" "+V(a,"borderTopColor",e,!1,"#000")),this.format(b),f,g)},color:!0,formatter:function(a){var b=a.split(" ");return b[0]+" "+(b[1]||"solid")+" "+(a.match(ia)||["#000"])[0]}}),qa("float,cssFloat,styleFloat",{parser:function(a,b,c,d,e){var f=a.style,g="cssFloat"in f?"cssFloat":"styleFloat";return new ma(f,g,0,0,e,-1,c,!1,0,f[g],b)}});var Ba=function(a){var b,c=this.t,d=c.filter||V(this.data,"filter"),e=0|this.s+this.c*a;100===e&&(-1===d.indexOf("atrix(")&&-1===d.indexOf("radient(")&&-1===d.indexOf("oader(")?(c.removeAttribute("filter"),b=!V(this.data,"filter")):(c.filter=d.replace(w,""),b=!0)),b||(this.xn1&&(c.filter=d=d||"alpha(opacity="+e+")"),-1===d.indexOf("opacity")?0===e&&this.xn1||(c.filter=d+" alpha(opacity="+e+")"):c.filter=d.replace(u,"opacity="+e))};qa("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(a,b,c,d,f,g){var h=parseFloat(V(a,"opacity",e,!1,"1")),i=a.style,j="autoAlpha"===c;return"string"==typeof b&&"="===b.charAt(1)&&(b=("-"===b.charAt(0)?-1:1)*parseFloat(b.substr(2))+h),j&&1===h&&"hidden"===V(a,"visibility",e)&&0!==b&&(h=0),O?f=new ma(i,"opacity",h,b-h,f):(f=new ma(i,"opacity",100*h,100*(b-h),f),f.xn1=j?1:0,i.zoom=1,f.type=2,f.b="alpha(opacity="+f.s+")",f.e="alpha(opacity="+(f.s+f.c)+")",f.data=a,f.plugin=g,f.setRatio=Ba),j&&(f=new ma(i,"visibility",0,0,f,-1,null,!1,0,0!==h?"inherit":"hidden",0===b?"hidden":"inherit"),f.xs0="inherit",d._overwriteProps.push(f.n),d._overwriteProps.push(c)),f}});var Ca=function(a,b){b&&(a.removeProperty?a.removeProperty(b.replace(y,"-$1").toLowerCase()):a.removeAttribute(b))},Da=function(a){if(this.t._gsClassPT=this,1===a||0===a){this.t.className=0===a?this.b:this.e;for(var b=this.data,c=this.t.style;b;)b.v?c[b.p]=b.v:Ca(c,b.p),b=b._next;1===a&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.className!==this.e&&(this.t.className=this.e)};qa("className",{parser:function(a,b,d,f,g,h,i){var j,k,l,m,n,o=a.className,p=a.style.cssText;if(g=f._classNamePT=new ma(a,d,0,0,g,2),g.setRatio=Da,g.pr=-11,c=!0,g.b=o,k=Y(a,e),l=a._gsClassPT){for(m={},n=l.data;n;)m[n.p]=1,n=n._next;l.setRatio(1)}return a._gsClassPT=g,g.e="="!==b.charAt(1)?b:o.replace(RegExp("\\s*\\b"+b.substr(2)+"\\b"),"")+("+"===b.charAt(0)?" "+b.substr(2):""),f._tween._duration&&(a.className=g.e,j=Z(a,k,Y(a),i,m),a.className=o,g.data=j.firstMPT,a.style.cssText=p,g=g.xfirst=f.parse(a,j.difs,g,h)),g}});var Ea=function(a){if((1===a||0===a)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var b,c,d,e,f=this.t.style,g=h.transform.parse;if("all"===this.e)f.cssText="",e=!0;else for(b=this.e.split(","),d=b.length;--d>-1;)c=b[d],h[c]&&(h[c].parse===g?e=!0:c="transformOrigin"===c?va:h[c].p),Ca(f,c);e&&(Ca(f,ta),this.t._gsTransform&&delete this.t._gsTransform)}};for(qa("clearProps",{parser:function(a,b,d,e,f){return f=new ma(a,d,0,0,f,2),f.setRatio=Ea,f.e=b,f.pr=-10,f.data=e._tween,c=!0,f}}),i="bezier,throwProps,physicsProps,physics2D".split(","),oa=i.length;oa--;)ra(i[oa]);i=g.prototype,i._firstPT=null,i._onInitTween=function(a,b,h){if(!a.nodeType)return!1;this._target=a,this._tween=h,this._vars=b,j=b.autoRound,c=!1,d=b.suffixMap||g.suffixMap,e=U(a,""),f=this._overwriteProps;var i,m,o,p,q,r,s,t,u,w=a.style;if(k&&""===w.zIndex&&(i=V(a,"zIndex",e),("auto"===i||""===i)&&(w.zIndex=0)),"string"==typeof b&&(p=w.cssText,i=Y(a,e),w.cssText=p+";"+b,i=Z(a,i,Y(a)).difs,!O&&v.test(b)&&(i.opacity=parseFloat(RegExp.$1)),b=i,w.cssText=p),this._firstPT=m=this.parse(a,b,null),this._transformType){for(u=3===this._transformType,ta?l&&(k=!0,""===w.zIndex&&(s=V(a,"zIndex",e),("auto"===s||""===s)&&(w.zIndex=0)),n&&(w.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(u?"visible":"hidden"))):w.zoom=1,o=m;o&&o._next;)o=o._next;t=new ma(a,"transform",0,0,null,2),this._linkCSSP(t,null,o),t.setRatio=u&&wa?za:ta?Aa:ya,t.data=this._transform||xa(a,e,!0),f.pop()}if(c){for(;m;){for(r=m._next,o=p;o&&o.pr>m.pr;)o=o._next;(m._prev=o?o._prev:q)?m._prev._next=m:p=m,(m._next=o)?o._prev=m:q=m,m=r}this._firstPT=p}return!0},i.parse=function(a,b,c,f){var g,i,k,l,m,n,o,p,q,r,s=a.style;for(g in b)n=b[g],i=h[g],i?c=i.parse(a,n,g,this,c,f,b):(m=V(a,g,e)+"",q="string"==typeof n,"color"===g||"fill"===g||"stroke"===g||-1!==g.indexOf("Color")||q&&x.test(n)?(q||(n=ha(n),n=(n.length>3?"rgba(":"rgb(")+n.join(",")+")"),c=na(s,g,m,n,!0,"transparent",c,0,f)):!q||-1===n.indexOf(" ")&&-1===n.indexOf(",")?(k=parseFloat(m),o=k||0===k?m.substr((k+"").length):"",(""===m||"auto"===m)&&("width"===g||"height"===g?(k=aa(a,g,e),o="px"):"left"===g||"top"===g?(k=X(a,g,e),o="px"):(k="opacity"!==g?0:1,o="")),r=q&&"="===n.charAt(1),r?(l=parseInt(n.charAt(0)+"1",10),n=n.substr(2),l*=parseFloat(n),p=n.replace(t,"")):(l=parseFloat(n),p=q?n.substr((l+"").length)||"":""),""===p&&(p=d[g]||o),n=l||0===l?(r?l+k:l)+p:b[g],o!==p&&""!==p&&(l||0===l)&&(k||0===k)&&(k=W(a,g,k,o),"%"===p?(k/=W(a,g,100,"%")/100,k>100&&(k=100),b.strictUnits!==!0&&(m=k+"%")):"em"===p?k/=W(a,g,1,"em"):(l=W(a,g,l,p),p="px"),r&&(l||0===l)&&(n=l+k+p)),r&&(l+=k),!k&&0!==k||!l&&0!==l?void 0!==s[g]&&(n||"NaN"!=n+""&&null!=n)?(c=new ma(s,g,l||k||0,0,c,-1,g,!1,0,m,n),c.xs0="none"!==n||"display"!==g&&-1===g.indexOf("Style")?n:m):Q("invalid "+g+" tween value: "+b[g]):(c=new ma(s,g,k,l-k,c,0,g,j!==!1&&("px"===p||"zIndex"===g),0,m,n),c.xs0=p)):c=na(s,g,m,n,!0,null,c,0,f)),f&&c&&!c.plugin&&(c.plugin=f);return c},i.setRatio=function(a){var b,c,d,e=this._firstPT,f=1e-6;if(1!==a||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(a||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;e;){if(b=e.c*a+e.s,e.r?b=b>0?0|b+.5:0|b-.5:f>b&&b>-f&&(b=0),e.type)if(1===e.type)if(d=e.l,2===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2;else if(3===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3;else if(4===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4;else if(5===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4+e.xn4+e.xs5;else{for(c=e.xs0+b+e.xs1,d=1;e.l>d;d++)c+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=c}else-1===e.type?e.t[e.p]=e.xs0:e.setRatio&&e.setRatio(a);else e.t[e.p]=b+e.xs0;e=e._next}else for(;e;)2!==e.type?e.t[e.p]=e.b:e.setRatio(a),e=e._next;else for(;e;)2!==e.type?e.t[e.p]=e.e:e.setRatio(a),e=e._next},i._enableTransforms=function(a){this._transformType=a||3===this._transformType?3:2,this._transform=this._transform||xa(this._target,e,!0)},i._linkCSSP=function(a,b,c,d){return a&&(b&&(b._prev=a),a._next&&(a._next._prev=a._prev),a._prev?a._prev._next=a._next:this._firstPT===a&&(this._firstPT=a._next,d=!0),c?c._next=a:d||null!==this._firstPT||(this._firstPT=a),a._next=b,a._prev=c),a},i._kill=function(b){var c,d,e,f=b;if(b.autoAlpha||b.alpha){f={};for(d in b)f[d]=b[d];f.opacity=1,f.autoAlpha&&(f.visibility=1)}return b.className&&(c=this._classNamePT)&&(e=c.xfirst,e&&e._prev?this._linkCSSP(e._prev,c._next,e._prev._prev):e===this._firstPT&&(this._firstPT=c._next),c._next&&this._linkCSSP(c._next,c._next._next,e._prev),this._classNamePT=null),a.prototype._kill.call(this,f)};var Fa=function(a,b,c){var d,e,f,g;if(a.slice)for(e=a.length;--e>-1;)Fa(a[e],b,c);else for(d=a.childNodes,e=d.length;--e>-1;)f=d[e],g=f.type,f.style&&(b.push(Y(f)),c&&c.push(f)),1!==g&&9!==g&&11!==g||!f.childNodes.length||Fa(f,b,c)};return g.cascadeTo=function(a,c,d){var e,f,g,h=b.to(a,c,d),i=[h],j=[],k=[],l=[],m=b._internals.reservedProps;for(a=h._targets||h.target,Fa(a,j,l),h.render(c,!0),Fa(a,k),h.render(0,!0),h._enabled(!0),e=l.length;--e>-1;)if(f=Z(l[e],j[e],k[e]),f.firstMPT){f=f.difs;for(g in d)m[g]&&(f[g]=d[g]);i.push(b.to(l[e],c,f))}return i},a.activate([g]),g},!0),function(){var a=window._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(a,b,c){return this._tween=c,!0}}),b=a.prototype;b._onInitAllProps=function(){for(var a,b,c,d=this._tween,e=d.vars.roundProps instanceof Array?d.vars.roundProps:d.vars.roundProps.split(","),f=e.length,g={},h=d._propLookup.roundProps;--f>-1;)g[e[f]]=1;for(f=e.length;--f>-1;)for(a=e[f],b=d._firstPT;b;)c=b._next,b.pg?b.t._roundProps(g,!0):b.n===a&&(this._add(b.t,a,b.s,b.c),c&&(c._prev=b._prev),b._prev?b._prev._next=c:d._firstPT===b&&(d._firstPT=c),b._next=b._prev=null,d._propLookup[a]=h),b=c;return!1},b._add=function(a,b,c,d){this._addTween(a,b,c,c+d,b,!0),this._overwriteProps.push(b)}}(),window._gsDefine.plugin({propName:"attr",API:2,init:function(a,b){var c;if("function"!=typeof a.setAttribute)return!1;this._target=a,this._proxy={};for(c in b)this._addTween(this._proxy,c,parseFloat(a.getAttribute(c)),b[c],c)&&this._overwriteProps.push(c);return!0},set:function(a){this._super.setRatio.call(this,a);for(var b,c=this._overwriteProps,d=c.length;--d>-1;)b=c[d],this._target.setAttribute(b,this._proxy[b]+"")}}),window._gsDefine.plugin({propName:"directionalRotation",API:2,init:function(a,b){"object"!=typeof b&&(b={rotation:b}),this.finals={};var c,d,e,f,g,h,i=b.useRadians===!0?2*Math.PI:360,j=1e-6;for(c in b)"useRadians"!==c&&(h=(b[c]+"").split("_"),d=h[0],e=parseFloat("function"!=typeof a[c]?a[c]:a[c.indexOf("set")||"function"!=typeof a["get"+c.substr(3)]?c:"get"+c.substr(3)]()),f=this.finals[c]="string"==typeof d&&"="===d.charAt(1)?e+parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)):Number(d)||0,g=f-e,h.length&&(d=h.join("_"),-1!==d.indexOf("short")&&(g%=i,g!==g%(i/2)&&(g=0>g?g+i:g-i)),-1!==d.indexOf("_cw")&&0>g?g=(g+9999999999*i)%i-(0|g/i)*i:-1!==d.indexOf("ccw")&&g>0&&(g=(g-9999999999*i)%i-(0|g/i)*i)),(g>j||-j>g)&&(this._addTween(a,c,e,e+g,c),this._overwriteProps.push(c)));return!0},set:function(a){var b;if(1!==a)this._super.setRatio.call(this,a);else for(b=this._firstPT;b;)b.f?b.t[b.p](this.finals[b.p]):b.t[b.p]=this.finals[b.p],b=b._next}})._autoCSS=!0,window._gsDefine("easing.Back",["easing.Ease"],function(a){var b,c,d,e=window.GreenSockGlobals||window,f=e.com.greensock,g=2*Math.PI,h=Math.PI/2,i=f._class,j=function(b,c){var d=i("easing."+b,function(){},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,d},k=a.register||function(){},l=function(a,b,c,d){var e=i("easing."+a,{easeOut:new b,easeIn:new c,easeInOut:new d},!0);return k(e,a),e},m=function(a,b,c){this.t=a,this.v=b,c&&(this.next=c,c.prev=this,this.c=c.v-b,this.gap=c.t-a)},n=function(b,c){var d=i("easing."+b,function(a){this._p1=a||0===a?a:1.70158,this._p2=1.525*this._p1},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,e.config=function(a){return new d(a)},d},o=l("Back",n("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+1}),n("BackIn",function(a){return a*a*((this._p1+1)*a-this._p1)}),n("BackInOut",function(a){return 1>(a*=2)?.5*a*a*((this._p2+1)*a-this._p2):.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),p=i("easing.SlowMo",function(a,b,c){b=b||0===b?b:.7,null==a?a=.7:a>1&&(a=1),this._p=1!==a?b:0,this._p1=(1-a)/2,this._p2=a,this._p3=this._p1+this._p2,this._calcEnd=c===!0},!0),q=p.prototype=new a;return q.constructor=p,q.getRatio=function(a){var b=a+(.5-a)*this._p;return this._p1>a?this._calcEnd?1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},p.ease=new p(.7,.7),q.config=p.config=function(a,b,c){return new p(a,b,c)},b=i("easing.SteppedEase",function(a){a=a||1,this._p1=1/a,this._p2=a+1},!0),q=b.prototype=new a,q.constructor=b,q.getRatio=function(a){return 0>a?a=0:a>=1&&(a=.999999999),(this._p2*a>>0)*this._p1},q.config=b.config=function(a){return new b(a)},c=i("easing.RoughEase",function(b){b=b||{};for(var c,d,e,f,g,h,i=b.taper||"none",j=[],k=0,l=0|(b.points||20),n=l,o=b.randomize!==!1,p=b.clamp===!0,q=b.template instanceof a?b.template:null,r="number"==typeof b.strength?.4*b.strength:.4;--n>-1;)c=o?Math.random():1/l*n,d=q?q.getRatio(c):c,"none"===i?e=r:"out"===i?(f=1-c,e=f*f*r):"in"===i?e=c*c*r:.5>c?(f=2*c,e=.5*f*f*r):(f=2*(1-c),e=.5*f*f*r),o?d+=Math.random()*e-.5*e:n%2?d+=.5*e:d-=.5*e,p&&(d>1?d=1:0>d&&(d=0)),j[k++]={x:c,y:d};for(j.sort(function(a,b){return a.x-b.x}),h=new m(1,1,null),n=l;--n>-1;)g=j[n],h=new m(g.x,g.y,h);this._prev=new m(0,0,0!==h.t?h:h.next)},!0),q=c.prototype=new a,q.constructor=c,q.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&b.t>=a;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},q.config=function(a){return new c(a)},c.ease=new c,l("Bounce",j("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),j("BounceIn",function(a){return 1/2.75>(a=1-a)?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+.9375):1-(7.5625*(a-=2.625/2.75)*a+.984375)}),j("BounceInOut",function(a){var b=.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,b?.5*(1-a):.5*a+.5})),l("Circ",j("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),j("CircIn",function(a){return-(Math.sqrt(1-a*a)-1)}),j("CircInOut",function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)})),d=function(b,c,d){var e=i("easing."+b,function(a,b){this._p1=a||1,this._p2=b||d,this._p3=this._p2/g*(Math.asin(1/this._p1)||0)},!0),f=e.prototype=new a;return f.constructor=e,f.getRatio=c,f.config=function(a,b){return new e(a,b)},e},l("Elastic",d("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*g/this._p2)+1},.3),d("ElasticIn",function(a){return-(this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2))},.3),d("ElasticInOut",function(a){return 1>(a*=2)?-.5*this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2):.5*this._p1*Math.pow(2,-10*(a-=1))*Math.sin((a-this._p3)*g/this._p2)+1},.45)),l("Expo",j("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),j("ExpoIn",function(a){return Math.pow(2,10*(a-1))-.001}),j("ExpoInOut",function(a){return 1>(a*=2)?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*(a-1)))})),l("Sine",j("SineOut",function(a){return Math.sin(a*h)}),j("SineIn",function(a){return-Math.cos(a*h)+1}),j("SineInOut",function(a){return-.5*(Math.cos(Math.PI*a)-1)})),i("easing.EaseLookup",{find:function(b){return a.map[b]}},!0),k(e.SlowMo,"SlowMo","ease,"),k(c,"RoughEase","ease,"),k(b,"SteppedEase","ease,"),o},!0)}),function(a){"use strict";var b=a.GreenSockGlobals||a;if(!b.TweenLite){var c,d,e,f,g,h=function(a){var c,d=a.split("."),e=b;for(c=0;d.length>c;c++)e[d[c]]=e=e[d[c]]||{};return e},i=h("com.greensock"),j=1e-10,k=[].slice,l=function(){},m=function(){var a=Object.prototype.toString,b=a.call([]);return function(c){return c instanceof Array||"object"==typeof c&&!!c.push&&a.call(c)===b}}(),n={},o=function(c,d,e,f){this.sc=n[c]?n[c].sc:[],n[c]=this,this.gsClass=null,this.func=e;var g=[];this.check=function(i){for(var j,k,l,m,p=d.length,q=p;--p>-1;)(j=n[d[p]]||new o(d[p],[])).gsClass?(g[p]=j.gsClass,q--):i&&j.sc.push(this);if(0===q&&e)for(k=("com.greensock."+c).split("."),l=k.pop(),m=h(k.join("."))[l]=this.gsClass=e.apply(e,g),f&&(b[l]=m,"function"==typeof define&&define.amd?define((a.GreenSockAMDPath?a.GreenSockAMDPath+"/":"")+c.split(".").join("/"),[],function(){return m}):"undefined"!=typeof module&&module.exports&&(module.exports=m)),p=0;this.sc.length>p;p++)this.sc[p].check()},this.check(!0)},p=a._gsDefine=function(a,b,c,d){return new o(a,b,c,d)},q=i._class=function(a,b,c){return b=b||function(){},p(a,[],function(){return b},c),b};p.globals=b;var r=[0,0,1,1],s=[],t=q("easing.Ease",function(a,b,c,d){this._func=a,this._type=c||0,this._power=d||0,this._params=b?r.concat(b):r},!0),u=t.map={},v=t.register=function(a,b,c,d){for(var e,f,g,h,j=b.split(","),k=j.length,l=(c||"easeIn,easeOut,easeInOut").split(",");--k>-1;)for(f=j[k],e=d?q("easing."+f,null,!0):i.easing[f]||{},g=l.length;--g>-1;)h=l[g],u[f+"."+h]=u[h+f]=e[h]=a.getRatio?a:a[h]||new a};for(e=t.prototype,e._calcEnd=!1,e.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,c=this._power,d=1===b?1-a:2===b?a:.5>a?2*a:2*(1-a);return 1===c?d*=d:2===c?d*=d*d:3===c?d*=d*d*d:4===c&&(d*=d*d*d*d),1===b?1-d:2===b?d:.5>a?d/2:1-d/2},c=["Linear","Quad","Cubic","Quart","Quint,Strong"],d=c.length;--d>-1;)e=c[d]+",Power"+d,v(new t(null,null,1,d),e,"easeOut",!0),v(new t(null,null,2,d),e,"easeIn"+(0===d?",easeNone":"")),v(new t(null,null,3,d),e,"easeInOut");u.linear=i.easing.Linear.easeIn,u.swing=i.easing.Quad.easeInOut;var w=q("events.EventDispatcher",function(a){this._listeners={},this._eventTarget=a||this});e=w.prototype,e.addEventListener=function(a,b,c,d,e){e=e||0;var h,i,j=this._listeners[a],k=0;for(null==j&&(this._listeners[a]=j=[]),i=j.length;--i>-1;)h=j[i],h.c===b&&h.s===c?j.splice(i,1):0===k&&e>h.pr&&(k=i+1);j.splice(k,0,{c:b,s:c,up:d,pr:e}),this!==f||g||f.wake()},e.removeEventListener=function(a,b){var c,d=this._listeners[a];if(d)for(c=d.length;--c>-1;)if(d[c].c===b)return void d.splice(c,1)},e.dispatchEvent=function(a){var b,c,d,e=this._listeners[a];if(e)for(b=e.length,c=this._eventTarget;--b>-1;)d=e[b],d.up?d.c.call(d.s||c,{type:a,target:c}):d.c.call(d.s||c)};var x=a.requestAnimationFrame,y=a.cancelAnimationFrame,z=Date.now||function(){return(new Date).getTime()},A=z();for(c=["ms","moz","webkit","o"],d=c.length;--d>-1&&!x;)x=a[c[d]+"RequestAnimationFrame"],y=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];q("Ticker",function(a,b){var c,d,e,h,i,j=this,k=z(),m=b!==!1&&x,n=function(a){A=z(),j.time=(A-k)/1e3;var b,f=j.time-i;(!c||f>0||a===!0)&&(j.frame++,i+=f+(f>=h?.004:h-f),b=!0),a!==!0&&(e=d(n)),b&&j.dispatchEvent("tick")};w.call(j),j.time=j.frame=0,j.tick=function(){n(!0)},j.sleep=function(){null!=e&&(m&&y?y(e):clearTimeout(e),d=l,e=null,j===f&&(g=!1))},j.wake=function(){null!==e&&j.sleep(),d=0===c?l:m&&x?x:function(a){return setTimeout(a,0|1e3*(i-j.time)+1)},j===f&&(g=!0),n(2)},j.fps=function(a){return arguments.length?(c=a,h=1/(c||60),i=this.time+h,void j.wake()):c},j.useRAF=function(a){return arguments.length?(j.sleep(),m=a,void j.fps(c)):m},j.fps(a),setTimeout(function(){m&&(!e||5>j.frame)&&j.useRAF(!1)},1500)}),e=i.Ticker.prototype=new i.events.EventDispatcher,e.constructor=i.Ticker;var B=q("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=b.immediateRender===!0,this.data=b.data,this._reversed=b.reversed===!0,O){g||f.wake();var c=this.vars.useFrames?N:O;c.add(this,c._time),this.vars.paused&&this.paused(!0)}});f=B.ticker=new i.Ticker,e=B.prototype,e._dirty=e._gc=e._initted=e._paused=!1,e._totalTime=e._time=0,e._rawPrevTime=-1,e._next=e._last=e._onUpdate=e._timeline=e.timeline=null,e._paused=!1;var C=function(){g&&z()-A>2e3&&f.wake(),setTimeout(C,2e3)};C(),e.play=function(a,b){return arguments.length&&this.seek(a,b),this.reversed(!1).paused(!1)},e.pause=function(a,b){return arguments.length&&this.seek(a,b),this.paused(!0)},e.resume=function(a,b){return arguments.length&&this.seek(a,b),this.paused(!1)},e.seek=function(a,b){return this.totalTime(Number(a),b!==!1)},e.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:0,b!==!1,!0)},e.reverse=function(a,b){return arguments.length&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)},e.render=function(){},e.invalidate=function(){return this},e.isActive=function(){var a,b=this._timeline,c=this._startTime;return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime())>=c&&c+this.totalDuration()/this._timeScale>a},e._enabled=function(a,b){return g||f.wake(),this._gc=!a,this._active=this.isActive(),b!==!0&&(a&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1},e._kill=function(){return this._enabled(!1,!1)},e.kill=function(a,b){return this._kill(a,b),this},e._uncache=function(a){for(var b=a?this:this.timeline;b;)b._dirty=!0,b=b.timeline;return this},e._swapSelfInParams=function(a){for(var b=a.length,c=a.concat();--b>-1;)"{self}"===a[b]&&(c[b]=this);return c},e.eventCallback=function(a,b,c,d){if("on"===(a||"").substr(0,2)){var e=this.vars;if(1===arguments.length)return e[a];null==b?delete e[a]:(e[a]=b,e[a+"Params"]=m(c)&&-1!==c.join("").indexOf("{self}")?this._swapSelfInParams(c):c,e[a+"Scope"]=d),"onUpdate"===a&&(this._onUpdate=b)}return this},e.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay},e.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==a&&this.totalTime(this._totalTime*(a/this._duration),!0),this):(this._dirty=!1,this._duration)},e.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration},e.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time},e.totalTime=function(a,b,c){if(g||f.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>a&&!c&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var d=this._totalDuration,e=this._timeline;if(a>d&&!c&&(a=d),this._startTime=(this._paused?this._pauseTime:e._time)-(this._reversed?d-a:a)/this._timeScale,e._dirty||this._uncache(!1),e._timeline)for(;e._timeline;)e._timeline._time!==(e._startTime+e._totalTime)/e._timeScale&&e.totalTime(e._totalTime,!0),e=e._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==a||0===this._duration)&&this.render(a,b,!1)}return this},e.progress=e.totalProgress=function(a,b){return arguments.length?this.totalTime(this.duration()*a,b):this._time/this.duration()},e.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime},e.timeScale=function(a){if(!arguments.length)return this._timeScale;if(a=a||j,this._timeline&&this._timeline.smoothChildTiming){var b=this._pauseTime,c=b||0===b?b:this._timeline.totalTime();this._startTime=c-(c-this._startTime)*this._timeScale/a}return this._timeScale=a,this._uncache(!1)},e.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._totalTime,!0)),this):this._reversed},e.paused=function(a){if(!arguments.length)return this._paused;if(a!=this._paused&&this._timeline){g||a||f.wake();var b=this._timeline,c=b.rawTime(),d=c-this._pauseTime;!a&&b.smoothChildTiming&&(this._startTime+=d,this._uncache(!1)),this._pauseTime=a?c:null,this._paused=a,this._active=this.isActive(),!a&&0!==d&&this._initted&&this.duration()&&this.render(b.smoothChildTiming?this._totalTime:(c-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!a&&this._enabled(!0,!1),this};var D=q("core.SimpleTimeline",function(a){B.call(this,0,a),this.autoRemoveChildren=this.smoothChildTiming=!0});e=D.prototype=new B,e.constructor=D,e.kill()._gc=!1,e._first=e._last=null,e._sortChildren=!1,e.add=e.insert=function(a,b){var c,d;if(a._startTime=Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),c=this._last,this._sortChildren)for(d=a._startTime;c&&c._startTime>d;)c=c._prev;return c?(a._next=c._next,c._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=c,this._timeline&&this._uncache(!0),this},e._remove=function(a,b){return a.timeline===this&&(b||a._enabled(!1,!0),a.timeline=null,a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),this._timeline&&this._uncache(!0)),this},e.render=function(a,b,c){var d,e=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;e;)d=e._next,(e._active||a>=e._startTime&&!e._paused)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,c):e.render((a-e._startTime)*e._timeScale,b,c)),e=d},e.rawTime=function(){return g||f.wake(),this._totalTime};var E=q("TweenLite",function(b,c,d){if(B.call(this,c,d),this.render=E.prototype.render,null==b)throw"Cannot tween a null target.";this.target=b="string"!=typeof b?b:E.selector(b)||b;var e,f,g,h=b.jquery||b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType),i=this.vars.overwrite;if(this._overwrite=i=null==i?M[E.defaultOverwrite]:"number"==typeof i?i>>0:M[i],(h||b instanceof Array||b.push&&m(b))&&"number"!=typeof b[0])for(this._targets=g=k.call(b,0),this._propLookup=[],this._siblings=[],e=0;g.length>e;e++)f=g[e],f?"string"!=typeof f?f.length&&f!==a&&f[0]&&(f[0]===a||f[0].nodeType&&f[0].style&&!f.nodeType)?(g.splice(e--,1),this._targets=g=g.concat(k.call(f,0))):(this._siblings[e]=P(f,this,!1),1===i&&this._siblings[e].length>1&&Q(f,this,null,1,this._siblings[e])):(f=g[e--]=E.selector(f),"string"==typeof f&&g.splice(e+1,1)):g.splice(e--,1);else this._propLookup={},this._siblings=P(b,this,!1),1===i&&this._siblings.length>1&&Q(b,this,null,1,this._siblings);(this.vars.immediateRender||0===c&&0===this._delay&&this.vars.immediateRender!==!1)&&this.render(-this._delay,!1,!0)},!0),F=function(b){return b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType)},G=function(a,b){var c,d={};for(c in a)L[c]||c in b&&"x"!==c&&"y"!==c&&"width"!==c&&"height"!==c&&"className"!==c&&"border"!==c||!(!I[c]||I[c]&&I[c]._autoCSS)||(d[c]=a[c],delete a[c]);a.css=d};e=E.prototype=new B,e.constructor=E,e.kill()._gc=!1,e.ratio=0,e._firstPT=e._targets=e._overwrittenProps=e._startAt=null,e._notifyPluginsOfEnabled=!1,E.version="1.11.2",E.defaultEase=e._ease=new t(null,null,1,1),E.defaultOverwrite="auto",E.ticker=f,E.autoSleep=!0,E.selector=a.$||a.jQuery||function(b){return a.$?(E.selector=a.$,a.$(b)):a.document?a.document.getElementById("#"===b.charAt(0)?b.substr(1):b):b};var H=E._internals={isArray:m,isSelector:F},I=E._plugins={},J=E._tweenLookup={},K=0,L=H.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1},M={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},N=B._rootFramesTimeline=new D,O=B._rootTimeline=new D;O._startTime=f.time,N._startTime=f.frame,O._active=N._active=!0,B._updateRoot=function(){if(O.render((f.time-O._startTime)*O._timeScale,!1,!1),N.render((f.frame-N._startTime)*N._timeScale,!1,!1),!(f.frame%120)){var a,b,c;for(c in J){for(b=J[c].tweens,a=b.length;--a>-1;)b[a]._gc&&b.splice(a,1);0===b.length&&delete J[c]}if(c=O._first,(!c||c._paused)&&E.autoSleep&&!N._first&&1===f._listeners.tick.length){for(;c&&c._paused;)c=c._next;c||f.sleep()}}},f.addEventListener("tick",B._updateRoot);var P=function(a,b,c){var d,e,f=a._gsTweenID;if(J[f||(a._gsTweenID=f="t"+K++)]||(J[f]={target:a,tweens:[]}),b&&(d=J[f].tweens,d[e=d.length]=b,c))for(;--e>-1;)d[e]===b&&d.splice(e,1);return J[f].tweens},Q=function(a,b,c,d,e){var f,g,h,i;if(1===d||d>=4){for(i=e.length,f=0;i>f;f++)if((h=e[f])!==b)h._gc||h._enabled(!1,!1)&&(g=!0);else if(5===d)break;return g}var k,l=b._startTime+j,m=[],n=0,o=0===b._duration;for(f=e.length;--f>-1;)(h=e[f])===b||h._gc||h._paused||(h._timeline!==b._timeline?(k=k||R(b,0,o),0===R(h,k,o)&&(m[n++]=h)):l>=h._startTime&&h._startTime+h.totalDuration()/h._timeScale+j>l&&((o||!h._initted)&&2e-10>=l-h._startTime||(m[n++]=h)));for(f=n;--f>-1;)h=m[f],2===d&&h._kill(c,a)&&(g=!0),(2!==d||!h._firstPT&&h._initted)&&h._enabled(!1,!1)&&(g=!0);return g},R=function(a,b,c){for(var d=a._timeline,e=d._timeScale,f=a._startTime;d._timeline;){if(f+=d._startTime,e*=d._timeScale,d._paused)return-100;d=d._timeline}return f/=e,f>b?f-b:c&&f===b||!a._initted&&2*j>f-b?j:(f+=a.totalDuration()/a._timeScale/e)>b+j?0:f-b-j};e._init=function(){var a,b,c,d,e=this.vars,f=this._overwrittenProps,g=this._duration,h=e.immediateRender,i=e.ease;if(e.startAt){if(this._startAt&&this._startAt.render(-1,!0),e.startAt.overwrite=0,e.startAt.immediateRender=!0,this._startAt=E.to(this.target,0,e.startAt),h)if(this._time>0)this._startAt=null;else if(0!==g)return}else if(e.runBackwards&&0!==g)if(this._startAt)this._startAt.render(-1,!0),
this._startAt=null;else{c={};for(d in e)L[d]&&"autoCSS"!==d||(c[d]=e[d]);if(c.overwrite=0,c.data="isFromStart",this._startAt=E.to(this.target,0,c),e.immediateRender){if(0===this._time)return}else this._startAt.render(-1,!0)}if(this._ease=i?i instanceof t?e.easeParams instanceof Array?i.config.apply(i,e.easeParams):i:"function"==typeof i?new t(i,e.easeParams):u[i]||E.defaultEase:E.defaultEase,this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length;--a>-1;)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],f?f[a]:null)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,f);if(b&&E._onPluginEvent("_onInitAllProps",this),f&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),e.runBackwards)for(c=this._firstPT;c;)c.s+=c.c,c.c=-c.c,c=c._next;this._onUpdate=e.onUpdate,this._initted=!0},e._initProps=function(b,c,d,e){var f,g,h,i,j,k;if(null==b)return!1;this.vars.css||b.style&&b!==a&&b.nodeType&&I.css&&this.vars.autoCSS!==!1&&G(this.vars,b);for(f in this.vars){if(k=this.vars[f],L[f])k&&(k instanceof Array||k.push&&m(k))&&-1!==k.join("").indexOf("{self}")&&(this.vars[f]=k=this._swapSelfInParams(k,this));else if(I[f]&&(i=new I[f])._onInitTween(b,this.vars[f],this)){for(this._firstPT=j={_next:this._firstPT,t:i,p:"setRatio",s:0,c:1,f:!0,n:f,pg:!0,pr:i._priority},g=i._overwriteProps.length;--g>-1;)c[i._overwriteProps[g]]=this._firstPT;(i._priority||i._onInitAllProps)&&(h=!0),(i._onDisable||i._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=c[f]=j={_next:this._firstPT,t:b,p:f,f:"function"==typeof b[f],n:f,pg:!1,pr:0},j.s=j.f?b[f.indexOf("set")||"function"!=typeof b["get"+f.substr(3)]?f:"get"+f.substr(3)]():parseFloat(b[f]),j.c="string"==typeof k&&"="===k.charAt(1)?parseInt(k.charAt(0)+"1",10)*Number(k.substr(2)):Number(k)-j.s||0;j&&j._next&&(j._next._prev=j)}return e&&this._kill(e,b)?this._initProps(b,c,d,e):this._overwrite>1&&this._firstPT&&d.length>1&&Q(b,this,c,this._overwrite,d)?(this._kill(c,b),this._initProps(b,c,d,e)):h},e.render=function(a,b,c){var d,e,f,g,h=this._time,i=this._duration;if(a>=i)this._totalTime=this._time=i,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(d=!0,e="onComplete"),0===i&&(g=this._rawPrevTime,(0===a||0>g||g===j)&&g!==a&&(c=!0,g>j&&(e="onReverseComplete")),this._rawPrevTime=g=!b||a?a:j);else if(1e-7>a)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==h||0===i&&this._rawPrevTime>j)&&(e="onReverseComplete",d=this._reversed),0>a?(this._active=!1,0===i&&(this._rawPrevTime>=0&&(c=!0),this._rawPrevTime=g=!b||a?a:j)):this._initted||(c=!0);else if(this._totalTime=this._time=a,this._easeType){var k=a/i,l=this._easeType,m=this._easePower;(1===l||3===l&&k>=.5)&&(k=1-k),3===l&&(k*=2),1===m?k*=k:2===m?k*=k*k:3===m?k*=k*k*k:4===m&&(k*=k*k*k*k),this.ratio=1===l?1-k:2===l?k:.5>a/i?k/2:1-k/2}else this.ratio=this._ease.getRatio(a/i);if(this._time!==h||c){if(!this._initted){if(this._init(),!this._initted||this._gc)return;this._time&&!d?this.ratio=this._ease.getRatio(this._time/i):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==h&&a>=0&&(this._active=!0),0===h&&(this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0!==this._time||0===i)&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||s))),f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,c),b||c&&0===this._time&&0===h||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s)),e&&(this._gc||(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||s),0===i&&this._rawPrevTime===j&&g!==j&&(this._rawPrevTime=0)))}},e._kill=function(a,b){if("all"===a&&(a=null),null==a&&(null==b||b===this.target))return this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:E.selector(b)||b;var c,d,e,f,g,h,i,j;if((m(b)||F(b))&&"number"!=typeof b[0])for(c=b.length;--c>-1;)this._kill(a,b[c])&&(h=!0);else{if(this._targets){for(c=this._targets.length;--c>-1;)if(b===this._targets[c]){g=this._propLookup[c]||{},this._overwrittenProps=this._overwrittenProps||[],d=this._overwrittenProps[c]=a?this._overwrittenProps[c]||{}:"all";break}}else{if(b!==this.target)return!1;g=this._propLookup,d=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(g){i=a||g,j=a!==d&&"all"!==d&&a!==g&&("object"!=typeof a||!a._tempKill);for(e in i)(f=g[e])&&(f.pg&&f.t._kill(i)&&(h=!0),f.pg&&0!==f.t._overwriteProps.length||(f._prev?f._prev._next=f._next:f===this._firstPT&&(this._firstPT=f._next),f._next&&(f._next._prev=f._prev),f._next=f._prev=null),delete g[e]),j&&(d[e]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},e.invalidate=function(){return this._notifyPluginsOfEnabled&&E._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=!1,this._propLookup=this._targets?{}:[],this},e._enabled=function(a,b){if(g||f.wake(),a&&this._gc){var c,d=this._targets;if(d)for(c=d.length;--c>-1;)this._siblings[c]=P(d[c],this,!0);else this._siblings=P(this.target,this,!0)}return B.prototype._enabled.call(this,a,b),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&E._onPluginEvent(a?"_onEnable":"_onDisable",this)},E.to=function(a,b,c){return new E(a,b,c)},E.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new E(a,b,c)},E.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new E(a,b,d)},E.delayedCall=function(a,b,c,d,e){return new E(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,useFrames:e,overwrite:0})},E.set=function(a,b){return new E(a,0,b)},E.getTweensOf=function(a,b){if(null==a)return[];a="string"!=typeof a?a:E.selector(a)||a;var c,d,e,f;if((m(a)||F(a))&&"number"!=typeof a[0]){for(c=a.length,d=[];--c>-1;)d=d.concat(E.getTweensOf(a[c],b));for(c=d.length;--c>-1;)for(f=d[c],e=c;--e>-1;)f===d[e]&&d.splice(c,1)}else for(d=P(a).concat(),c=d.length;--c>-1;)(d[c]._gc||b&&!d[c].isActive())&&d.splice(c,1);return d},E.killTweensOf=E.killDelayedCallsTo=function(a,b,c){"object"==typeof b&&(c=b,b=!1);for(var d=E.getTweensOf(a,b),e=d.length;--e>-1;)d[e]._kill(c,a)};var S=q("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(","),this._propName=this._overwriteProps[0],this._priority=b||0,this._super=S.prototype},!0);if(e=S.prototype,S.version="1.10.1",S.API=2,e._firstPT=null,e._addTween=function(a,b,c,d,e,f){var g,h;return null!=d&&(g="number"==typeof d||"="!==d.charAt(1)?Number(d)-c:parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)))?(this._firstPT=h={_next:this._firstPT,t:a,p:b,s:c,c:g,f:"function"==typeof a[b],n:e||b,r:f},h._next&&(h._next._prev=h),h):void 0},e.setRatio=function(a){for(var b,c=this._firstPT,d=1e-6;c;)b=c.c*a+c.s,c.r?b=0|b+(b>0?.5:-.5):d>b&&b>-d&&(b=0),c.f?c.t[c.p](b):c.t[c.p]=b,c=c._next},e._kill=function(a){var b,c=this._overwriteProps,d=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=c.length;--b>-1;)null!=a[c[b]]&&c.splice(b,1);for(;d;)null!=a[d.n]&&(d._next&&(d._next._prev=d._prev),d._prev?(d._prev._next=d._next,d._prev=null):this._firstPT===d&&(this._firstPT=d._next)),d=d._next;return!1},e._roundProps=function(a,b){for(var c=this._firstPT;c;)(a[this._propName]||null!=c.n&&a[c.n.split(this._propName+"_").join("")])&&(c.r=b),c=c._next},E._onPluginEvent=function(a,b){var c,d,e,f,g,h=b._firstPT;if("_onInitAllProps"===a){for(;h;){for(g=h._next,d=e;d&&d.pr>h.pr;)d=d._next;(h._prev=d?d._prev:f)?h._prev._next=h:e=h,(h._next=d)?d._prev=h:f=h,h=g}h=b._firstPT=e}for(;h;)h.pg&&"function"==typeof h.t[a]&&h.t[a]()&&(c=!0),h=h._next;return c},S.activate=function(a){for(var b=a.length;--b>-1;)a[b].API===S.API&&(I[(new a[b])._propName]=a[b]);return!0},p.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,c=a.propName,d=a.priority||0,e=a.overwriteProps,f={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},g=q("plugins."+c.charAt(0).toUpperCase()+c.substr(1)+"Plugin",function(){S.call(this,c,d),this._overwriteProps=e||[]},a.global===!0),h=g.prototype=new S(c);h.constructor=g,g.API=a.API;for(b in f)"function"==typeof a[b]&&(h[f[b]]=a[b]);return g.version=a.version,S.activate([g]),g},c=a._gsQueue){for(d=0;c.length>d;d++)c[d]();for(e in n)n[e].func||a.console.log("GSAP encountered missing dependency: com.greensock."+e)}g=!1}}(window);var AnimatedObjectStyles={SLIDE:"slide",SCROLL:"scroll",FADE:"fade",SCALE:"scale"},TextBalloon=function(a){var b,c,d,e,f,g=a,h=function(a){a.stopPropagation()},i=function(a){return b=a,d=new TransparentOverlay,d.init(g.container),o},j=function(a){c=a,e=(new AbsoluteView).init(c),e.neverLeaveTheScreen(),d.setOnClick(function(){}),c.scanDirectives(),$(c).css("display","none")},k=function(){0===c.parent().length&&b.append(c),c.css("max-height",.8*Magazine.pages.height+"px"),c.on("scroll mousewheel",h),d.show(),e.setPosition(f),c.startAnimation(Animation.bunnyScaleUpIn)},l=function(){c.startAnimation(Animation.scaleDownOut),d.hide(),c.off("scroll mousewheel",h)},m=function(a){f=a},n=function(){c=null,e=null},o={init:i,setView:j,show:k,hide:l,setPosition:m,destroy:n,getElement:function(){return c}};return o},GoogleMaps=function(a){"use strict";var b,c,d,e,f="im-gmap-"+GoogleMaps.ID++,g={},h="AIzaSyDbFJElkIapirXlMRtcDu1vOYfqhUFlaK4",i=function(c){return g=c,void 0===GoogleMaps.events&&(GoogleMaps.events=new IMEvents),l(g),void 0===b?void console.error("Append the view before initiate the map. Please use getView first"):(a=GoogleMaps.apikey||a,GoogleMaps.apikey=a,GoogleMaps.isLoaded?j():GoogleMaps.isLoading?GoogleMaps.events.addEventListener("ready",j):(a=h,imIncludeJs("https://maps.googleapis.com/maps/api/js?key="+a,function(){j(),GoogleMaps.events.trigger("ready")})),void(GoogleMaps.isLoading=!0))},j=function(){GoogleMaps.isLoaded=!0;var a={center:g.coordinates,zoom:Math.round(g.zoom),scrollwheel:!1,zoomControl:!0,gestureHandling:"cooperative",zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER}};v.map=new google.maps.Map(document.getElementById(f),a)},k=function(){null!==c.getAnimation()?c.setAnimation(null):c.setAnimation(google.maps.Animation.BOUNCE)},l=function(a){void 0!==a.height&&r(a.height),void 0!==a.coordinates&&o(a.coordinates),void 0!==a.zoom&&q(a.zoom)},m=function(a){if(GoogleMaps.isLoading&&!GoogleMaps.isLoaded)return void GoogleMaps.events.addEventListener("ready",function(){v.addMarker(a)});var b=new ActionModel(a.action);switch(d=null==a.image?{url:""}:{url:a.image.uri},a.animation){case"1":e={animation:google.maps.Animation.BOUNCE};break;case"2":e={animation:google.maps.Animation.DROP};break;default:e={animation:null}}var f={position:a.coordinates,map:v.map,title:"my place",icon:d.url?Config.magazine_url+d.url:"",animation:e.animation};c=new google.maps.Marker(f),c.addListener("click",function(){"1"===a.animation&&k(),b.go()})},n=function(a){},o=function(a){void 0!==a&&(g.coordinates={lat:a.lat,lng:a.lng},v.map&&v.map.setCenter(g.coordinates))},p=function(a){g.coordinates&&o(g.coordinates)},q=function(a){g.zoom=Math.round(a),void 0!==v.map&&v.map.setZoom(g.zoom)},r=function(a){$("#"+f).addClass("map-height-"+a),g.height=a},s=function(){google.maps.event.trigger(v.map,"resize"),p()},t=function(){return void 0===b&&(b=$("<div id='"+f+"' class='im-ts-map'>no maps available</div>")),b},u=function(){v.map.setZoom(g.zoom),v.map.setCenter(g.coordinates)},v={init:i,getView:t,onResizeHandler:p,triggerResize:s,setHeight:r,setCoordinates:o,setZoom:q,addMarker:m,destroy:n,reset:u};return v};GoogleMaps.ID=0,GoogleMaps.isLoaded=!1,GoogleMaps.isLoading=!1,GoogleMaps.apikey,GoogleMaps.events,GoogleMaps.getMapDataByUrl=function(a){var b,c=[],d="https://www.google.nl/maps/@45.0993332,-19.3366086,3z",e=d.split(".")[0];for(null===a&&(a=d),b=a.split(".")[0],b!==e&&(a=d),"z"===a.slice(-1)&&a.length<60&&(a+="/data"),i=0;i<3;i++)c[i]=parseFloat(a.split("@")[1].split("z/data")[0].split(",")[i]);return{lat:c[0],lng:c[1],zoom:c[2]}},CustomApiCache={},CustomApiCache.completeListeners=[],CustomApiCache.triggerCompleteListeners=function(a,b){for(var c=0;c<CustomApiCache.completeListeners[a].length;c++)CustomApiCache.completeListeners[a][c].func.apply(CustomApiCache.completeListeners[a][c].target,[b]);CustomApiCache.completeListeners[a]=[]},Magazine.media=Magazine.media||{},Magazine.media.soundcloud=function(){function a(){d||(d=!0,Loader.loadExternalJs("https://w.soundcloud.com/player/api.js",function(){for(var a in c)c[a].setReady();b=!0}))}var b=!1,c={},d=!1,e=0;return{player:function(d,f){var g=d;f=f||{};var h=null,i=[];this.id=e++,this.play=function(){return null===h?void i.push({action:arguments.callee,params:[]}):void h.play()},this.pause=function(){return null===h?void i.push({action:arguments.callee,params:[]}):void h.pause()},this.setReady=function(){h=SC.Widget(g);try{h.bind(SC.Widget.Events.READY,function(){h.unbind(SC.Widget.Events.READY),"function"==typeof f.onReady&&f.onReady.apply(this);try{h.bind(SC.Widget.Events.PLAY,function(){h.getCurrentSound(function(a){try{Magazine.tracker.trackEvent("Media","play",a.get(""))}catch(b){try{Magazine.tracker.trackEvent("Media","play",a.title)}catch(a){}}})}),h.bind(SC.Widget.Events.FINISH,function(){h.getCurrentSound(function(a){try{Magazine.tracker.trackEvent("Media","finished",a.get(""))}catch(b){try{Magazine.tracker.trackEvent("Media","finished",a.title)}catch(a){}}})})}catch(a){}})}catch(a){}if(i.length>0)for(var a in i){var b=i[a];b.action.apply(null,b.params)}},this.destroy=function(){if(null!=h){try{h.pause(),h=null}catch(a){}h=null}i=[],g=null,f=null,delete c[this.id]},c[this.id]=this,b?this.setReady():a()}}}();var DynamicGridSettings={maxCols:5,maxBlockWidth:400,minBlockWidth:300,loadCount:20,align:"left",padding:1,perfectFit:!1,fixedBlockHeight:!1,mobile:{maxBlockWidth:240,minBlockWidth:180},mobile_landscape:{maxBlockWidth:300,minBlockWidth:200}};Magazine.searchWindow={isOpen:!1,init:function(){},enableShortkey:function(){var a=this,b=!1;$(window).on("keydown",function(c){var d="number"==typeof c.which?c.which:c.keyCode;return b&&"F"==String.fromCharCode(d).toUpperCase()?(c.preventDefault(),a.open(),!1):void(91!==d&&17!==d||(b=!0))}),$(window).on("keyup",function(c){var d="number"==typeof c.which?c.which:c.keyCode;91===d||17===d?b=!1:a.isOpen&&27===d&&a.close()})},_resultHandlers:"mouseover",setMagazineData:function(a){var b=this;this.loader(!0),Magazine.getApi().getSearch(function(c){b.magazineData=c._embedded,a.apply(b)})},loader:function(a){"undefined"!=typeof this.$container&&(a?this.$container.find(".loader").show():this.$container.find(".loader").hide())},onReady:function(){this.loader(!1),"undefined"!=typeof this.searchValue&&this.searchValue.length>0&&this.search(this.searchValue)},open:function(){var a=this;this.isOpen=!0,"undefined"==typeof this.magazineData&&this.setMagazineData(a.onReady),"undefined"==typeof a.$container?Loader.loadFile(Config.viewer_url+"/popups/searchbar.html",function(b){a.$container=$(Hogan.compile(b.response).render()),Magazine.container.append(a.$container),a.$container.find("input").focus(),Magazine.container.addClass("im-search"),a.$container.startAnimation(Animation.fadeInDown,{duration:300}),a.$container.find(".transparent-overlay").on("click",function(){a.close()}),a.setResultHandlers(),a.setMainHandlers()}):(Magazine.container.addClass("im-search"),a.$container.show().startAnimation(Animation.fadeInDown,{duration:300}),a.$container.find("input").focus(),a.$container.find(".transparent-overlay").on("click",function(){a.close()})),Magazine.tracker.trackEvent("search","open")},setMainHandlers:function(){var a=this,b=this.$container.find("input");b.on("keydown",function(b){switch(b.keyCode){case 9:return b.preventDefault(),!1;case 40:return b.preventDefault(),a.selectResult(1),!1;case 38:return b.preventDefault(),a.selectResult(-1),!1;case 13:var c=a.$container.find(".hover");c.length>0&&("#"!==c.attr("href")?window.location.hash=c.trigger("click").attr("href"):c.trigger("click")),b.preventDefault()}}),b.on("keyup",function(c){switch(c.keyCode){case 40:c.preventDefault();break;case 38:c.preventDefault();break;default:b.val().length>2&&b.val()!==a.searchValue&&a.search(b.val())}})},selectResult:function(a){if(!(Magazine.device.size<DeviceSize.PORTRAIT)){var b=this.$container.find(".hover");if(0===b.length&&(b=$(this.$container.find(".result")[0])),a>0){var c=b.removeClass("hover").next(".result");0==c.length&&(c=$(this.$container.find(".result")[0])),c.addClass("hover")}else if(a<0){var d=b.removeClass("hover").prev(".result");0==d.length&&(d=$(this.$container.find(".result")[this.$container.find(".result").length-1])),d.addClass("hover")}else b.addClass("hover");this.onSelectResult()}},onSelectResult:function(){var a=this.$container.find(".hover");if(0!==a.length){var b,c=this.$container.find(".detail"),d=this.searchResults[a.data("index")];c.find(".paragraph").html(d.descriptions.join("<br />")),"page"===d.type?(b=Translate.getLabel("Page")+": "+(parseInt(d.page.number)+1)+"<br />",d.isArticle&&(b+=Translate.getLabel("Article")+": "+d.articleTitle)):"overlay"===d.type&&(b=Translate.getLabel("Article")+": "+d.title),c.find("h2").html(b)}},_searchResults:function(a,b,c,d,e,f){var g,h=[];g=d?d:b;for(var i in b)if("string"==typeof b[i]&&"id"!==i&&"template_id"!==i){var j=[],k=1;for(var l in c.words){var m=new RegExp("\\b"+c.words[l].toLowerCase()+"\\b","i"),n=b[i].toLowerCase().searchAll(m);for(var o in n)j.push({position:[n[o],c.words[l].length],word:c.words[l]});n.length>0&&(k+=.5),n=b[i].toLowerCase().indexOfAll(c.words[l].toLowerCase());for(var o in n){var p=!1;for(var q in j)j[q].position[0]!=n[o]&&j[q].position[1]!=c.words[l].length||(p=!0);p||j.push({position:[n[o],c.words[l].length],word:c.words[l]})}}if(j.length>0){j=j.sort(function(a,b){return a.position[0]-b.position[0]});var r=new this.searchResult;if("page"===a){var s=Magazine.getNavigationController().getPageById(g.id);if("undefined"==typeof s.alias)break;r.page={number:s.number,title:s.title};var t="#!/"+s.alias;r.title=Translate.getLabel("Page")+" "+(parseInt(s.number)+1)+": "+s.title,r.isArticle=!1,"undefined"!=typeof f&&(t+="/item/"+f,"undefined"!=typeof b.title&&(r.title=Translate.getLabel("Article")+": "+b.title,r.articleTitle=b.title,r.isArticle=!0)),r.type=a,r.identifier=t,"description"!==i&&"intro"!==i&&"paragraph"!==i||(r.description=this.getHighlightedDescription(b[i],j,30)),"undefined"!=typeof SEARCH_WEIGHT_SETTINGS.prop[i]&&(r.weight=SEARCH_WEIGHT_SETTINGS.prop[i]*k),r.action=new ActionModel(t)}else"overlay"===a&&(r.title=b.title,r.type=a,"description"!==i&&"intro"!==i&&"paragraph"!==i||(r.description=this.getHighlightedDescription(b[i],j,30)),"undefined"!=typeof SEARCH_WEIGHT_SETTINGS.prop[i]&&(r.weight=SEARCH_WEIGHT_SETTINGS.prop[i]*k),r.action=new ActionModel("overlay:"+f));h.push(r)}}else if($.isArray(b[i]))for(var u in b[i])h=h.concat(this._searchResults(a,b[i][u],c,g,e+1,u));else"object"==typeof b[i]&&null!==b[i]&&(h=h.concat(this._searchResults(a,b[i],c,g,e+1)));return h},getHighlightedDescription:function(a,b,c){var d="<span class='im-hightlighted'>",e="</span>",f=0;for(var g in b)a=a.splice(b[g].position[0]+f,0,d),f+=d.length,a=a.splice(b[g].position[0]+b[g].position[1]+f,0,e),f+=e.length;return a},_filterResults:function(a){var b=[];for(var c in a)"undefined"!=typeof b[a[c].identifier]?(b[a[c].identifier].weight+=a[c].weight,a[c].description&&b[a[c].identifier].descriptions.push(a[c].description)):(b[a[c].identifier]=a[c],a[c].description?b[a[c].identifier].descriptions=[a[c].description]:b[a[c].identifier].descriptions=[]);var d=[];for(var e in b)d.push(b[e]);return d.sort(function(a,b){return b.weight-a.weight}),d},_resultView:Hogan.compile('<a href="{{action.href}}" onclick="{{action.onclick}}" target="{{action.target}}" class="result" data-type="{{type}}" data-index="{{index}}">{{title}}</a>'),searchResult:function(){return{title:"",property:"",description:"",page:"",weight:1}},search:function(a){if("undefined"!=typeof this.magazineData){this.loader(!0),this._searchDepth=0,this.searchResults=[];var b=a.split(" "),c={words:[],string:a},d=new RegExp("\\b("+Translate.getLabel("stopwords")+")\\b","gi");for(var e in b)b[e].length>1&&null===b[e].match(d)&&c.words.push(b[e]);for(var f in this.magazineData.pages)this.searchResults=this.searchResults.concat(this._searchResults("page",this.magazineData.pages[f],c,!1,0));var g=Magazine.overlay.getOverlaysForSearch();for(var f in g)this.searchResults=this.searchResults.concat(this._searchResults("overlay",g[f],c,!1,0,f));var h=this.$container.find(".results");if(h.children(".result").off(this._resultHandlers),h.html(""),this.searchResults.length>0){this.searchResults=this._filterResults(this.searchResults);for(var i in this.searchResults)this.searchResults[i].index=i,h.append(this._resultView.render(this.searchResults[i]));this.$container.find(".search-box").addClass("with-results"),this.selectResult(0),this.setResultHandlers()}else{var h=this.$container.find(".results");h.children(".result").off(this._resultHandlers),h.html(""),this.$container.find(".search-box").removeClass("with-results")}this.loader(!1)}this.searchValue=a},setResultHandlers:function(){var a=this.$container.find(".results"),b=this;a.children(".result").on(this._resultHandlers,function(c){if(Magazine.device.size>DeviceSize.MOBILE_LANDSCAPE)switch(c.type){case"mouseover":a.children(".hover").removeClass("hover"),$(this).addClass("hover"),b.onSelectResult()}})},close:function(){Magazine.container.removeClass("im-search"),this.$container.find(".transparent-overlay").off("click"),this.$container.hide(),Magazine.tracker.trackEvent("search","close",this.searchValue),this.isOpen=!1}},Magazine.searchWindow.init();var SEARCH_WEIGHT_SETTINGS={prop:{title:10,alias:12,description:2,intro:4,filename:3}},ImParser=function(){var a={stringToXML:function(a){a=a.replace(/>\s*/g,">"),a=a.replace(/\s*</g,"<");var b=new DOMParser,c=b.parseFromString(a,"application/xml"),d=b.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;if(c.getElementsByTagNameNS(d,"parsererror").length>0)throw new Error("Error parsing XML");return c},parseXML:function(b){var c=(b.childNodes,{});if(1==b.nodeType&&b.attributes.length>0){c["@attributes"]={};for(var d=0;d<b.attributes.length;d++){var e=b.attributes.item(d);c["@attributes"][e.nodeName]=e.nodeValue}}if("undefined"==typeof c["@attributes"]&&b.nodeValue&&(c=b.nodeValue),b.hasChildNodes())for(var f=0;f<b.childNodes.length;f++){var g=b.childNodes.item(f),h=g.nodeName;if(0===h.indexOf("#text")&&trim(g.nodeValue)){c=g.nodeValue;break}if("undefined"==typeof c[h])"item"===h?(c[h]=[],c[h].push(a.parseXML(g))):c[h]=a.parseXML(g);else{if("undefined"==typeof c[h].push){var i=c[h];c[h]=[],c[h].push(i)}c[h].push(a.parseXML(g))}}return c}};return a}();PageEvents.EVENTS={WILL_APPEAR:"will_appear",DID_APPEAR:"did_appear",DID_DISAPPEAR:"did_disappear",WILL_DISAPPEAR:"will_disappear",DID_LOAD_VIEW:"did_load_view",WILL_LOAD_VIEW:"will_load_view",ON_RESIZE:"resize",ON_END_RESIZE:"end_resize",ON_OVERLAY_SHOW:"overlay_show",ON_OVERLAY_HIDE:"overlay_hide"};var NavigationButtonType={ARROWS:{name:"arrows",view:'<div class="im-n-buttons-arrows only-desktop-tablet"><a href="" aria-label="Scroll up" class="im-n-button im-n-button-up"><div class="im-ts-button-background im-ts-border-radius"><span class="im-sp im-sp-arrow-up-3"></span></div></a><a href="" aria-label="Scroll down" class="im-n-buttons-arrows im-n-button im-n-button-down show"><div class="im-ts-button-background im-ts-border-radius"><span class="im-sp im-sp-arrow-down-3"></span></div></a><a href="" class="im-ts-label im-n-button show"></a></div>',_labelClass:"im-ts-label"},BARS:{name:"bars",view:'<div class="im-n-buttons-bars only-desktop-tablet"><div class="im-ts-button-background im-n-button im-n-button-up"><a href="#" aria-label="Scroll up" class="in-page-navigation im-previous im-ts-button-background"><span class="im-sp im-sp-arrow-up-s-2"></span></a></div><div class="im-ts-button-background im-n-button im-n-button-down show"><a href="#" aria-label="Scroll down" class="in-page-navigation im-next im-ts-button-background"><span class="im-sp im-sp-arrow-down-s-2"></span></a></div></div>'},CIRCLE:{name:"circle",view:'<div class="im-n-buttons-circle only-desktop-tablet"><a href="" aria-label="Scroll up" class="im-n-button im-n-button-up"><div class="im-ts-button-background"><span class="im-sp im-sp-arrow-up-3"></span></div></a><a href="" aria-label="Scroll down" class="im-n-button im-n-button-down show"><div class="im-ts-button-background"><span class="im-sp im-sp-arrow-down-3"></span></div></a>',top:!1}},Assets=Assets||{};Assets.init=function(){this.sources=[],this.loader="<div id='Loader'><div class='bar'><div class='progress'></div></div></div>",this.pageloader="<div class='pageLoader'></div>",this.pageTransition={time:500,ease:Ease.InSine},isNaN(this.maxWidth)&&(this.maxWidth=2e3),isNaN(this.maxHeight)&&(this.maxHeight=1e3),this.API_FILE_EXTENSION||(this.API_FILE_EXTENSION="json"),this.navigationBar={},this.navigationBar.getPageNumber=function(a){return"<a href='javascript:void(0);' class='sprite number'>"+a+"</a>"},this.screenshotThumb={width:157,height:109},this.navigationBar.align=[],this.navigationBar.align[4]="right",this.navigationBar.align[3]="bottom",this.navigationBar.align[2]="bottom",this.navigationBar.align[1]="bottom",this.navigationBar.size=[],this.navigationBar.size[1]=[54,54,!1],this.navigationBar.size[2]=[54,54,!1],this.navigationBar.size[3]=[67,67,!1],this.navigationBar.size[4]=[67,67,!1],this.navigationBar.pageIndexRowHeight=154,this.infoPages={},this.infoPages.width=250,this.branding={},this.branding.navigationBarTemplate=Hogan.compile('<a target="_blank" href="https://www.instantmagazine.com/?utm_source=im&utm_medium=magazine&utm_campaign=im-branding&utm_content={{utm_content}}" class="nav-item im-ts-nav-buttons nav-item-branding im-branding-type-{{type}}"></a>'),this.branding.navigationBarPosition=".buttons-bottom",this.branding.appendOption="append",this.navigationBar.listItem=Hogan.compile("<div><a href='{{href}}' class='polaroid' title='{{label}}' {{#onclick}}onclick='{{onclick}}'{{/onclick}} {{#target}}target='{{target}}'{{/target}}><img src='{{image}}' title='{{label}}' /><span>{{{label}}}</span></a></div>"),this.navigationBar.listClass="ListIndex",this.navigationBar.iconListClassMobile="IconsIndexMobile",this.navigationBar.iconListClass="IconsIndex",this.navigationBar.helpButton=Hogan.compile("<a href='{{href}}' onclick='{{onclick}}' class='nav-item nav-item-help'><span class='im-sp im-sp-help'></span></a>"),this.navigationBar.shareButton=Hogan.compile("<a data-action='share' href='javascript:void(0)' data-alignment='top' class='nav-item nav-label-button im-ts-nav-buttons'><span>{{{label}}}</span></a>"),this.navigationBar.shareButtonMobile=Hogan.compile("<a data-action='share' href='javascript:void(0)' class='nav-item im-ts-nav-buttons nav-icon-button nav-item-social'><span class='im-sp im-sp-social'></span></a>"),this.navigationBar.navigationButtonIcon=Hogan.compile('<a target="{{target}}" data-action="{{action}}" {{#index}}data-index="{{index}}" {{/index}}{{#onclick}}onclick="{{onclick}}" {{/onclick}}href="{{href}}" class="nav-item nav-custom-button nav-icon-button small im-ts-nav-buttons {{classname}}">{{#sprite}}<span class="im-sp im-sp-{{sprite}}">{{/sprite}}{{#icon}}<span class="icon-sprite">{{{icon.reference}}}{{/icon}}{{^icon}}{{^sprite}}{{{nav_label}}}{{/sprite}}{{/icon}}</span>{{#rollover}}<span class="im-rollover-label">{{{rollover}}}</span>{{/rollover}}</a>'),this.navigationBar.navigationButton=Hogan.compile('<a target="{{target}}" data-action="{{action}}" {{#index}}data-index="{{index}}" {{/index}}{{#onclick}}onclick="{{onclick}}" {{/onclick}}href="{{href}}" class="nav-item nav-custom-button nav-label-button im-ts-nav-buttons {{classname}}"><span>{{{label}}}</span></a>'),this.navigationBar.getNavigationLogo=function(){return"<a href='javascript:void(0);' class='logo'></a>"},this.navigationBar.getPrintOptions=function(){return"<a href='javascript:void(0);' data-action='print_page'>"+Translate.getLabel("print_current_page")+"</a><a href='javascript:void(0);' data-action='print_all'>"+Translate.getLabel("print_all_pages")+"</a>"},this.navigationBar.printPopup="<div class='popup-print'><a href='javascript:void(0);' data-action='print_page'>"+Translate.getLabel("print_current_page")+"</a><br /><a href='javascript:void(0);' data-action='print_all'>"+Translate.getLabel("print_all_pages")+"</a></div>",this.navigationBar.pageIndexNumbers=Hogan.compile("<span class='current'>{{current}}</span><span class='seperator'>|</span><span class='total'>{{total}}</span></a>"),this.navigationBar.navigationButtonMobile=Hogan.compile('<div class="small icon-button"><a href="{{href}}" target="{{target}}" data-action="{{action}}" onclick="{{onclick}}" data-index="{{index}}"><div class="icon im-ts-button">{{^icon}}{{#sprite}}<span class="im-sp im-sp-{{sprite}}">{{/sprite}}{{/icon}}<span class="icon-sprite">{{{icon.reference}}}</span></div></a><span>{{{label}}}</span></div>'),this.navigationBar.navigationButtonSocial=Hogan.compile('<a href="share" target="_blank" class="shareButton" onclick="Magazine.social.onClick(event,this)" data-type="{{type}}"><span class="im-sp im-sp-social-icon im-sp-social-{{icon}}"></span></a>'),this.navigationBar.soundButtonAfter=".nav-page-number",this.navigationBar.socialIconListClass="IconsIndex",this.video={},this.video.theme="light",this.video.color="red",this.popup={},this.popup.title=function(a){return"<h3>"+a+"</h3>"},this.popup.showAnimation=Animation.scaleDownIn,this.popup.hideAnimation=Animation.scaleUpOut,this.popup.showAnimationEase=CssEase.OutCirc,this.popup.hideAnimationEase=CssEase.InCirc,this.popup.description=function(a){return"<div>"+a+"</div>"},this.popup.mobile={},this.popup.mobile.title=function(a){return"<div class='top_header'><h3>"+a+"</h3></div>"},this.popup.mobile.description=function(a){return"<div>"+a+"</div>"},this.popup.mobile.showAnimation=Animation.slideInUp,this.popup.mobile.hideAnimation=Animation.slideOutDown,this.subpage={},this.subpage.header={},this.subpage.header.height=[],this.subpage.header.height[1]=57,this.subpage.header.height[2]=57,this.subpage.header.height[3]=78,this.subpage.header.height[4]=null,this.social={},this.social.button=Hogan.compile('<a href="share" target="_blank" class="shareButton" onclick="Magazine.social.onClick(event,this)" data-type="{{type}}"><span class="im-sp im-sp-social-{{icon}}"></span></a>')},Console.log(Assets),Loader.loadComplete();